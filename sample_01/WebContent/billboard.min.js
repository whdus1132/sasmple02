/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 * 
 * billboard.js, JavaScript chart library
 * http://naver.github.io/billboard.js/
 * 
 * @version 1.11.0
 */
!function webpackUniversalModuleDefinition(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-time-format"),require("d3-selection"),require("d3-transition"),require("d3-axis"),require("d3-brush"),require("d3-scale"),require("d3-dsv"),require("d3-drag"),require("d3-shape"),require("d3-interpolate"),require("d3-color"),require("d3-zoom"),require("d3-ease"));else if("function"==typeof define&&define.amd)define(["d3-time-format","d3-selection","d3-transition","d3-axis","d3-brush","d3-scale","d3-dsv","d3-drag","d3-shape","d3-interpolate","d3-color","d3-zoom","d3-ease"],e);else{var a="object"==typeof exports?e(require("d3-time-format"),require("d3-selection"),require("d3-transition"),require("d3-axis"),require("d3-brush"),require("d3-scale"),require("d3-dsv"),require("d3-drag"),require("d3-shape"),require("d3-interpolate"),require("d3-color"),require("d3-zoom"),require("d3-ease")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(var i in a)("object"==typeof exports?exports:t)[i]=a[i]}}(this,function(a,i,n,r,o,s,c,l,u,d,g,h,f){return x={},__webpack_require__.m=p=[function(t,e,a){a(1),t.exports=a(15)},function(t,e,a){},function(t,e){t.exports=a},function(t,e){t.exports=i},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=o},function(t,e){t.exports=s},function(t,e){t.exports=c},function(t,e){t.exports=l},function(t,e){t.exports=u},function(t,e){t.exports=d},function(t,e){t.exports=g},function(t,e){t.exports=h},function(t,e){t.exports=f},function(t,e,a){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _slicedToArray(t,e){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],i=!0,n=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(a.push(o.value),!e||a.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(n)throw r}}return a}}(t,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}a.r(e);var o=a(2),B=a(3),P=a(4),s=a(5),M={arc:"bb-arc",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",zoomRect:"bb-zoom-rect",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _typeof2(t){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof2(t){return typeof t}:function _typeof2(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function _typeof(t){return _typeof2(t)}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)})(t)}var c=a(6),l=Bc(self)||Bc(window)||Bc(global)||Bc(globalThis)||Function("return this")(),k=l&&l.document;function Bc(t){return void 0!==t&&t}function ya(t){return t||0===t}function za(t){return"function"==typeof t}function Aa(t){return"string"==typeof t}function Ba(t){return"number"==typeof t}function Ca(t){return void 0===t}function Da(t){return void 0!==t}function Ea(t){return"boolean"==typeof t}function Fa(t){return 10*Math.ceil(t/10)}function Ga(t){return Math.ceil(t)+.5}function Ha(t){return t[1]-t[0]}function Ia(t){return"object"===_typeof(t)}function Ja(t){return Ca(t)||null===t||Aa(t)&&0===t.length||Ia(t)&&!(t instanceof Date)&&0===Object.keys(t).length||Ba(t)&&isNaN(t)}function Ka(t){return!Ja(t)}function La(t){return t&&t.constructor===Array}function Ma(t){return t&&!t.nodeType&&Ia(t)&&!La(t)}function Na(t,e,a){return Da(t[e])?t[e]:a}function Pa(t){for(var e=za(t),a=arguments.length,i=Array(1<a?a-1:0),n=1;n<a;n++)i[n-1]=arguments[n];return e&&t.call.apply(t,i),e}function Qa(t){return Aa(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function Ra(a,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[-1,1],e=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];if(a&&Aa(t))if(-1===t.indexOf("\n"))a.text(t);else{var n=[a.text(),t].map(function(t){return t.replace(/[\s\n]/g,"")});if(n[0]!==n[1]){var r=t.split("\n"),o=e?r.length-1:1;a.html(""),r.forEach(function(t,e){a.append("tspan").attr("x",0).attr("dy","".concat(0===e?i[0]*o:i[1],"em")).text(t)})}}}function Sa(t){var e=t.getBBox(),a=e.x,i=e.y,n=e.width,r=e.height;return[{x:a,y:i+r},{x:a,y:i},{x:a+n,y:i},{x:a+n,y:i+r}]}function Ua(t){var e=null,a=B.event,i=t.context||t.main;return a&&"BrushEvent"===a.constructor.name?e=a.selection:i&&(e=i.select(".".concat(M.brush)).node())&&(e=Object(c.brushSelection)(e)),e}function Va(t){return t.rect||(t.rect=t.getBoundingClientRect())}function Wa(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return Math.random()+(t?"":0)}function Xa(t){var e=Ua(t);return!e||e[0]===e[1]}function Ya(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0;for(var a in e)t[a]=e[a];return t}function Za(t){return t.charAt(0).toUpperCase()+t.slice(1)}function $a(t){return[].slice.call(t)}function ab(t){var e=t[0]instanceof Date,a=(e?t.map(Number):t).filter(function(t,e,a){return a.indexOf(t)===e});return e?a.map(function(t){return new Date(t)}):a}function bb(t){return t&&t.length?t.reduce(function(t,e){return t.concat(e)}):[]}function db(t){var e,a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return t[0]instanceof Date?e=a?function(t,e){return t-e}:function(t,e){return e-t}:a&&!t.every(isNaN)?e=function(t,e){return t-e}:a||(e=function(t,e){return(e<t?-1:t<e&&1)||t===e&&0}),t.concat().sort(e)}function eb(t,e){var a=e.filter(function(t){return Ka(t)});return a.length?Ba(a[0])?a=Math[t].apply(Math,_toConsumableArray(a)):a[0]instanceof Date&&(a=db(a,"min"===t)[0]):a=void 0,a}function fb(t,e){for(var a=[],i=t;i<e;i++)a.push(i);return a}function hb(t,e){var a=t;for(var i in e)a=a.replace(new RegExp("{=".concat(i,"}"),"g"),e[i]);return a}var i,p=(i=function(a){for(var t=arguments.length,e=Array(1<t?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];if(!e.length||1===e.length&&!e[0])return a;var n=e.shift();return Ma(a)&&Ma(n)&&Object.keys(n).forEach(function(t){var e=n[t];Ma(e)?(a[t]||(a[t]={}),a[t]=p(a[t],e)):a[t]=La(e)?e.concat():e}),p.apply(void 0,[a].concat(e))},mergeObj.toString=function(){return i.toString()},mergeObj),g={mouse:function(){try{return new MouseEvent("t"),function(t,e){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0};t.dispatchEvent(new MouseEvent(e,a))}}catch(t){return function(t,e){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0},i=k.createEvent("MouseEvent");i.initMouseEvent(e,a.bubbles,a.cancelable,l,0,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}}(),touch:function touch(t,e,a){var i=new Touch(p({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},a));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[i],targetTouches:[],changedTouches:[i]}))}};function mergeObj(){return i.apply(this,arguments)}function lb(t,e){var a=t.config.axis_rotated;return e?a:!a}function mb(t){return"".concat(M.axis," ").concat(M["axis".concat(Za(t))])}function pb(t){_classCallCheck(this,pb);var e=new n(this);this.plugins=[],(this.internal=e).loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function bindThis(e,a,i){Object.keys(e).forEach(function(t){a[t]=e[t].bind(i),Object.keys(e[t]).length&&bindThis(e[t],a[t],i)})}(pb.prototype,this,this)}function qb(){return _classCallCheck(this,qb),{bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:void 0,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function data_idConverter(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_labels_colors:void 0,data_labels_position:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_stack_normalize:!1,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function data_selection_isselectable(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function data_onclick(){},data_onover:function data_onover(){},data_onout:function data_onout(){},data_onselected:function data_onselected(){},data_onunselected:function data_onunselected(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_text_show:!0,subchart_onbrush:function subchart_onbrush(){},color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0,legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1,axis_rotated:!1,axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[],axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[],axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[],grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_front:!1,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle",line_connectNull:!1,line_step_type:"step",line_classes:void 0,line_point:!0,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bubble_maxR:35,area_zerobased:!0,area_above:!1,area_linearGradient:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_innerRadius:0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0,plugins:[],gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0,spline_interpolation_type:"cardinal",radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function radar_level_text_format(t){return t%1==0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1,render:{},regions:[],tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function tooltip_onshow(){},tooltip_onhide:function tooltip_onhide(){},tooltip_onshown:function tooltip_onshown(){},tooltip_onhidden:function tooltip_onhidden(){},tooltip_order:null,title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"}}var d=a(7),E=function(){function AxisRendererHelper(t,e){_classCallCheck(this,AxisRendererHelper);var a=Object(d.scaleLinear)();this.config=t,this.scale=a,!t.noTransition&&e.config.transition_duration||(t.withoutTransition=!0),t.range=a.rangeExtent?a.rangeExtent():this.scaleExtent((e.orgXScale||a).range())}return _createClass(AxisRendererHelper,[{key:"axisX",value:function axisX(t,e){var a=this;t.attr("transform",function(t){return"translate(".concat(Math.ceil(e(t)+a.config.tickOffset),",0)")})}},{key:"axisY",value:function axisY(t,e){t.attr("transform",function(t){return"translate(0,".concat(Math.ceil(e(t)),")")})}},{key:"scaleExtent",value:function scaleExtent(t){var e=t[0],a=t[t.length-1];return e<a?[e,a]:[a,e]}},{key:"generateTicks",value:function generateTicks(t){var e=[];if(t.ticks)return t.ticks.apply(t,_toConsumableArray(this.config.tickArguments||[])).map(function(t){return Aa(t)&&Ba(t)&&!isNaN(t)&&Math.round(10*t)/10||t});for(var a=t.domain(),i=Math.ceil(a[0]);i<a[1];i++)e.push(i);return 0<e.length&&0<e[0]&&e.unshift(e[0]-(e[1]-e[0])),e}},{key:"copyScale",value:function copyScale(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t}},{key:"textFormatted",value:function textFormatted(t){var e=this.config.tickFormat,a=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,i=e?e(a):a;return Da(i)?i:""}},{key:"transitionise",value:function transitionise(t){var e=this.config;return e.withoutTransition?t.interrupt():t.transition(e.transition)}}],[{key:"getSizeFor1Char",value:function getSizeFor1Char(t){var n={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){try{var e=t.node().getBBox(),a=e.width,i=e.height;a&&i&&(n.w=a,n.h=i),t.text("")}catch(t){}}),this.getSizeFor1Char=function(){return n},n}}]),AxisRendererHelper}(),v=function(){function AxisRenderer(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,AxisRenderer);var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.helper=new E(e,t),this.config=e,this.params=t}return _createClass(AxisRenderer,[{key:"create",value:function create(t){var x=this,v=this.config,m=this.params,_=this.helper,y=_.scale,b=v.orient,T=this.splitTickText.bind(this),A=/^(left|right)$/.test(b),w=/^(top|bottom)$/.test(b),L=_[w?"axisX":"axisY"],C=L===_.axisX?"y":"x",S=/^(top|left)$/.test(b)?-1:1,k=m.tickTextRotate;this.config.range=y.rangeExtent?y.rangeExtent():_.scaleExtent((m.orgXScale||y).range());var e=v,D=e.innerTickSize,O=e.tickLength,X=e.range,a=m.name,F=a&&/^(x|y|y2)$/.test(a)?m.config["axis_".concat(a,"_tick_text_position")]:{x:0,y:0},i="subX"===a?"subchart_axis_x":"axis_".concat(a),n=m.config["".concat(i,"_show")],R=!!n&&m.config["".concat(i,"_tick_show")],I=!!n&&m.config["".concat(i,"_tick_text_show")],z=null;t.each(function(){var t=Object(B.select)(this),e=this.__chart__||y,i=_.copyScale();z=t,this.__chart__=i,v.tickOffset=m.isCategory?Math.ceil((i(1)-i(0))/2):0;var a,n=t.selectAll(".domain").data([0]);if(n.enter().append("path").attr("class","domain").merge(_.transitionise(n)).attr("d",function(){var t=v.outerTickSize*S;return w?"M".concat(X[0],",").concat(t,"V0H").concat(X[1],"V").concat(t):"M".concat(t,",").concat(X[0],"H0V").concat(X[1],"H").concat(t)}),R||I){var r=v.tickValues||_.generateTicks(i),o=t.selectAll(".tick").data(r,i),s=o.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),c=o.exit().remove();o=s.merge(o),R&&s.append("line"),I&&s.append("text");var l=E.getSizeFor1Char(o),u=[],d=o.select("text").selectAll("tspan").data(function(t,e){var a=m.tickMultiline?T(t,i,r,A,l.w):La(_.textFormatted(t))?_.textFormatted(t).concat():[_.textFormatted(t)];return u[e]=a.length,a.map(function(t){return{index:e,splitted:t}})});d.exit().remove(),(d=d.enter().append("tspan").merge(d).text(function(t){return t.splitted})).attr("x",w?0:O*S).attr("dx",(a=0,"bottom"===b&&k&&(a=8*Math.sin(Math.PI*(k/180))),a+(F.x||0))).attr("dy",function(t,e){var a=0;return"top"!==b&&(a=l.h,0===e&&(a=A?-((u[t.index]-1)*(l.h/2)-3):0===F.y?".71em":0)),Ba(a)&&F.y?a+F.y:a||".71em"});var g=o.select("line"),h=o.select("text");if(s.select("line").attr("".concat(C,"2"),D*S),s.select("text").attr("".concat(C),O*S),x.setTickLineTextPosition(g,h),m.tickTitle&&h.append&&h.append("title").each(function(t){Object(B.select)(this).text(m.tickTitle[t])}),i.bandwidth){var f=i,p=f.bandwidth()/2;i=e=function(t){return f(t)+p}}else e.bandwidth?e=i:L.call(_,c,i);L.call(_,s,e),L.call(_,_.transitionise(o).style("opacity","1"),i)}}),this.g=z}},{key:"getTickXY",value:function getTickXY(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e}},{key:"getTickSize",value:function getTickSize(t){var e=this.helper.scale,a=this.config,i=a.innerTickSize,n=a.range,r=e(t)+(a.tickCentered?0:a.tickOffset);return n[0]<r&&r<n[1]?i:0}},{key:"setTickLineTextPosition",value:function setTickLineTextPosition(t,e){var a=this.getTickXY(),i=this.config,n=i.innerTickSize,r=i.orient,o=i.tickLength,s=i.tickOffset,c=this.params.tickTextRotate;"bottom"===r?(t.attr("x1",a.x).attr("x2",a.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",function yForText(t){return t?11.5-t/15*2.5*(0<t?1:-1):o}(c)).style("text-anchor",function textAnchorForText(t){return t?0<t?"start":"end":"middle"}(c)).attr("transform",function textTransform(t){return t?"rotate(".concat(t,")"):null}(c))):"top"===r?(t.attr("x2",0).attr("y2",-n),e.attr("x",0).attr("y",2*-o).style("text-anchor","middle")):"left"===r?(t.attr("x2",-n).attr("y1",a.y).attr("y2",a.y),e.attr("x",-o).attr("y",s).style("text-anchor","end")):"right"===r&&(t.attr("x2",n).attr("y2",0),e.attr("x",o).attr("y",0).style("text-anchor","start"))}},{key:"splitTickText",value:function splitTickText(t,e,a,i,o){var n=this.params,r=this.helper.textFormatted(t),s=Aa(r)&&-1<r.indexOf("\n")?r.split("\n"):[];if(s.length)return s;if(La(r))return r;var c=n.tickWidth;return(!c||c<=0)&&(c=i?95:n.isCategory?Math.ceil(e(a[1])-e(a[0]))-12:110),function split(t,e){for(var a,i,n,r=1;r<e.length;r++)if(" "===e.charAt(r)&&(i=r),a=e.substr(0,r+1),n=o*a.length,c<n)return split(t.concat(e.substr(0,i||r)),e.slice(i?i+1:r));return t.concat(e)}(s,r+"")}},{key:"scale",value:function scale(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale}},{key:"orient",value:function orient(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient}},{key:"tickFormat",value:function tickFormat(t){return arguments.length?(this.config.tickFormat=t,this):this.config.tickFormat}},{key:"tickCentered",value:function tickCentered(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered}},{key:"tickOffset",value:function tickOffset(){return this.config.tickOffset}},{key:"tickInterval",value:function tickInterval(t){var e;this.params.isCategory?e=2*this.config.tickOffset:e=(this.g.select("path.domain").node().getTotalLength()-2*this.config.outerTickSize)/(t||this.g.selectAll("line").size());return e===1/0?0:e}},{key:"ticks",value:function ticks(){for(var t=this.config,e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return a.length?(t.tickArguments=$a(a),this):t.tickArguments}},{key:"tickCulling",value:function tickCulling(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling}},{key:"tickValues",value:function tickValues(t){var e=this,a=this.config;if(za(t))a.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return a.tickValues;a.tickValues=t}return this}},{key:"setTransition",value:function setTransition(t){return this.config.transition=t,this}}]),AxisRenderer}(),u=function(){function Axis(t){_classCallCheck(this,Axis),this.owner=t,this.setOrient()}return _createClass(Axis,[{key:"init",value:function init(){var n=this,r=this.owner,o=r.config,s=o.axis_rotated,c=r.main,t=["x","y"];o.axis_y2_show&&t.push("y2"),r.axesList={},t.forEach(function(e){var t=mb(e),a=e.toUpperCase(),i=M["axis".concat(a,"Label")];r.axes[e]=c.append("g").attr("class",t).attr("clip-path",function(){var t=null;return"x"===e?t=r.clipPathForXAxis:"y"===e&&o.axis_y_inner&&(t=r.clipPathForYAxis),t}).attr("transform",r.getTranslate(e)).style("visibility",o["axis_".concat(e,"_show")]?"visible":"hidden"),r.axes[e].append("text").attr("class",i).attr("transform",["rotate(-90)",null]["x"===e?+!s:+s]).style("text-anchor",n["textAnchorFor".concat(a,"AxisLabel")].bind(n)),n.generateAxes(e)})}},{key:"setOrient",value:function setOrient(){var t=this.owner,e=t.config,a=e.axis_rotated,i=e.axis_y_inner,n=e.axis_y2_inner;t.xOrient=a?"left":"bottom",t.yOrient=a?i?"top":"bottom":i?"right":"left",t.y2Orient=a?n?"bottom":"top":n?"left":"right",t.subXOrient=a?"left":"bottom"}},{key:"generateAxes",value:function generateAxes(i){var n,r=this.owner,t=r.config,o=[],e=t["axis_".concat(i,"_axes")],a=t.axis_rotated;"x"===i?n=a?s.axisLeft:s.axisBottom:"y"===i?n=a?s.axisBottom:s.axisLeft:"y2"===i&&(n=a?s.axisTop:s.axisRight),e.length&&e.forEach(function(t){var e=t.tick||{},a=r[i].copy();t.domain&&a.domain(t.domain),o.push(n(a).ticks(e.count).tickFormat(e.format||function(t){return t}).tickValues(e.values).tickSizeOuter(!1===e.outer?0:6))}),r.axesList[i]=o}},{key:"updateAxes",value:function updateAxes(){var l=this.owner,u=l.config;Object.keys(l.axesList).forEach(function(r){var o=u["axis_".concat(r,"_axes")],s=l[r].copy(),c=s.range();l.axesList[r].forEach(function(t,e){var a=t.scale().range();c.every(function(t,e){return t===a[e]})||t.scale().range(c);var i="".concat(mb(r),"-").concat(e+1),n=l.main.select(".".concat(i.replace(/\s/,".")));n.empty()?n=l.main.append("g").attr("class",i).style("visibility",u["axis_".concat(r,"_show")]?"visible":"hidden").call(t):(o[e].domain&&s.domain(o[e].domain),l.xAxis.helper.transitionise(n).call(t.scale(s))),n.attr("transform",l.getTranslate(r,e+1))})})}},{key:"getAxis",value:function getAxis(t,e,a,i,n){var r=this.owner,o=r.config,s=/^(x|subX)$/.test(t),c=s?"x":"y",l=s&&r.isCategorized(),u=r["".concat(t,"Orient")],d=s?r.xAxisTickFormat:o["axis_".concat(t,"_tick_format")],g=s?r.xAxisTickValues:r["".concat(t,"AxisTickValues")],h=p({outerTick:a,noTransition:i,config:o,name:t,tickTextRotate:n?0:o["axis_".concat(c,"_tick_rotate")]},s&&{isCategory:l,tickMultiline:o.axis_x_tick_multiline,tickWidth:o.axis_x_tick_width,tickTitle:l&&o.axis_x_tick_tooltip&&r.api.categories(),orgXScale:r.x}),f=new v(h).scale(s&&r.zoomScale||e).orient(u);return s&&r.isTimeSeries()&&g&&!za(g)?g=g.map(function(t){return r.parseDate(t)}):!s&&r.isTimeSeriesY()&&(f.ticks(o.axis_y_tick_time_value),g=null),g&&f.tickValues(g),f.tickFormat(d||!s&&r.isStackNormalized()&&function(t){return"".concat(t,"%")}),l&&(f.tickCentered(o.axis_x_tick_centered),Ja(o.axis_x_tick_culling)&&(o.axis_x_tick_culling=!1)),o["axis_".concat(c,"_tick_count")]&&f.ticks(o["axis_".concat(c,"_tick_count")]),f}},{key:"updateXAxisTickValues",value:function updateXAxisTickValues(t,e){var a,i=this.owner,n=i.config,r=n.axis_x_tick_fit,o=n.axis_x_tick_count;return(r||o&&r)&&(a=this.generateTickValues(i.mapTargetsToUniqueXs(t),o,i.isTimeSeries())),e?e.tickValues(a):i.xAxis&&(i.xAxis.tickValues(a),i.subXAxis.tickValues(a)),a}},{key:"getId",value:function getId(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"}},{key:"getXAxisTickFormat",value:function getXAxisTickFormat(){var e,a=this.owner,i=a.config.axis_x_tick_format,t=a.isTimeSeries(),n=a.isCategorized();return i?za(i)?e=i:t&&(e=function(t){return t?a.axisTimeFormat(i)(t):""}):e=t?a.defaultAxisTimeFormat:n?a.categoryName:function(t){return t<0?t.toFixed(0):t},za(e)?function(t){return e.apply(a,n?[t,a.categoryName(t)]:[t])}:e}},{key:"getTickValues",value:function getTickValues(t){var e=this.owner,a=e.config["axis_".concat(t,"_tick_values")],i=e["".concat(t,"Axis")];return(za(a)?a():a)||(i?i.tickValues():void 0)}},{key:"getLabelOptionByAxisId",value:function getLabelOptionByAxisId(t){return this.owner.config["axis_".concat(t,"_label")]}},{key:"getLabelText",value:function getLabelText(t){var e=this.getLabelOptionByAxisId(t);return Aa(e)?e:e?e.text:null}},{key:"setLabelText",value:function setLabelText(t,e){var a=this.owner.config,i=this.getLabelOptionByAxisId(t);Aa(i)?a["axis_".concat(t,"_label")]=e:i&&(i.text=e)}},{key:"getLabelPosition",value:function getLabelPosition(t,e){function jj(t){return!!~n.indexOf(t)}var a=this.owner.config.axis_rotated,i=this.getLabelOptionByAxisId(t),n=Ia(i)&&i.position?i.position:e[+!a];return{isInner:jj("inner"),isOuter:jj("outer"),isLeft:jj("left"),isCenter:jj("center"),isRight:jj("right"),isTop:jj("top"),isMiddle:jj("middle"),isBottom:jj("bottom")}}},{key:"getXAxisLabelPosition",value:function getXAxisLabelPosition(){return this.getLabelPosition("x",["inner-top","inner-right"])}},{key:"getYAxisLabelPosition",value:function getYAxisLabelPosition(){return this.getLabelPosition("y",["inner-right","inner-top"])}},{key:"getY2AxisLabelPosition",value:function getY2AxisLabelPosition(){return this.getLabelPosition("y2",["inner-right","inner-top"])}},{key:"getLabelPositionById",value:function getLabelPositionById(t){return this["get".concat(t.toUpperCase(),"AxisLabelPosition")]()}},{key:"textForXAxisLabel",value:function textForXAxisLabel(){return this.getLabelText("x")}},{key:"textForYAxisLabel",value:function textForYAxisLabel(){return this.getLabelText("y")}},{key:"textForY2AxisLabel",value:function textForY2AxisLabel(){return this.getLabelText("y2")}},{key:"xForAxisLabel",value:function xForAxisLabel(t,e){var a=!(1<arguments.length&&void 0!==e)||e,i=this.owner,n=t.isMiddle?-i.height/2:0;return lb(i,a)?n=t.isLeft?0:t.isCenter?i.width/2:i.width:t.isBottom&&(n=-i.height),n}},{key:"dxForAxisLabel",value:function dxForAxisLabel(t,e){var a=!(1<arguments.length&&void 0!==e)||e,i=this.owner,n=t.isBottom?"0.5em":"0";return lb(i,a)?n=t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop&&(n="-0.5em"),n}},{key:"textAnchorForAxisLabel",value:function textAnchorForAxisLabel(t,e){var a=!(1<arguments.length&&void 0!==e)||e,i=this.owner,n=t.isMiddle?"middle":"end";return lb(i,a)?n=t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom&&(n="start"),n}},{key:"xForXAxisLabel",value:function xForXAxisLabel(){return this.xForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"xForYAxisLabel",value:function xForYAxisLabel(){return this.xForAxisLabel(this.getYAxisLabelPosition())}},{key:"xForY2AxisLabel",value:function xForY2AxisLabel(){return this.xForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dxForXAxisLabel",value:function dxForXAxisLabel(){return this.dxForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"dxForYAxisLabel",value:function dxForYAxisLabel(){return this.dxForAxisLabel(this.getYAxisLabelPosition())}},{key:"dxForY2AxisLabel",value:function dxForY2AxisLabel(){return this.dxForAxisLabel(this.getY2AxisLabelPosition())}},{key:"dyForXAxisLabel",value:function dyForXAxisLabel(){var t=this.owner.config,e=this.getXAxisLabelPosition().isInner,a=t.axis_x_height;return t.axis_rotated?e?"1.2em":-25-this.getMaxTickWidth("x"):e?"-0.5em":a?a-10:"3em"}},{key:"dyForYAxisLabel",value:function dyForYAxisLabel(){var t=this.owner,e=this.getYAxisLabelPosition().isInner;return t.config.axis_rotated?e?"-0.5em":"3em":e?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)}},{key:"dyForY2AxisLabel",value:function dyForY2AxisLabel(){var t=this.owner,e=this.getY2AxisLabelPosition().isInner;return t.config.axis_rotated?e?"1.2em":"-2.2em":e?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)}},{key:"textAnchorForXAxisLabel",value:function textAnchorForXAxisLabel(){return this.textAnchorForAxisLabel(this.getXAxisLabelPosition(),!1)}},{key:"textAnchorForYAxisLabel",value:function textAnchorForYAxisLabel(){return this.textAnchorForAxisLabel(this.getYAxisLabelPosition())}},{key:"textAnchorForY2AxisLabel",value:function textAnchorForY2AxisLabel(){return this.textAnchorForAxisLabel(this.getY2AxisLabelPosition())}},{key:"getMaxTickWidth",value:function getMaxTickWidth(t,e){var a=this.owner,i=a.config,n=a.currentMaxTickWidths[t],r=0;if(e||!i["axis_".concat(t,"_show")])return n.size;if(a.svg){var o=/^y2?$/.test(t),s=a.filterTargetsToShow(a.data.targets),c=a[t].copy().domain(a["get".concat(o?"Y":"X","Domain")](s,t)),l=c.domain();if(La(n.domain)&&n.domain.every(function(t,e){return t===l[e]}))return n.size;n.domain=l;var u=this.getAxis(t,c,!1,!1,!0),d=i["axis_".concat(t,"_tick_count")];d&&u.tickValues(this.generateTickValues(l,d,o?a.isTimeSeriesY():a.isTimeSeries())),o||this.updateXAxisTickValues(s,u);var g=a.selectChart.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");u.create(g),g.selectAll("text").each(function(){r=Math.max(r,this.getBoundingClientRect().width)}),g.remove()}return 0<r&&(n.size=r),n.size}},{key:"updateLabels",value:function updateLabels(i){var n=this,t=this.owner,r={X:t.main.select(".".concat(M.axisX," .").concat(M.axisXLabel)),Y:t.main.select(".".concat(M.axisY," .").concat(M.axisYLabel)),Y2:t.main.select(".".concat(M.axisY2," .").concat(M.axisY2Label))};Object.keys(r).filter(function(t){return!r[t].empty()}).forEach(function(t){var e=r[t],a="".concat(t,"AxisLabel");(i?e.transition():e).attr("x",n["xFor".concat(a)].bind(n)).attr("dx",n["dxFor".concat(a)].bind(n)).attr("dy",n["dyFor".concat(a)].bind(n)).text(n["textFor".concat(a)].bind(n))})}},{key:"getPadding",value:function getPadding(t,e,a,i){var n=Ba(t)?t:t[e];return ya(n)?"ratio"===t.unit?t[e]*i:this.convertPixelsToAxisPadding(n,i):a}},{key:"convertPixelsToAxisPadding",value:function convertPixelsToAxisPadding(t,e){var a=this.owner;return e*(t/(a.config.axis_rotated?a.width:a.height))}},{key:"generateTickValues",value:function generateTickValues(t,e,a){var i,n,r,o,s,c,l=t;if(e){var u=za(e)?e():e;if(1===u)l=[t[0]];else if(2===u)l=[t[0],t[t.length-1]];else if(2<u){var d=this.owner.isCategorized();for(r=u-2,i=t[0],o=((n=t[t.length-1])-i)/(1+r),l=[i],s=0;s<r;s++)c=+i+o*(s+1),l.push(a?new Date(c):d?Math.round(c):c);l.push(n)}}return a||(l=l.sort(function(t,e){return t-e})),l}},{key:"generateTransitions",value:function generateTransitions(a){var i=this.owner.axes,t=_slicedToArray(["x","y","y2","subx"].map(function(t){var e=i[t];return e&&a&&(e=e.transition().duration(a)),e}),4);return{axisX:t[0],axisY:t[1],axisY2:t[2],axisSubX:t[3]}}},{key:"redraw",value:function redraw(a,t,i){var n=this.owner,r=t?"0":"1";["x","y","y2","subX"].forEach(function(t){var e=n["".concat(t,"Axis")];e&&(i||(e.config.withoutTransition=!n.config.transition_duration),n.axes[t.toLowerCase()].style("opacity",r),e.create(a["axis".concat(Za(t))]))}),this.updateAxes()}},{key:"redrawAxis",value:function redrawAxis(r,t,e,a,i){var o,s=this,c=this.owner,l=c.config,n=!!c.zoomScale;!n&&c.isCategorized()&&0===r.length&&c.x.domain([0,c.axes.x.selectAll(".tick").size()]),c.x&&r.length?(n||c.updateXDomain(r,t.UpdateXDomain,t.UpdateOrgXDomain,t.TrimXDomain),l.axis_x_tick_values||this.updateXAxisTickValues(r)):c.xAxis&&(c.xAxis.tickValues([]),c.subXAxis.tickValues([])),l.zoom_rescale&&!a&&(o=c.x.orgDomain()),["y","y2"].forEach(function(t){var e=c[t];if(e){var a=l["axis_".concat(t,"_tick_values")],i=l["axis_".concat(t,"_tick_count")];if(e.domain(c.getYDomain(r,t,o)),!a&&i){var n=e.domain();c["".concat(t,"Axis")].tickValues(s.generateTickValues(n,n.every(function(t){return 0===t})?1:i,c.isTimeSeriesY()))}}}),this.redraw(e,c.hasArcType(),i),this.updateLabels(t.Transition),(t.UpdateXDomain||t.UpdateXAxis||t.Y)&&r.length&&this.setCulling(),t.Y&&(c.subY&&c.subY.domain(c.getYDomain(r,"y")),c.subY2&&c.subY2.domain(c.getYDomain(r,"y2")))}},{key:"setCulling",value:function setCulling(){var u=this.owner,d=u.config;["subx","x","y","y2"].forEach(function(t){var e=u.axes[t],a="subx"===t?"x":t,i=d["axis_".concat(a,"_tick_culling")];if(e&&i){var n,r=e.selectAll(".tick text"),o=db(r.data()),s=o.length,c=d["axis_".concat(a,"_tick_culling_max")];if(s){for(var l=1;l<s;l++)if(s/l<c){n=l;break}r.each(function(t){this.style.display=o.indexOf(t)%n?"none":"block"})}else r.style("display","block")}})}}]),Axis}(),n=function(){function ChartInternal(t){_classCallCheck(this,ChartInternal);var e=this;e.api=t,e.config=e.getOptions(),e.data={},e.cache={},e.axes={},e.rendered=!1}return _createClass(ChartInternal,[{key:"beforeInit",value:function beforeInit(){this.callPluginHook("$beforeInit"),Pa(this.config.onbeforeinit,this,this.api)}},{key:"afterInit",value:function afterInit(){this.callPluginHook("$afterInit"),Pa(this.config.onafterinit,this,this.api)}},{key:"init",value:function init(){var t=this,e=t.config;t.initParams();var a={element:e.bindto,classname:"bb"};Ma(e.bindto)&&(a.element=e.bindto.element||"#chart",a.classname=e.bindto.classname||a.classname),t.selectChart=za(a.element.node)?e.bindto.element:Object(B.select)(a.element||[]),t.selectChart.empty()&&(t.selectChart=Object(B.select)(k.body.appendChild(k.createElement("div")))),t.selectChart.html("").classed(a.classname,!0),t.initToRender()}},{key:"initToRender",value:function initToRender(t){function Cl(){return"none"===i.style("display")||"hidden"===i.style("visibility")}var a=this,e=a.config,i=a.selectChart,n=e.render.lazy||Cl(),r=l.MutationObserver;if(n&&r&&!1!==e.render.observe&&!t&&new r(function(t,e){Cl()||(e.disconnect(),a.rendered||a.initToRender(!0))}).observe(i.node(),{attributes:!0,attributeFilter:["class","style"]}),!n||t){var o=a.convertData(e,a.initWithData);o&&a.initWithData(o)}}},{key:"initParams",value:function initParams(){var i=this,n=this,t=n.config,e=t.axis_rotated;n.datetimeId="bb-".concat(+new Date),n.initClip(),n.dragStart=null,n.dragging=!1,n.flowing=!1,n.cancelClick=!1,n.mouseover=!1,n.transiting=!1,n.color=n.generateColor(),n.levelColor=n.generateLevelColor(),n.point=n.generatePoint(),n.extraLineClasses=n.generateExtraLineClass(),n.dataTimeFormat=t.data_xLocaltime?o.timeParse:o.utcParse,n.axisTimeFormat=t.axis_x_localtime?o.timeFormat:o.utcFormat;var r=n.config.zoom_enabled&&"drag"===n.config.zoom_enabled.type;n.defaultAxisTimeFormat=function(t){var e=r?i.zoomScale:i.zoomScale&&n.x.orgDomain().toString()!==i.zoomScale.domain().toString(),a=(t.getMilliseconds()?".%L":t.getSeconds()&&".:%S")||t.getMinutes()&&"%I:%M"||t.getHours()&&"%I %p"||1!==t.getDate()&&"%b %d"||e&&1===t.getDate()&&"%b'%y"||t.getMonth()&&"%-m/%-d"||"%Y";return n.axisTimeFormat(a)(t)},n.hiddenTargetIds=[],n.hiddenLegendIds=[],n.focusedTargetIds=[],n.defocusedTargetIds=[],n.isLegendRight="right"===t.legend_position,n.isLegendInset="inset"===t.legend_position,n.isLegendTop="top-left"===t.legend_inset_anchor||"top-right"===t.legend_inset_anchor,n.isLegendLeft="top-left"===t.legend_inset_anchor||"bottom-left"===t.legend_inset_anchor,n.legendStep=0,n.legendItemWidth=0,n.legendItemHeight=0,n.currentMaxTickWidths={x:{size:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},n.rotated_padding_left=30,n.rotated_padding_right=e&&!t.axis_x_show?0:30,n.rotated_padding_top=5,n.withoutFadeIn={},n.inputType=n.convertInputType(),n.axes.subx=Object(B.selectAll)([])}},{key:"initWithData",value:function initWithData(t){var e=this,a=e.config;if(e.axis=new u(e),a.zoom_enabled&&e.initZoom(),e.data.xs={},e.data.targets=e.convertDataToTargets(t),a.data_filter&&(e.data.targets=e.data.targets.filter(a.data_filter)),a.data_hide&&e.addHiddenTargetIds(!0===a.data_hide?e.mapToIds(e.data.targets):a.data_hide),a.legend_hide&&e.addHiddenLegendIds(!0===a.legend_hide?e.mapToIds(e.data.targets):a.legend_hide),e.updateSizes(),e.updateScales(!0),e.x&&(e.x.domain(db(e.getXDomain(e.data.targets))),e.subX.domain(e.x.domain()),e.orgXDomain=e.x.domain()),e.y&&(e.y.domain(e.getYDomain(e.data.targets,"y")),e.subY.domain(e.y.domain())),e.y2&&(e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subY2&&e.subY2.domain(e.y2.domain())),e.svg=e.selectChart.append("svg").style("overflow","hidden").style("display","block"),a.interaction_enabled&&e.inputType){var i="touch"===e.inputType;e.svg.on(i?"touchstart":"mouseenter",function(){return Pa(a.onover,e,e.api)}).on(i?"touchend":"mouseleave",function(){return Pa(a.onout,e,e.api)})}a.svg_classname&&e.svg.attr("class",a.svg_classname),e.defs=e.svg.append("defs"),e.clipChart=e.appendClip(e.defs,e.clipId),e.clipXAxis=e.appendClip(e.defs,e.clipIdForXAxis),e.clipYAxis=e.appendClip(e.defs,e.clipIdForYAxis),e.clipGrid=e.appendClip(e.defs,e.clipIdForGrid),za(a.color_tiles)&&e.patterns&&e.patterns.forEach(function(t){return e.defs.append(function(){return t.node})}),e.updateSvgSize();var n=e.svg.append("g").attr("transform",e.getTranslate("main"));if(e.main=n,a.subchart_show&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),e.initTitle&&e.initTitle(),a.data_empty_label_text&&n.append("text").attr("class","".concat(M.text," ").concat(M.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),a.clipPath||e.axis.init(),n.append("g").attr("class",M.chart).attr("clip-path",e.clipPath),e.callPluginHook("$init"),e.initEventRect(),e.initChartElements(),e.initGrid(),n.insert("rect",a.zoom_privileged?null:"g.".concat(M.regions)).attr("class",M.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity","0").on("dblclick.zoom",null),a.clipPath&&e.axis.init(),e.updateTargets(e.data.targets),e.updateDimension(),Pa(a.oninit,e,e.api),e.setBackground(),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),a.data_onmin||a.data_onmax){var r=e.getMinMaxData();Pa(a.data_onmin,e,r.min),Pa(a.data_onmax,e,r.max)}e.bindResize(),e.api.element=e.selectChart.node(),e.rendered=!0}},{key:"initChartElements",value:function initChartElements(){var e=this;["Bar","Radar","Line","Bubble","Arc","Gauge","Pie"].forEach(function(t){e["init".concat(t)]()}),Ka(e.config.data_labels)&&e.initText()}},{key:"setChartElements",value:function setChartElements(){var t=this;t.api.$={chart:t.selectChart,svg:t.svg,defs:t.defs,main:t.main,tooltip:t.tooltip,legend:t.legend,title:t.title,grid:t.grid,arc:t.arcs,bar:{bars:t.mainBar},line:{lines:t.mainLine,areas:t.mainArea,circles:t.mainCircle},text:{texts:t.mainText}}}},{key:"setBackground",value:function setBackground(){var t=this.config.background;if(Ka(t)){var e=this.svg.select(".".concat(M[this.hasArcType()?"chart":"regions"])).insert(t.imgUrl?"image":"rect",":first-child");t.imgUrl?e.attr("href",t.imgUrl):t.color&&e.style("fill",t.color),e.attr("class",t.class||null).attr("width","100%").attr("height","100%")}}},{key:"smoothLines",value:function smoothLines(t,e){"grid"===e&&t.each(function(){var e=Object(B.select)(this),t=_slicedToArray(["x1","x2","y1","y2"].map(function(t){return Math.ceil(e.attr(t))}),4),a=t[0],i=t[1],n=t[2],r=t[3];e.attr({x1:a,x2:i,y1:n,y2:r})})}},{key:"updateSizes",value:function updateSizes(t){var e=this,a=e.config,i=a.axis_rotated,n=e.hasArcType(),r={width:e.legend?e.getLegendWidth():0,height:e.legend?e.getLegendHeight():0},o=e.isLegendRight||e.isLegendInset?0:r.height,s=i||n?0:e.getHorizontalAxisHeight("x"),c=a.subchart_axis_x_show&&a.subchart_axis_x_tick_text_show?s:30,l=a.subchart_show&&!n?a.subchart_size_height+c:0;t||e.setContainerSize(),e.margin=i?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:n?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+o+e.getCurrentPaddingBottom(),left:l+(n?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:n?0:e.getCurrentPaddingRight(),bottom:s+l+o+e.getCurrentPaddingBottom(),left:n?0:e.getCurrentPaddingLeft()},e.margin2=i?{top:e.margin.top,right:NaN,bottom:20+o,left:e.rotated_padding_left}:{top:e.currentHeight-l-o,right:NaN,bottom:c+o,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(r),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=i?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=i?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?r.width+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!a.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&n&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)}},{key:"updateTargets",value:function updateTargets(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType(t)&&(e.hasType("radar")?e.updateTargetsForRadar(t):e.updateTargetsForArc(t)),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()}},{key:"showTargets",value:function showTargets(){var e=this;e.svg.selectAll(".".concat(M.target)).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity","1")}},{key:"getWithOption",value:function getWithOption(a){var i={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(i).forEach(function(t){var e=i[t];Aa(e)&&(e=i[e]),i[t]=Na(a,"with".concat(t),e)}),i}},{key:"redraw",value:function redraw(t,e){var a=0<arguments.length&&void 0!==t?t:{},i=1<arguments.length?e:void 0,n=this,r=n.main,o=n.config,s=n.filterTargetsToShow(n.data.targets),c=a.initializing,l=a.flow,u=n.getWithOption(a),d=u.Transition?o.transition_duration:0,g=u.TransitionForExit?d:0,h=u.TransitionForAxis?d:0,f=i||n.axis.generateTransitions(h);c&&o.tooltip_init_show||"touch"!==n.inputType||n.hideTooltip(),n.updateSizes(c),u.Legend&&o.legend_show?n.updateLegend(n.mapToIds(n.data.targets),a,f):u.Dimension&&n.updateDimension(!0),n.axis.redrawAxis(s,u,f,l,c),n.updateCircleY(),n.updateXgridFocus(),o.data_empty_label_text&&r.select("text.".concat(M.text,".").concat(M.empty)).attr("x",n.width/2).attr("y",n.height/2).text(o.data_empty_label_text).style("display",s.length?"none":null),n.updateGrid(d),n.updateRegion(d),n.updateBar(g),n.updateLine(g),n.updateArea(g),n.updateCircle(),n.hasDataLabel()&&n.updateText(g),n.redrawTitle&&n.redrawTitle(),n.arcs&&n.redrawArc(d,g,u.Transform),n.radars&&n.redrawRadar(d,g),n.mainText&&r.selectAll(".".concat(M.selectedCircles)).filter(n.isBarType.bind(n)).selectAll("circle").remove(),o.interaction_enabled&&!l&&u.EventRect&&n.bindZoomEvent(),c&&n.setChartElements(),n.generateRedrawList(s,l,d,u.Subchart),n.callPluginHook("$redraw",a,d)}},{key:"generateRedrawList",value:function generateRedrawList(t,e,a,i){var n=this,r=n.config,o=n.getDrawShape();r.subchart_show&&n.redrawSubchart(i,a,o);var s=e&&n.generateFlow({targets:t,flow:e,duration:e.duration,shape:o,xv:n.xv.bind(n)}),c=(a||s)&&n.isTabVisible(),l=n.getRedrawList(o,e,s,c),u=e||r.onrendered?function(){s&&s(),Pa(r.onrendered,n,n.api)}:null;if(u)if(c){var d=n.generateWait();Object(P.transition)().duration(a).each(function(){l.reduce(function(t,e){return t.concat(e)},[]).forEach(function(t){return d.add(t)})}).call(d,u)}else u();n.mapToIds(n.data.targets).forEach(function(t){n.withoutFadeIn[t]=!0})}},{key:"getDrawShape",value:function getDrawShape(){var t=this,e=t.config.axis_rotated,a=t.hasType("radar"),i={type:{},indices:{}};if(t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")){var n=t.getShapeIndices(t.isLineType);if(i.indices.line=n,i.type.line=t.generateDrawLine?t.generateDrawLine(n,!1):void 0,t.hasTypeOf("Area")){var r=t.getShapeIndices(t.isAreaType);i.indices.area=r,i.type.area=t.generateDrawArea?t.generateDrawArea(r,!1):void 0}}if(t.hasType("bar")){var o=t.getShapeIndices(t.isBarType);i.indices.bar=o,i.type.bar=t.generateDrawBar?t.generateDrawBar(o):void 0}return i.pos={xForText:t.generateXYForText(i.indices,!0),yForText:t.generateXYForText(i.indices,!1),cx:(a?t.radarCircleX:e?t.circleY:t.circleX).bind(t),cy:(a?t.radarCircleY:e?t.circleX:t.circleY).bind(t)},i}},{key:"getRedrawList",value:function getRedrawList(t,e,a,i){var n=this,r=n.config,o=n.hasArcType(),s=t.pos,c=s.cx,l=s.cy,u=s.xForText,d=s.yForText,g=[];if(!o){var h=t.type,f=h.area,p=h.bar,x=h.line;(r.grid_x_lines.length||r.grid_y_lines.length)&&g.push(n.redrawGrid(i)),r.regions.length&&g.push(n.redrawRegion(i)),n.hasTypeOf("Line")&&(g.push(n.redrawLine(x,i)),n.hasTypeOf("Area")&&g.push(n.redrawArea(f,i))),n.hasType("bar")&&g.push(n.redrawBar(p,i)),Ka(r.data_labels)&&g.push(n.redrawText(u,d,e,i))}return o&&!n.hasType("radar")||g.push(n.redrawCircle(c,l,i,a)),g}},{key:"updateAndRedraw",value:function updateAndRedraw(t){var e,a=0<arguments.length&&void 0!==t?t:{},i=this,n=i.config;a.withTransition=Na(a,"withTransition",!0),a.withTransform=Na(a,"withTransform",!1),a.withLegend=Na(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=Na(a,"withTransitionForTransform",a.withTransition),a.withLegend&&n.legend_show||(e=i.axis.generateTransitions(a.withTransitionForAxis?n.transition_duration:0),i.updateScales(),i.updateSvgSize(),i.transformAll(a.withTransitionForTransform,e)),i.redraw(a,e)}},{key:"redrawWithoutRescale",value:function redrawWithoutRescale(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}},{key:"isTimeSeries",value:function isTimeSeries(){return"timeseries"===this.config.axis_x_type}},{key:"isCategorized",value:function isCategorized(){return 0<=this.config.axis_x_type.indexOf("category")||this.hasType("radar")}},{key:"isCustomX",value:function isCustomX(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||Ka(t.data_xs))}},{key:"isTimeSeriesY",value:function isTimeSeriesY(){return"timeseries"===this.config.axis_y_type}},{key:"getTranslate",value:function getTranslate(t,e){var a,i,n=1<arguments.length&&void 0!==e?e:0,r=this,o=r.config.axis_rotated,s=0;if(n&&/^(x|y2?)$/.test(t)&&(s=r.getAxisSize(t)*n),"main"===t)a=Ga(r.margin.left),i=Ga(r.margin.top);else if("context"===t)a=Ga(r.margin2.left),i=Ga(r.margin2.top);else if("legend"===t)a=r.margin3.left,i=r.margin3.top+(r.hasType("gauge")?10:0);else if("x"===t)a=o?-s:0,i=o?0:r.height+s;else if("y"===t)a=o?0:-s,i=o?r.height+s:0;else if("y2"===t)a=o?0:r.width+s,i=o?1-s:0;else if("subx"===t)a=0,i=o?0:r.height2;else if("arc"===t)a=r.arcWidth/2,i=r.arcHeight/2;else if("radar"===t){var c=_slicedToArray(r.getRadarSize(),1)[0];a=r.width/2-c,i=Ga(r.margin.top)}return"translate(".concat(a,", ").concat(i,")")}},{key:"initialOpacity",value:function initialOpacity(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?"1":"0"}},{key:"initialOpacityForCircle",value:function initialOpacityForCircle(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):"0"}},{key:"opacityForCircle",value:function opacityForCircle(t){var e=this.config.point_show?"1":"0";return ya(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":e:"0"}},{key:"opacityForText",value:function opacityForText(){return this.hasDataLabel()?"1":"0"}},{key:"xx",value:function xx(t){var e=this.config.zoom_enabled&&this.zoomScale?this.zoomScale:this.x;return t?e(t.x):null}},{key:"xv",value:function xv(t){var e=this,a=e.getBaseValue(t);return e.isTimeSeries()?a=e.parseDate(a):e.isCategorized()&&Aa(a)&&(a=e.config.axis_x_categories.indexOf(a)),Math.ceil(e.x(a))}},{key:"yv",value:function yv(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(this.getBaseValue(t)))}},{key:"subxx",value:function subxx(t){return t?this.subX(t.x):null}},{key:"transformMain",value:function transformMain(t,e){var a,i,n,r=this;e&&e.axisX?a=e.axisX:(a=r.main.select(".".concat(M.axisX)),t&&(a=a.transition())),e&&e.axisY?i=e.axisY:(i=r.main.select(".".concat(M.axisY)),t&&(i=i.transition())),e&&e.axisY2?n=e.axisY2:(n=r.main.select(".".concat(M.axisY2)),t&&(n=n.transition())),(t?r.main.transition():r.main).attr("transform",r.getTranslate("main")),a.attr("transform",r.getTranslate("x")),i.attr("transform",r.getTranslate("y")),n.attr("transform",r.getTranslate("y2")),r.main.select(".".concat(M.chartArcs)).attr("transform",r.getTranslate("arc"))}},{key:"transformAll",value:function transformAll(t,e){var a=this;a.transformMain(t,e),a.config.subchart_show&&a.transformContext(t,e),a.legend&&a.transformLegend(t)}},{key:"updateSvgSize",value:function updateSvgSize(){var t=this,e=t.svg.select(".".concat(M.brush," .overlay")),a={width:0,height:0};e.size()&&(a.width=+e.attr("width"),a.height=+e.attr("height")),t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#".concat(t.clipId),"#".concat(t.clipIdForGrid)]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#".concat(t.clipIdForXAxis)).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForYAxis)).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForSubchart)).select("rect").attr("width",t.width).attr("height",a.height),t.svg.select(".".concat(M.zoomRect)).attr("width",t.width).attr("height",t.height)}},{key:"updateDimension",value:function updateDimension(t){var e=this;t||(e.xAxis&&e.config.axis_rotated?(e.xAxis.create(e.axes.x),e.subXAxis.create(e.axes.subx)):(e.yAxis&&e.yAxis.create(e.axes.y),e.y2Axis&&e.y2Axis.create(e.axes.y2))),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)}},{key:"bindResize",value:function bindResize(){var t=this,e=t.config;t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){return Pa(e.onresize,t,t.api)}),e.resize_auto&&t.resizeFunction.add(function(){t.resizeTimeout&&(l.clearTimeout(t.resizeTimeout),t.resizeTimeout=null),t.resizeTimeout=l.setTimeout(function(){t.api.flush(!1,!0)},200)}),t.resizeFunction.add(function(){return Pa(e.onresized,t,t.api)}),l.addEventListener("resize",t.resizeFunction)}},{key:"generateResize",value:function generateResize(){function callResizeFunctions(){e.forEach(function(t){return t()})}var e=[];return callResizeFunctions.add=function(t){return e.push(t)},callResizeFunctions.remove=function(t){return e.splice(e.indexOf(t),1)},callResizeFunctions}},{key:"endall",value:function endall(t,i){var n=0;t.each(function(){return++n}).on("end",function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];--n||i.apply.apply(i,[this].concat(e))})}},{key:"generateWait",value:function generateWait(){function Ho(t,i){var n;!function loop(){for(var t,e=0,a=0;t=r[a];a++)if(t.empty())e++;else try{t.transition()}catch(t){e++}n&&clearTimeout(n),e===r.length?i&&i():n=setTimeout(loop,50)}()}var r=[];return Ho.add=function(t){La(t)?r=r.concat(t):r.push(t)},Ho}},{key:"parseDate",value:function parseDate(t){var e;return t instanceof Date?e=t:Aa(t)?e=this.dataTimeFormat(this.config.data_xFormat)(t):Ba(t)&&!isNaN(t)&&(e=new Date(+t)),(!e||isNaN(+e))&&console&&console.error&&console.error("Failed to parse x '".concat(t,"' to Date object")),e}},{key:"isTabVisible",value:function isTabVisible(){return!k.hidden}},{key:"convertInputType",value:function convertInputType(){var t=this.config,e=!1;if(/Mobi/.test(l.navigator.userAgent)&&t.interaction_inputType_touch){var a=l.navigator&&"maxTouchPoints"in l.navigator&&0<l.navigator.maxTouchPoints,i="ontouchmove"in l||l.DocumentTouch&&k instanceof l.DocumentTouch;e=a||i}return(t.interaction_inputType_mouse&&!e&&"onmouseover"in l?"mouse":e&&"touch")||null}},{key:"callPluginHook",value:function callPluginHook(e){for(var a=this,t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.config.plugins.forEach(function(t){"$beforeInit"===e&&(t.$$=a).api.plugins.push(t),t[e].apply(t,i)})}}]),ChartInternal}();Ya(n.prototype,{getOptions:function getOptions(){return new qb},loadConfig:function loadConfig(e){var a,i,n,r=this.config,o=function(){var t=i.shift();return t&&a&&Ia(a)&&t in a?(a=a[t],o()):t?void 0:a};Object.keys(r).forEach(function(t){a=e,i=t.split("_"),n=o(),Da(n)&&(r[t]=n)})}}),Ya(n.prototype,{getScale:function getScale(t,e,a){return(a?Object(d.scaleTime)():Object(d.scaleLinear)()).range([t,e])},getX:function getX(t,e,a,i){var n=this.zoomScale||this.getScale(t,e,this.isTimeSeries());return this.getCustomizedScale(a?n.domain(a):n,i)},getY:function getY(t,e,a){var i=this.getScale(t,e,this.isTimeSeriesY());return a&&i.domain(a),i},getCustomizedScale:function getCustomizedScale(i,t){function Kp(t,e){var a=i(t)+n();return e?a:Math.ceil(a)}var e=this,n=t||function(){return e.xAxis.tickOffset()};for(var a in i)Kp[a]=i[a];return Kp.orgDomain=function(){return i.domain()},Kp.orgScale=function(){return i},e.isCategorized()&&(Kp.domain=function(t){var e=t;return arguments.length?(i.domain(e),Kp):[(e=this.orgDomain())[0],e[1]+1]}),Kp},getYScale:function getYScale(t){return"y2"===this.axis.getId(t)?this.y2:this.y},getSubYScale:function getSubYScale(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},updateScales:function updateScales(t,e){var a=!(1<arguments.length&&void 0!==e)||e,i=this,n=i.config,r=n.axis_rotated;i.xMin=r?1:0,i.xMax=r?i.height:i.width,i.yMin=r?0:i.height,i.yMax=r?i.width:1,i.subXMin=i.xMin,i.subXMax=i.xMax,i.subYMin=r?0:i.height2,i.subYMax=r?i.width2:1;var o=a&&i.x&&i.x.orgDomain(),s=a&&i.orgXDomain;i.x=i.getX(i.xMin,i.xMax,o,function(){return i.xAxis.tickOffset()}),i.subX=i.getX(i.xMin,i.xMax,s,function(t){return t%1?0:i.subXAxis.tickOffset()}),i.xAxisTickFormat=i.axis.getXAxisTickFormat(),i.xAxisTickValues=i.axis.getTickValues("x"),i.xAxis=i.axis.getAxis("x",i.x,n.axis_x_tick_outer,t),i.subXAxis=i.axis.getAxis("subX",i.subX,n.axis_x_tick_outer,t),i.y=i.getY(i.yMin,i.yMax,i.y?i.y.domain():n.axis_y_default),i.subY=i.getY(i.subYMin,i.subYMax,i.subY?i.subY.domain():n.axis_y_default),i.yAxisTickValues=i.axis.getTickValues("y"),i.yAxis=i.axis.getAxis("y",i.y,n.axis_y_tick_outer,t),n.axis_y2_show&&(i.y2=i.getY(i.yMin,i.yMax,i.y2?i.y2.domain():n.axis_y2_default),i.subY2=i.getY(i.subYMin,i.subYMax,i.subY2?i.subY2.domain():n.axis_y2_default),i.y2AxisTickValues=i.axis.getTickValues("y2"),i.y2Axis=i.axis.getAxis("y2",i.y2,n.axis_y2_tick_outer,t)),i.updateArc&&i.updateArc()}}),Ya(n.prototype,{getYDomainMinMax:function getYDomainMinMax(a,e){var l=this,t=l.config,u="min"===e,i=t.data_groups,d=l.mapToIds(a),g=l.getValuesAsIdKeyed(a);return 0<i.length&&function(){for(var s,c=l["has".concat(u?"Negative":"Positive","ValueInTargets")](a),t=function(t,e){if(0===(e=e.filter(function(t){return 0<=d.indexOf(t)})).length)return s=e,"continue";var n=e[0],r=l.axis.getId(n);c&&g[n]&&(g[n]=g[n].map(function(t){return(u?t<0:0<t)?t:0}));for(var a,i=function(t,e){if(!g[e])return"continue";var i=l.axis.getId(e);g[e].forEach(function(t,e){var a=+t;i!==r||c&&(u?0<a:a<0)||(g[n][e]+=a)})},o=1;a=e[o];o++)i(0,a);s=e},e=0;s=i[e];e++)t(0,s)}(),eb(e,Object.keys(g).map(function(t){return eb(e,g[t])}))},getYDomainMin:function getYDomainMin(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function getYDomainMax(t){return this.getYDomainMinMax(t,"max")},getYDomain:function getYDomain(t,e,a){var i=this,n=i.config;if(i.isStackNormalized())return[0,100];var r=t.filter(function(t){return i.axis.getId(t.id)===e}),o=a?i.filterByXDomain(r,a):r,s=n["axis_".concat(e,"_min")],c=n["axis_".concat(e,"_max")],l=i.getYDomainMin(o),u=i.getYDomainMax(o),d=n["axis_".concat(e,"_center")],g=i.hasType("bar",o)&&n.bar_zerobased||i.hasType("area",o)&&n.area_zerobased,h=n["axis_".concat(e,"_inverted")],f=i.hasDataLabel()&&n.axis_rotated,p=i.hasDataLabel()&&!n.axis_rotated;if(l=ya(s)?s:ya(c)?l<c?l:c-10:l,u=ya(c)?c:ya(s)?s<u?u:s+10:u,0===o.length)return i[e].domain();isNaN(l)&&(l=0),isNaN(u)&&(u=l),l===u&&(l<0?u=0:l=0);var x=0<=l&&0<=u,v=l<=0&&u<=0;(ya(s)&&x||ya(c)&&v)&&(g=!1),g&&(x&&(l=0),v&&(u=0));var m=Math.abs(u-l),_={top:.1*m,bottom:.1*m};if(Da(d)){var y=Math.max(Math.abs(l),Math.abs(u));u=d+y,l=d-y}if(f){var b=Ha(i.y.range()),T=i.getDataLabelLength(l,u,"width").map(function(t){return t/b});["bottom","top"].forEach(function(t,e){_[t]+=m*(T[e]/(1-T[0]-T[1]))})}else if(p){var A=i.getDataLabelLength(l,u,"height");["bottom","top"].forEach(function(t,e){_[t]+=i.axis.convertPixelsToAxisPadding(A[e],m)})}if(/^y2?$/.test(e)){var w=n["axis_".concat(e,"_padding")];Ka(w)&&["bottom","top"].forEach(function(t){_[t]=i.axis.getPadding(w,t,_[t],m)})}g&&(x&&(_.bottom=l),v&&(_.top=-u));var L=[l-_.bottom,u+_.top];return h?L.reverse():L},getXDomainMinMax:function getXDomainMinMax(t,e){var a=this.config["axis_x_".concat(e)];return Da(a)?this.isTimeSeries()?this.parseDate(a):a:eb(e,t.map(function(t){return eb(e,t.values.map(function(t){return t.x}))}))},getXDomainMin:function getXDomainMin(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function getXDomainMax(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function getXDomainPadding(t){var e,a,i=this.config,n=t[1]-t[0],r=i.axis_x_padding,o=a=this.isCategorized()?0:this.hasType("bar")?1<(e=this.getMaxDataCount())?n/(e-1)/2:.5:.01*n,s=a;return Ma(r)&&Ka(r)?(o=ya(r.left)?r.left:a,s=ya(r.right)?r.right:a):Ba(i.axis_x_padding)&&(s=o=r),{left:o,right:s}},getXDomain:function getXDomain(t){var e=this,a=[e.getXDomainMin(t),e.getXDomainMax(t)],i=a[0],n=a[1],r=e.getXDomainPadding(a),o=0,s=0;return i-n!=0||e.isCategorized()||(n=e.isTimeSeries()?(i=new Date(.5*i.getTime()),new Date(1.5*n.getTime())):(i=0===i?1:.5*i,0===n?-1:1.5*n)),!i&&0!==i||(o=e.isTimeSeries()?new Date(i.getTime()-r.left):i-r.left),!n&&0!==n||(s=e.isTimeSeries()?new Date(n.getTime()+r.right):n+r.right),[o,s]},updateXDomain:function updateXDomain(t,e,a,i,n){var r=this,o=r.config.zoom_enabled;if(a&&(r.x.domain(n||db(r.getXDomain(t))),r.orgXDomain=r.x.domain(),o&&r.zoom.updateScaleExtent(),r.subX.domain(r.x.domain()),r.brush&&r.brush.scale(r.subX)),e){var s=n||!r.brush||Xa(r)?r.orgXDomain:Ua(r).map(r.subX.invert);r.x.domain(s),o&&r.zoom.updateScaleExtent()}return i&&r.x.domain(r.trimXDomain(r.x.orgDomain())),r.x.domain()},trimXDomain:function trimXDomain(t){var e=_slicedToArray(this.getZoomDomain(),2),a=e[0],i=e[1];return t[0]<=a&&(t[1]=+t[1]+(a-t[0]),t[0]=a),i<=t[1]&&(t[0]=t[0]-(t[1]-i),t[1]=i),t}}),Ya(n.prototype,{isX:function isX(t){var e=this.config,a=e.data_x&&t===e.data_x,i=Ka(e.data_xs)&&function(e,a){var i=!1;return Object.keys(e).forEach(function(t){return e[t]===a&&(i=!0)}),i}(e.data_xs,t);return a||i},isNotX:function isNotX(t){return!this.isX(t)},isStackNormalized:function isStackNormalized(){var t=this.config;return t.data_stack_normalize&&t.data_groups.length},isGrouped:function isGrouped(e){return this.config.data_groups.map(function(t){return 0<=t.indexOf(e)})[0]},getXKey:function getXKey(t){var e=this.config;return e.data_x?e.data_x:Ka(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function getXValuesOfXKey(e,t){var a,i=this;return(t&&Ka(t)?i.mapToIds(t):[]).forEach(function(t){i.getXKey(t)===e&&(a=i.data.xs[t])}),a},getIndexByX:function getIndexByX(t,e){return e?e.indexOf(Aa(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function getXValue(t,e){return t in this.data.xs&&this.data.xs[t]&&ya(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function getOtherTargetXs(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function getOtherTargetX(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function addXs(e){var a=this;Object.keys(e).forEach(function(t){a.config.data_xs[t]=e[t]})},isMultipleX:function isMultipleX(){return Ka(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function addName(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0===e?t.id:e),t},getAllValuesOnIndex:function getAllValuesOnIndex(e){var a=this;return a.filterTargetsToShow(a.data.targets).map(function(t){return a.addName(a.getValueOnIndex(t.values,e))})},getValueOnIndex:function getValueOnIndex(t,e){var a=t.filter(function(t){return t.index===e});return a.length?a[0]:null},updateTargetX:function updateTargetX(t,i){var n=this;t.forEach(function(a){a.values.forEach(function(t,e){t.x=n.generateTargetX(i[e],a.id,e)}),n.data.xs[a.id]=i})},updateTargetXs:function updateTargetXs(t,e){var a=this;t.forEach(function(t){e[t.id]&&a.updateTargetX([t],e[t.id])})},generateTargetX:function generateTargetX(t,e,a){var i=this,n=i.isCategorized()?a:t||a;return i.isTimeSeries()?n=t?i.parseDate(t):i.parseDate(i.getXValue(e,a)):i.isCustomX()&&!i.isCategorized()&&(n=ya(t)?+t:i.getXValue(e,a)),n},cloneTarget:function cloneTarget(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},updateXs:function updateXs(t){t.length&&(this.xs=t.map(function(t){return t.x}))},getPrevX:function getPrevX(t){var e=this.xs[t-1];return Da(e)?e:null},getNextX:function getNextX(t){var e=this.xs[t+1];return Da(e)?e:null},getBaseValue:function getBaseValue(t){var e=t.value;return e&&(this.isAreaRangeType(t)?e=this.getAreaRangeData(t,"mid"):this.isBubbleZType(t)&&(e=this.getBubbleZData(e,"y"))),e},getMinMaxValue:function getMinMaxValue(t){var i,n,r=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return t.values})).forEach(function(t,e){var a=t.map(r).filter(Ba);i=Math.min.apply(Math,[e?i:1/0].concat(_toConsumableArray(a))),n=Math.max.apply(Math,[e?n:-1/0].concat(_toConsumableArray(a)))}),{min:i,max:n}},getMinMaxData:function getMinMaxData(){var i=this,t="$minMaxData",e=i.getCache(t);if(!e){var a=i.data.targets.map(function(t){return t.values}),n=i.getMinMaxValue(a),r=[],o=[];a.forEach(function(t){var e=i.getFilteredDataByValue(t,n.min),a=i.getFilteredDataByValue(t,n.max);e.length&&(r=r.concat(e)),a.length&&(o=o.concat(a))}),i.addCache(t,e={min:r,max:o})}return e},getTotalPerIndex:function getTotalPerIndex(){var a=this.getCache("$totalPerIndex");return this.isStackNormalized()&&!a&&(a=[],this.data.targets.forEach(function(t){t.values.forEach(function(t,e){a[e]||(a[e]=0),a[e]+=Ba(t.value)?t.value:0})})),a},getTotalDataSum:function getTotalDataSum(){var t="$totalDataSum",e=this.getCache(t);if(!e){var a=bb(this.data.targets.map(function(t){return t.values})).map(function(t){return t.value}).reduce(function(t,e){return t+e});this.addCache(t,e=a)}return e},getFilteredDataByValue:function getFilteredDataByValue(t,e){var a=this;return t.filter(function(t){return a.getBaseValue(t)===e})},getMaxDataCount:function getMaxDataCount(){return Math.max.apply(Math,_toConsumableArray(this.data.targets.map(function(t){return t.values.length})))},getMaxDataCountTarget:function getMaxDataCountTarget(){var t=this.filterTargetsToShow()||[],e=t.length;return 1<e?(t=t.map(function(t){return t.values}).reduce(function(t,e){return t.concat(e)}).map(function(t){return t.x}),t=db(ab(t)).map(function(t,e){return{x:t,index:e}})):e&&(t=t[0].values),t},mapToIds:function mapToIds(t){return t.map(function(t){return t.id})},mapToTargetIds:function mapToTargetIds(t){return t?La(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function hasTarget(t,e){for(var a,i=this.mapToIds(t),n=0;a=i[n];n++)if(a===e)return!0;return!1},isTargetToShow:function isTargetToShow(t){return this.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function isLegendToShow(t){return this.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function filterTargetsToShow(t){var e=this;return(t||e.data.targets).filter(function(t){return e.isTargetToShow(t.id)})},mapTargetsToUniqueXs:function mapTargetsToUniqueXs(t){var e=[];return t&&t.length&&(e=ab(bb(t.map(function(t){return t.values.map(function(t){return+t.x})}))),e=this.isTimeSeries()?e.map(function(t){return new Date(+t)}):e.map(function(t){return+t})),db(e)},addHiddenTargetIds:function addHiddenTargetIds(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function removeHiddenTargetIds(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},addHiddenLegendIds:function addHiddenLegendIds(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function removeHiddenLegendIds(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},getValuesAsIdKeyed:function getValuesAsIdKeyed(t){var i=this,e={},n=i.isMultipleX(),r=n?i.mapTargetsToUniqueXs(t).map(function(t){return Aa(t)?t:+t}):null;return t.forEach(function(t){var a=[];t.values.forEach(function(t){var e=t.value;La(e)?a.push.apply(a,_toConsumableArray(e)):Ma(e)&&"high"in e?a.push.apply(a,_toConsumableArray(Object.values(e))):i.isBubbleZType(t)?a.push(i.getBubbleZData(e,"y")):n?a[i.getIndexByX(t.x,r)]=e:a.push(e)}),e[t.id]=a}),e},checkValueInTargets:function checkValueInTargets(t,e){for(var a,i=Object.keys(t),n=0;n<i.length;n++){a=t[i[n]].values;for(var r=0;r<a.length;r++)if(e(a[r].value))return!0}return!1},hasMultiTargets:function hasMultiTargets(){return 1<this.filterTargetsToShow().length},hasNegativeValueInTargets:function hasNegativeValueInTargets(t){return this.checkValueInTargets(t,function(t){return t<0})},hasPositiveValueInTargets:function hasPositiveValueInTargets(t){return this.checkValueInTargets(t,function(t){return 0<t})},_checkOrder:function _checkOrder(t){var e=this.config.data_order;return Aa(e)&&e.toLowerCase()===t},isOrderDesc:function isOrderDesc(){return this._checkOrder("desc")},isOrderAsc:function isOrderAsc(){return this._checkOrder("asc")},orderTargets:function orderTargets(t){var e=this.config,a=_toConsumableArray(t),n=this.isOrderAsc(),i=this.isOrderDesc();return n||i?a.sort(function(t,e){function fv(t,e){return t+Math.abs(e.value)}var a=t.values.reduce(fv,0),i=e.values.reduce(fv,0);return n?i-a:a-i}):za(e.data_order)&&a.sort(e.data_order),a},filterByX:function filterByX(t,e){return bb(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},filterRemoveNull:function filterRemoveNull(t){var e=this;return t.filter(function(t){return ya(e.getBaseValue(t))})},filterByXDomain:function filterByXDomain(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},hasDataLabel:function hasDataLabel(){var t=this.config.data_labels;return Ea(t)&&t||Ia(t)&&Ka(t)},getDataLabelLength:function getDataLabelLength(t,e,a){var i=this,n=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){n[e]=1.3*this.getBoundingClientRect()[a]}).remove(),n},isNoneArc:function isNoneArc(t){return this.hasTarget(this.data.targets,t.id)},isArc:function isArc(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function findSameXOfValues(t,e){var a,i=t[e].x,n=[];for(a=e-1;0<=a&&i===t[a].x;a--)n.push(t[a]);for(a=e;a<t.length&&i===t[a].x;a++)n.push(t[a]);return n},findClosestFromTargets:function findClosestFromTargets(t,e){var a=this,i=t.map(function(t){return a.findClosest(t.values,e)});return a.findClosest(i,e)},findClosest:function findClosest(t,a){var i,n=this,r=n.config.point_sensitivity;return t.filter(function(t){return t&&n.isBarType(t.id)}).forEach(function(t){var e=n.main.select(".".concat(M.bars).concat(n.getTargetSelectorSuffix(t.id)," .").concat(M.bar,"-").concat(t.index)).node();!i&&n.isWithinBar(e)&&(i=t)}),t.filter(function(t){return t&&!n.isBarType(t.id)}).forEach(function(t){var e=n.dist(t,a);e<r&&(r=e,i=t)}),i},dist:function dist(t,e){var a=this.config.axis_rotated,i=a?1:0,n=a?0:1,r=this.circleY(t,t.index),o=(this.zoomScale||this.x)(t.x);return Math.sqrt(Math.pow(o-e[i],2)+Math.pow(r-e[n],2))},convertValuesToStep:function convertValuesToStep(t){var e=this.config,a=e.axis_rotated,i=e.line_step_type,n=this.isCategorized(),r=La(t)?t.concat():[t];if(!a&&!n)return t;var o=r[0].id,s=r[0].x-1,c=r[0].value;return n&&r.unshift({x:s,value:c,id:o}),"step-after"===i&&r.unshift({x:s-1,value:c,id:o}),c=r[(s=r.length)-1].value,n&&r.push({x:s,value:c,id:o}),"step-before"===i&&r.push({x:s+1,value:c,id:o}),r},convertValuesToRange:function convertValuesToRange(t){var e=La(t)?t.concat():[t],i=[];return e.forEach(function(t){var e=t.x,a=t.id;i.push({x:e,id:a,value:t.value[0]}),i.push({x:e,id:a,value:t.value[2]})}),i},updateDataAttributes:function updateDataAttributes(t,e){var a=this.config["data_".concat(t)];return Ca(e)||(Object.keys(e).forEach(function(t){a[t]=e[t]}),this.redraw({withLegend:!0})),a},getAreaRangeData:function getAreaRangeData(t,e){var a=t.value;if(La(a)){var i=["high","mid","low"].indexOf(e);return-1===i?null:a[i]}return a[e]},getRatio:function getRatio(t,e,a){var i=this,n=i.config,r=i.api,o=0;if(e&&r.data.shown.call(r).length){var s=r.data.values.bind(r);if(o=e.ratio||e.value,"arc"===t)if(i.pie.padAngle()()){var c=i.getTotalDataSum();i.hiddenTargetIds.length&&(c-=s(i.hiddenTargetIds).reduce(function(t,e){return t+e})),o=e.value/c}else o=(e.endAngle-e.startAngle)/(Math.PI*(i.hasType("gauge")&&!n.gauge_fullCircle?1:2));else if("index"===t){var l=this.getTotalPerIndex();if(i.hiddenTargetIds.length){var u=s(i.hiddenTargetIds,!1);u.length&&(u=u.reduce(function(t,a){return t.map(function(t,e){return(Ba(t)?t:0)+a[e]})}),l=l.map(function(t,e){return t-u[e]}))}e.ratio=Ba(e.value)&&l&&0<l[e.index]?e.value/l[e.index]:0,o=e.ratio}else"radar"===t&&(o=parseFloat(Math.max(e.value,0))/i.maxValue*n.radar_size_ratio)}return a&&o?100*o:o},updateDataIndexByX:function updateDataIndexByX(t){var i=t.reduce(function(t,e,a){return t[+e.x]=a,t},{});this.data.targets.forEach(function(t){t.values.forEach(function(t,e){var a=i[+t.x];void 0===a&&(a=e),t.index=a})})}});var r=a(8);Ya(n.prototype,{convertData:function convertData(a,t){var i;if(a.bindto?(i={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(t){var e="data_".concat(t);e in a&&(i[t]=a[e])})):i=a,i.url&&t)this.convertUrlToData(i.url,i.mimeType,i.headers,i.keys,t);else if(i.json)i=this.convertJsonToData(i.json,i.keys);else if(i.rows)i=this.convertRowsToData(i.rows);else if(i.columns)i=this.convertColumnsToData(i.columns);else if(a.bindto)throw Error("url or json or rows or columns is required.");return La(i)&&i},convertUrlToData:function convertUrlToData(e,t,a,i,n){var r=this,o=1<arguments.length&&void 0!==t?t:"csv",s=2<arguments.length?a:void 0,c=3<arguments.length?i:void 0,l=4<arguments.length?n:void 0,u=new XMLHttpRequest;u.open("GET",e),s&&Object.keys(s).forEach(function(t){u.setRequestHeader(t,s[t])}),u.onreadystatechange=function(){if(4===u.readyState){if(200!==u.status)throw new Error("".concat(e,": Something went wrong loading!"));var t=u.responseText;t&&l.call(r,r["convert".concat(Za(o),"ToData")]("json"===o?JSON.parse(t):t,c))}},u.send()},_convertCsvTsvToData:function _convertCsvTsvToData(t,e){var a,i=t.rows(e);return 1===i.length?(a=[{}],i[0].forEach(function(t){a[0][t]=null})):a=t.parse(e),a},convertCsvToData:function convertCsvToData(t){return this._convertCsvTsvToData({rows:r.csvParseRows,parse:r.csvParse},t)},convertTsvToData:function convertTsvToData(t){return this._convertCsvTsvToData({rows:r.tsvParseRows,parse:r.tsvParse},t)},convertJsonToData:function convertJsonToData(a,t){var e,i,n=this,r=this.config,o=[];if(La(a)){var s=t||r.data_keys;s.x?(e=s.value.concat(s.x),r.data_x=s.x):e=s.value,o.push(e),a.forEach(function(a){var t=e.map(function(t){var e=n.findValueInJson(a,t);return Ca(e)&&(e=null),e});o.push(t)}),i=this.convertRowsToData(o)}else Object.keys(a).forEach(function(t){var e=a[t].concat();e.unshift(t),o.push(e)}),i=this.convertColumnsToData(o);return i},findValueInJson:function findValueInJson(t,e){if(void 0!==t[e])return t[e];var a=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),i=t;return a.some(function(t){return!(i=i&&t in i?i[t]:void 0)}),i},convertRowsToData:function convertRowsToData(t){for(var e=t[0],a=[],i=1,n=t.length;i<n;i++){for(var r={},o=0,s=t[i].length;o<s;o++){if(Ca(t[i][o]))throw new Error("Source data is missing a component at (".concat(i,", ").concat(o,")!"));r[e[o]]=t[i][o]}a.push(r)}return a},convertColumnsToData:function convertColumnsToData(t){for(var e=[],a=0,i=t.length;a<i;a++)for(var n=t[a][0],r=1,o=t[a].length;r<o;r++){if(Ca(e[r-1])&&(e[r-1]={}),Ca(t[a][r]))throw new Error("Source data is missing a component at (".concat(a,", ").concat(r,")!"));e[r-1][n]=t[a][r]}return e},convertDataToTargets:function convertDataToTargets(t,i){var n,r=this,d=this,g=d.config,o=d.isTimeSeries(),e=Object.keys(t[0]||{}),a=e.length?e.filter(d.isNotX,d):[],s=e.length?e.filter(d.isX,d):[];a.forEach(function(a){var e=r.getXKey(a);r.isCustomX()||o?0<=s.indexOf(e)?n=(i&&d.data.xs[a]||[]).concat(t.map(function(t){return t[e]}).filter(ya).map(function(t,e){return d.generateTargetX(t,a,e)})):g.data_x?n=r.getOtherTargetXs():Ka(g.data_xs)&&(n=d.getXValuesOfXKey(e,d.data.targets)):n=t.map(function(t,e){return e}),n&&(r.data.xs[a]=n)}),a.forEach(function(t){if(!r.data.xs[t])throw new Error('x is not defined for id = "'.concat(t,'".'))});var c=a.map(function(r,o){var s=g.data_idConverter(r),c=d.getXKey(r),l=d.isCustomX()&&d.isCategorized(),u=l&&t.map(function(t){return t.x}).every(function(t){return-1<g.axis_x_categories.indexOf(t)});return{id:s,id_org:r,values:t.map(function(t,e){var a,i=t[c],n=t[r];return n=null===n||isNaN(n)||Ma(n)?La(n)||Ma(n)?n:null:+t[r],l&&0===o&&!Ca(i)?(u||0!==o||0!==e||(g.axis_x_categories=[]),-1===(a=g.axis_x_categories.indexOf(i))&&(a=g.axis_x_categories.length,g.axis_x_categories.push(i))):a=d.generateTargetX(i,r,e),(Ca(t[r])||d.data.xs[r].length<=e)&&(a=void 0),{x:a,value:n,id:s}}).filter(function(t){return Da(t.x)})}});return c.forEach(function(t){g.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),t.values.forEach(function(t,e){return t.index=e}),d.data.xs[t.id].sort(function(t,e){return t-e})}),d.hasNegativeValue=d.hasNegativeValueInTargets(c),d.hasPositiveValue=d.hasPositiveValueInTargets(c),g.data_type&&d.setTargetType(d.mapToIds(c).filter(function(t){return!(t in g.data_types)}),g.data_type),c.forEach(function(t){return d.addCache(t.id_org,t,!0)}),c}}),Ya(n.prototype,{load:function load(t,a){var i=this,n=t;n&&(a.filter&&(n=n.filter(a.filter)),(a.type||a.types)&&n.forEach(function(t){var e=a.types&&a.types[t.id]||a.type;i.setTargetType(t.id,e)}),i.data.targets.forEach(function(t){for(var e=0;e<n.length;e++)if(t.id===n[e].id){t.values=n[e].values,n.splice(e,1);break}}),i.data.targets=i.data.targets.concat(n)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()},loadFromArgs:function loadFromArgs(e){var a=this;if(a.config){a.resetCache();var t=e.data||a.convertData(e,function(t){return a.load(a.convertDataToTargets(t),e)});t&&a.load(a.convertDataToTargets(t),e)}},unload:function unload(t,e){var a=this,i=e,n=t;return a.resetCache(),i=i||function(){},(n=n.filter(function(t){return a.hasTarget(a.data.targets,t)}))&&0!==n.length?(a.svg.selectAll(n.map(function(t){return a.selectorTarget(t)})).transition().style("opacity","0").remove().call(a.endall,i),void n.forEach(function(e){a.withoutFadeIn[e]=!1,a.legend&&a.legend.selectAll(".".concat(M.legendItem).concat(a.getTargetSelectorSuffix(e))).remove(),a.data.targets=a.data.targets.filter(function(t){return t.id!==e})})):void i()}}),Ya(n.prototype,{categoryName:function categoryName(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t}});var h=a(9);Ya(n.prototype,{initEventRect:function initEventRect(){this.main.select(".".concat(M.chart)).append("g").attr("class",M.eventRects).style("fill-opacity","0")},redrawEventRect:function redrawEventRect(){var t,e=this,a=e.config,i=e.isMultipleX(),n=a.zoom_enabled,r=e.main.select(".".concat(M.eventRects)).style("cursor",n&&"drag"!==n.type?a.axis_rotated?"ns-resize":"ew-resize":null).classed(M.eventRectsMultiple,i).classed(M.eventRectsSingle,!i);if(r.selectAll(".".concat(M.eventRect)).remove(),e.eventRect=r.selectAll(".".concat(M.eventRect)),i)t=e.eventRect.data([0]),t=e.generateEventRectsForMultipleXs(t.enter()).merge(t);else{var o=e.getMaxDataCountTarget();e.updateDataIndexByX(o),e.updateXs(o),e.updatePointClass(!0),r.datum(o),e.eventRect=r.selectAll(".".concat(M.eventRect)),(t=e.eventRect.data(function(t){return t})).exit().remove(),t=e.generateEventRectsForSingleX(t.enter()).merge(t)}e.updateEventRect(t),"touch"!==e.inputType||e.svg.on("touchstart.eventRect")||e.hasArcType()||e.bindTouchOnEventRect(i)},bindTouchOnEventRect:function bindTouchOnEventRect(i){function Oz(){var t=B.event.changedTouches[0];return Object(B.select)(k.elementFromPoint(t.clientX,t.clientY))}function Qz(t){if(i)r.selectRectForMultipleXs(t);else{var e=Oz(),a=function(t){var e=t&&t.attr("class")&&1*t.attr("class").replace(new RegExp("(".concat(M.eventRect,"-?|s)"),"g"),"");return!isNaN(e)&&null!==e||(e=-1),e}(e);r.callOverOutForTouch(a),-1===a?r.unselectRect():r.selectRectForSingle(t,e,a)}}var n,r=this,o=r.config,t=o.interaction_inputType_touch.preventDefault,s=Ea(t)&&t||!1,c=!isNaN(t)&&t||null;r.svg.on("touchstart.eventRect touchmove.eventRect",function(){var t=Oz(),e=B.event;if(!t.empty()&&t.classed(M.eventRect)){if(r.dragging||r.flowing||r.hasArcType()||1<e.touches.length)return;(function(t){var e=t.type,a=t.changedTouches[0]["client".concat(o.axis_rotated?"Y":"X")];"touchstart"===e?s?t.preventDefault():null!==c&&(n=a):"touchmove"===e&&(s||!0===n||null!==c&&Math.abs(n-a)>=c)&&(n=!0,t.preventDefault())})(e),Qz(this)}else r.unselectRect(),r.callOverOutForTouch()},!0).on("touchend.eventRect",function(){var t=Oz();!t.empty()&&t.classed(M.eventRect)&&(r.hasArcType()||!r.toggleShape||r.cancelClick)&&r.cancelClick&&(r.cancelClick=!1)},!0)},updateEventRect:function updateEventRect(t){var e,a,i,n,r=this,o=r.config,s=r.zoomScale||r.x,c=t||r.eventRect.data(),l=o.axis_rotated;if(r.isMultipleX())a=e=0,i=r.width,n=r.height;else{var u,d;if(r.isCategorized())u=r.getEventRectWidth(),d=function(t){return s(t.x)-u/2};else{var g=function(t){var e=t.index;return{prev:r.getPrevX(e),next:r.getNextX(e)}};u=function(t){var e=g(t);return null===e.prev&&null===e.next?l?r.height:r.width:(null===e.prev&&(e.prev=s.domain()[0]),null===e.next&&(e.next=s.domain()[1]),Math.max(0,(s(e.next)-s(e.prev))/2))},d=function(t){var e=g(t),a=t.x;return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=s.domain()[0]),(s(a)+s(e.prev))/2)}}e=l?0:d,a=l?d:0,i=l?r.width:u,n=l?u:r.height}c.attr("class",r.classEvent.bind(r)).attr("x",e).attr("y",a).attr("width",i).attr("height",n)},selectRectForSingle:function selectRectForSingle(a,i,n){var r=this,o=r.config,s=o.data_selection_enabled,c=o.data_selection_grouped,l=o.tooltip_grouped,t=r.getAllValuesOnIndex(n);l&&(r.showTooltip(t,a),r.showXGridFocus(t),!s||c)||r.main.selectAll(".".concat(M.shape,"-").concat(n)).each(function(){Object(B.select)(this).classed(M.EXPANDED,!0),s&&i.style("cursor",c?"pointer":null),l||(r.hideXGridFocus(),r.hideTooltip(),c||r.expandCirclesBars(n))}).filter(function(t){return r.isWithinShape(this,t)}).call(function(t){var e=t.data();s&&(c||o.data_selection_isselectable(e))&&i.style("cursor","pointer"),l||(r.showTooltip(e,a),r.showXGridFocus(e),r.unexpandCircles(),t.each(function(t){return r.expandCirclesBars(n,t.id)}))})},expandCirclesBars:function expandCirclesBars(t,e,a){this.config.point_focus_expand_enabled&&this.expandCircles(t,e,a),this.expandBars(t,e,a)},selectRectForMultipleXs:function selectRectForMultipleXs(t){var e=this,a=e.config,i=e.filterTargetsToShow(e.data.targets);if(!e.dragging&&!e.hasArcType(i)){var n=Object(B.mouse)(t),r=e.findClosestFromTargets(i,n);if(!e.mouseover||r&&r.id===e.mouseover.id||(a.data_onout.call(e.api,e.mouseover),e.mouseover=void 0),!r)return void e.unselectRect();var o=(e.isBubbleType(r)||e.isScatterType(r)||!a.tooltip_grouped?[r]:e.filterByX(i,r.x)).map(function(t){return e.addName(t)});e.showTooltip(o,t),e.expandCirclesBars(r.index,r.id,!0),e.showXGridFocus(o),(e.isBarType(r.id)||e.dist(r,n)<a.point_sensitivity)&&(e.svg.select(".".concat(M.eventRect)).style("cursor","pointer"),e.mouseover||(a.data_onover.call(e.api,r),e.mouseover=r))}},unselectRect:function unselectRect(){var t=this;t.svg.select(".".concat(M.eventRect)).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t._handleLinkedCharts(!1),t.unexpandCircles(),t.unexpandBars()},setOverOut:function setOverOut(t,e){var a=this,i=a.config,n=Ma(e);if(n||-1!==e){var r=i[t?"data_onover":"data_onout"].bind(a.api);if(i.color_onover&&a.setOverColor(t,e,n),n)r(e,a.main.select(".".concat(M.arc,"-").concat(e.id)).node());else if(i.tooltip_grouped)t&&a.expandCirclesBars(e,null,!0),a.isMultipleX()||a.main.selectAll(".".concat(M.shape,"-").concat(e)).each(function(t){r(t,this)});else{var o=a.setOverOut,s=o.last||[],c=a.main.selectAll(".".concat(M.shape,"-").concat(e)).filter(function(t){return a.isWithinShape(this,t)});c.each(function(t){var e=this;0!==s.length&&!s.every(function(t){return t!==e})||(r(t,this),s.push(this))}),0<s.length&&c.empty()&&(r=i.data_onout.bind(a.api),s.forEach(function(t){return r(Object(B.select)(t).datum(),t)}),s=[]),o.last=s}}},callOverOutForTouch:function callOverOutForTouch(t){var e=this.callOverOutForTouch,a=e.last;(Ma(t)&&a?t.id!==a.id:t!==a)&&((a||Ba(a))&&this.setOverOut(!1,a),(t||Ba(t))&&this.setOverOut(!0,t),e.last=t)},getDraggableSelection:function getDraggableSelection(){var t=this,e=t.config;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Object(h.drag)().on("drag",function(){t.drag(Object(B.mouse)(this))}).on("start",function(){t.dragstart(Object(B.mouse)(this))}).on("end",function(){t.dragend()}):function(){}},generateEventRectsForSingleX:function generateEventRectsForSingleX(t){var i=this,e=i.config,a=t.append("rect").attr("class",i.classEvent.bind(i)).style("cursor",e.data_selection_enabled&&e.data_selection_grouped?"pointer":null).on("click",function(t){i.clickHandlerForSingleX.bind(this)(t,i)}).call(i.getDraggableSelection());return"mouse"===i.inputType&&a.on("mouseover",function(t){i.dragging||i.flowing||i.hasArcType()||i.config.tooltip_grouped&&i.setOverOut(!0,t.index)}).on("mousemove",function(t){if(!(i.dragging||i.flowing||i.hasArcType())){var e=t.index,a=i.svg.select(".".concat(M.eventRect,"-").concat(e));i.isStepType(t)&&"step-after"===i.config.line_step_type&&Object(B.mouse)(this)[0]<i.x(i.getXValue(t.id,e))&&(e-=1),-1===e?i.unselectRect():i.selectRectForSingle(this,a,e),i.config.tooltip_grouped||i.setOverOut(-1!==e,t.index)}}).on("mouseout",function(t){!i.config||i.hasArcType()||(i.unselectRect(),i.setOverOut(!1,t.index))}),a},clickHandlerForSingleX:function clickHandlerForSingleX(t,e){var a=e,i=a.config;if(a.hasArcType()||!a.toggleShape||a.cancelClick)a.cancelClick&&(a.cancelClick=!1);else{var n=t.index;a.main.selectAll(".".concat(M.shape,"-").concat(n)).each(function(t){(i.data_selection_grouped||a.isWithinShape(this,t))&&(a.toggleShape(this,t,n),i.data_onclick.call(a.api,t,this))})}},generateEventRectsForMultipleXs:function generateEventRectsForMultipleXs(t){var e=this,a=t.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class",M.eventRect).on("click",function(){e.clickHandlerForMultipleXS.bind(this)(e)}).call(e.getDraggableSelection());return"mouse"===e.inputType&&a.on("mouseover mousemove",function(){e.selectRectForMultipleXs(this)}).on("mouseout",function(){!e.config||e.hasArcType()||e.unselectRect()}),a},clickHandlerForMultipleXS:function clickHandlerForMultipleXS(t){var e=t,a=e.config,i=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(i)){var n=Object(B.mouse)(this),r=e.findClosestFromTargets(i,n);!r||(e.isBarType(r.id)||e.dist(r,n)<a.point_sensitivity)&&e.main.selectAll(".".concat(M.shapes).concat(e.getTargetSelectorSuffix(r.id))).selectAll(".".concat(M.shape,"-").concat(r.index)).each(function(){(a.data_selection_grouped||e.isWithinShape(this,r))&&(e.toggleShape(this,r,r.index),a.data_onclick.call(e.api,r,this))})}},dispatchEvent:function dispatchEvent(t,e,a){var i=this.isMultipleX(),n=".".concat(i?M.eventRect:"".concat(M.eventRect,"-").concat(e)),r=this.main.select(n).node(),o=r.getBoundingClientRect(),s=o.width,c=o.left,l=o.top,u=c+(a?a[0]:0)+(i?0:s/2),d=l+(a?a[1]:0);g[/^(mouse|click)/.test(t)?"mouse":"touch"](r,t,{screenX:u,screenY:d,clientX:u,clientY:d})}}),Ya(n.prototype,{setContainerSize:function setContainerSize(){this.currentWidth=this.getCurrentWidth(),this.currentHeight=this.getCurrentHeight()},getCurrentWidth:function getCurrentWidth(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function getCurrentHeight(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getAxisSize:function getAxisSize(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getCurrentPaddingTop:function getCurrentPaddingTop(){var t=this,e=t.config,a=e.axis_y2_axes.length,i=ya(e.padding_top)?e.padding_top:0;return t.title&&t.title.node()&&(i+=t.getTitlePadding()),a&&e.axis_rotated&&(i+=t.getHorizontalAxisHeight("y2")*a),i},getCurrentPaddingBottom:function getCurrentPaddingBottom(){var t=this.config,e=t.axis_rotated?"y":"x",a=t["axis_".concat(e,"_axes")].length;return(ya(t.padding_bottom)?t.padding_bottom:0)+(a?this.getHorizontalAxisHeight(e)*a:0)},getCurrentPaddingLeft:function getCurrentPaddingLeft(t){var e=this.config,a=e.axis_rotated,i=a?"x":"y",n=e["axis_".concat(i,"_axes")].length,r=this.getAxisWidthByAxisId(i,t);return(ya(e.padding_left)?e.padding_left:a?e.axis_x_show?Math.max(Fa(r),40):1:!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:Fa(r))+r*n},getCurrentPaddingRight:function getCurrentPaddingRight(){var t=this,e=t.config,a=t.isLegendRight?t.getLegendWidth()+20:0,i=e.axis_y2_axes.length,n=t.getAxisWidthByAxisId("y2");return(ya(e.padding_right)?e.padding_right+1:e.axis_rotated?10+a:!e.axis_y2_show||e.axis_y2_inner?2+a+(t.axis.getY2AxisLabelPosition().isOuter?20:0):Fa(n)+a)+n*i},getParentRectValue:function getParentRectValue(t){for(var e,a="offset".concat(Za(t)),i=this.selectChart.node();!e&&i&&"BODY"!==i.tagName;){try{e=i.getBoundingClientRect()[t]}catch(t){a in i&&(e=i[a])}i=i.parentNode}if("width"===t){var n=k.body.offsetWidth;n<e&&(e=n)}return e},getParentWidth:function getParentWidth(){return this.getParentRectValue("width")},getParentHeight:function getParentHeight(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?parseInt(t,10):0},getSvgLeft:function getSvgLeft(t){var e=this,a=e.config,i=a.axis_rotated||!a.axis_rotated&&!a.axis_y_inner,n=a.axis_rotated?M.axisX:M.axisY,r=e.main.select(".".concat(n)).node(),o=r&&i?r.getBoundingClientRect():{right:0},s=e.selectChart.node().getBoundingClientRect(),c=e.hasArcType(),l=o.right-s.left-(c?0:e.getCurrentPaddingLeft(t));return 0<l?l:0},getAxisWidthByAxisId:function getAxisWidthByAxisId(t,e){var a=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(a.isInner?20:40)},getHorizontalAxisHeight:function getHorizontalAxisHeight(t){var e=this,a=e.config,i=a.axis_rotated,n=30;return"x"!==t||a.axis_x_show?"x"===t&&a.axis_x_height?a.axis_x_height:"y"!==t||a.axis_y_show?"y2"!==t||a.axis_y2_show?(("x"===t&&!i&&a.axis_x_tick_rotate||"y"===t&&i&&a.axis_y_tick_rotate)&&(n=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-a["axis_".concat(t,"_tick_rotate")])/180)),n+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||i?0:-10)):e.rotated_padding_top:!a.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},getEventRectWidth:function getEventRectWidth(){return Math.max(0,this.xAxis.tickInterval())}});var f=a(10);Ya(n.prototype,{getShapeIndices:function getShapeIndices(t){var s=this.config,c=s.data_xs,e=Ka(c),l={},u=e?{}:0;return e&&ab(Object.keys(c).map(function(t){return c[t]})).forEach(function(t){u[t]=0,l[t]={}}),this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(var e,a=(t.id in c?c[t.id]:""),i=a?l[a]:l,n=0;e=s.data_groups[n];n++)if(!(e.indexOf(t.id)<0))for(var r,o=0;r=e[o];o++)if(r in i){i[t.id]=i[r];break}Ca(i[t.id])&&(i[t.id]=a?u[a]++:u++,i.__max__=(a?u[a]:u)-1)}),l},getIndices:function getIndices(t,e){var a=this.config.data_xs;return Ka(a)?t[a[e]]:t},getIndicesMax:function getIndicesMax(e){return Ka(this.config.data_xs)?Object.keys(e).map(function(t){return e[t].__max__||0}).reduce(function(t,e){return t+e}):e.__max__},getShapeX:function getShapeX(o,s,t){function ND(t,e){return t+e}var c=this,l=t?c.subX:c.zoomScale||c.x,u=c.config.bar_padding,d=Ia(o)&&o.total.length?o.total.reduce(ND)/2:0;return function(t){var e=c.getIndices(s,t.id),a=t.id in e?e[t.id]:0,i=(e.__max__||0)+1,n=0;if(Ka(t.x)){var r=l(t.x);n=d?r-(o[t.id]||o.width)+o.total.slice(0,a+1).reduce(ND)-d:r-(Ba(o)?o:o.width)*(i/2-a)}return o&&n&&1<i&&u&&(a&&(n+=u*a),2<i?n-=(i-1)*u/2:2===i&&(n-=u/2)),n}},getShapeY:function getShapeY(a){var i=this,n=i.isStackNormalized();return function(t){var e=n?i.getRatio("index",t,!0):i.isBubbleZType(t)?i.getBubbleZData(t.value,"y"):t.value;return(a?i.getSubYScale(t.id):i.getYScale(t.id))(e)}},getShapeOffsetData:function getShapeOffsetData(t){var n=this,e=n.orderTargets(n.filterTargetsToShow(n.data.targets.filter(t,n))),a=e.map(function(t){var e=t.values;n.isStepType(t)&&(e=n.convertValuesToStep(e));var a,i=e.reduce(function(t,e){return t[+e.x]=e,t},{});return a=n.isStackNormalized()?e.map(function(t){return n.getRatio("index",t,!0)}):e.map(function(t){return t.value}),{id:t.id,rowValues:e,rowValueMapByXValue:i,values:a}});return{indexMapByTargetId:e.reduce(function(t,e,a){return t[e.id]=a,t},{}),shapeOffsetTargets:a}},getShapeOffset:function getShapeOffset(t,e,a){var i=this,n=i.getShapeOffsetData(t),d=n.shapeOffsetTargets,g=n.indexMapByTargetId;return function(n,r){var o=i.getIndices(e,n.id),s=a?i.getSubYScale(n.id):i.getYScale(n.id),c=s(0),l=+n.x,u=c;return d.forEach(function(t){var e=t.rowValues,a=t.values;if(t.id!==n.id&&o[t.id]===o[n.id]&&g[t.id]<g[n.id]){var i=e[r];i&&+i.x==l||(i=t.rowValueMapByXValue[l]),i&&0<=i.value*n.value&&(u+=s(a[i.index])-c)}}),u}},isWithinShape:function isWithinShape(t,e){var a,i=this,n=Object(B.select)(t);return i.isTargetToShow(e.id)?i.hasValidPointType(t.nodeName)?a=i.isStepType(e)?i.isWithinStep(t,i.getYScale(e.id)(e.value)):i.isWithinCircle(t,i.isBubbleType(e)?1.5*i.pointSelectR(e):0):"path"===t.nodeName&&(a=!n.classed(M.bar)||i.isWithinBar(t)):a=!1,a},getInterpolate:function getInterpolate(t){var e=this.getInterpolateType(t);return{basis:f.curveBasis,"basis-closed":f.curveBasisClosed,"basis-open":f.curveBasisOpen,bundle:f.curveBundle,cardinal:f.curveCardinal,"cardinal-closed":f.curveCardinalClosed,"cardinal-open":f.curveCardinalOpen,"catmull-rom":f.curveCatmullRom,"catmull-rom-closed":f.curveCatmullRomClosed,"catmull-rom-open":f.curveCatmullRomOpen,"monotone-x":f.curveMonotoneX,"monotone-y":f.curveMonotoneY,natural:f.curveNatural,"linear-closed":f.curveLinearClosed,linear:f.curveLinear,step:f.curveStep,"step-after":f.curveStepAfter,"step-before":f.curveStepBefore}[e]},getInterpolateType:function getInterpolateType(t){var e=this,a=e.config.spline_interpolation_type,i=e.isInterpolationType(a)?a:"cardinal";return e.isSplineType(t)?i:e.isStepType(t)?e.config.line_step_type:"linear"}});var m=a(11);Ya(n.prototype,{initPie:function initPie(){var a=this,t=a.config,e=t.data_type,i=t.pie_padding,n=t["".concat(e,"_startingAngle")]||0,r=(a.hasType("pie")&&i?.01*i:t["".concat(e,"_padAngle")])||0;a.pie=Object(f.pie)().startAngle(n).endAngle(n+2*Math.PI).padAngle(r).sortValues(a.isOrderAsc()||a.isOrderDesc()?function(t,e){return a.isOrderAsc()?t-e:e-t}:null).value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)})},updateRadius:function updateRadius(){var t=this,e=t.config,a=e.pie_innerRadius,i=e.pie_padding,n=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6;var r=a||(i?i*(t.innerRadiusRatio+.1):0);t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:r},getInnerRadius:function getInnerRadius(t){var e=this.innerRadius;return!Ba(e)&&t&&(e=e[t.data.id]||0),e},updateArc:function updateArc(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},updateAngle:function updateAngle(t){var e=this,a=e.config,i=e.pie,n=t,r=!1;if(!a)return null;if(n.data&&e.isGaugeType(n.data)){var o=e.getTotalDataSum();o>a.gauge_max&&(a.gauge_max=o);var s=Math.PI*(a.gauge_fullCircle?2:1),c=a.gauge_startingAngle,l=s*(o/(a.gauge_max-a.gauge_min));i=e.pie.startAngle(c).endAngle(l+c)}return i(e.filterTargetsToShow()).forEach(function(t){r||t.data.id!==n.data.id||(r=!0,n=t)}),isNaN(n.startAngle)&&(n.startAngle=0),isNaN(n.endAngle)&&(n.endAngle=n.startAngle),r?n:null},getSvgArc:function getSvgArc(){function DF(t,e){var a="M 0 0";if(t.value||t.data){Ba(r)||(o=o.innerRadius(n.getInnerRadius(t)));var i=!e&&n.updateAngle(t);e?a=o(t):i&&(a=o(i))}return a}var n=this,r=n.getInnerRadius(),o=Object(f.arc)().outerRadius(n.radius).innerRadius(Ba(r)?r:0);return DF.centroid=o.centroid,DF},getSvgArcExpanded:function getSvgArcExpanded(t){var a=this,i=Object(f.arc)().outerRadius(a.radiusExpanded*(t||1));return function(t){var e=a.updateAngle(t);return e?i.innerRadius(a.getInnerRadius(t))(e):"M 0 0"}},getArc:function getArc(t,e,a){return a||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function transformForArcLabel(t){var e=this,a=e.config,i=e.updateAngle(t),n="";if(i&&(!e.hasType("gauge")||1<e.data.targets.length)){var r=this.svgArc.centroid(i),o=isNaN(r[0])?0:r[0],s=isNaN(r[1])?0:r[1],c=Math.sqrt(o*o+s*s),l=e.hasType("donut")&&a.donut_label_ratio||e.hasType("pie")&&a.pie_label_ratio;l=l?za(l)?l(t,e.radius,c):l:e.radius&&(c?(.375<36/e.radius?1.175-36/e.radius:.8)*e.radius/c:0),n="translate(".concat(o*l,",").concat(s*l,")")}return n},convertToArcData:function convertToArcData(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function textForArcLabel(t){var c=this;c.shouldShowArcLabel()&&t.each(function(t){var e=Object(B.select)(this),a=c.updateAngle(t),i=a?a.value:t.value,n=c.getRatio("arc",a),r=t.data.id,o=c.hasType("gauge");if(o||c.meetsArcLabelThreshold(n)){var s=(c.getArcLabelFormat()||c.defaultArcValueFormat)(i,n,r).toString();Ra(e,s,[-1,1],o)}})},textForGaugeMinMax:function textForGaugeMinMax(t,e){var a=this.getGaugeLabelExtents();return a?a(t,e):t},expandArc:function expandArc(t){var a=this;if(a.transiting)var e=setInterval(function(){a.transiting||(clearInterval(e),0<a.legend.selectAll(".".concat(M.legendItemFocused)).size()&&a.expandArc(t))},10);else{var i=a.mapToTargetIds(t);a.svg.selectAll(a.selectorTargets(i,".".concat(M.chartArc))).each(function(t){if(a.shouldExpand(t.data.id)&&0!==t.value){var e=a.expandDuration(t.data.id);Object(B.select)(this).selectAll("path").transition().duration(e).attr("d",a.svgArcExpanded).transition().duration(2*e).attr("d",a.svgArcExpandedSub)}})}},unexpandArc:function unexpandArc(t){var e=this;if(!e.transiting){var a=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(a,".".concat(M.chartArc))).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("".concat(M.arc)).style("opacity","1")}},expandDuration:function expandDuration(t){var e,a=this.config;return this.isDonutType(t)?e="donut":this.isGaugeType(t)?e="gauge":this.isPieType(t)&&(e="pie"),e?a["".concat(e,"_expand_duration")]:50},shouldExpand:function shouldExpand(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},shouldShowArcLabel:function shouldShowArcLabel(){var e=this,a=e.config;return["pie","donut","gauge"].some(function(t){return e.hasType(t)&&a["".concat(t,"_label_show")]})},meetsArcLabelThreshold:function meetsArcLabelThreshold(t){var e=this.config;return(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)<=t},getArcLabelFormat:function getArcLabelFormat(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},getGaugeLabelExtents:function getGaugeLabelExtents(){return this.config.gauge_label_extents},getArcTitle:function getArcTitle(){var t=this.hasType("donut")?"donut":this.hasType("gauge")&&"gauge";return t?this.config["".concat(t,"_title")]:""},updateTargetsForArc:function updateTargetsForArc(t){var e=this,a=e.main,i=e.hasType("gauge"),n=e.classChartArc.bind(e),r=e.classArcs.bind(e),o=e.classFocus.bind(e),s=a.select(".".concat(M.chartArcs)).selectAll(".".concat(M.chartArc)).data(e.pie(t)).attr("class",function(t){return n(t)+o(t.data)}),c=s.enter().append("g").attr("class",n);c.append("g").attr("class",r).merge(s),c.append("text").attr("dy",i&&!e.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none")},initArc:function initArc(){this.arcs=this.main.select(".".concat(M.chart)).append("g").attr("class",M.chartArcs).attr("transform",this.getTranslate("arc")),this.setArcTitle()},setArcTitle:function setArcTitle(){var t=this.getArcTitle(),e=this.hasType("gauge");if(t){var a=this.arcs.append("text").attr("class",M[e?"chartArcsGaugeTitle":"chartArcsTitle"]).style("text-anchor","middle");e&&a.attr("dy","-0.3em").style("font-size","27px"),Ra(a,t,e?void 0:[-.6,1.35],!0)}},redrawArc:function redrawArc(t,e,a){var n=this,i=n.config,r=n.main,o=i.interaction_enabled,s=r.selectAll(".".concat(M.arcs)).selectAll(".".concat(M.arc)).data(n.arcData.bind(n));s.exit().transition().duration(e).style("opacity","0").remove(),(s=s.enter().append("path").attr("class",n.classArc.bind(n)).style("fill",function(t){return n.color(t.data)}).style("cursor",function(t){return o&&i.data_selection_isselectable(t)?"pointer":null}).style("opacity","0").each(function(t){n.isGaugeType(t.data)&&(t.startAngle=i.gauge_startingAngle,t.endAngle=i.gauge_startingAngle),this._current=t}).merge(s)).attr("transform",function(t){return!n.isGaugeType(t.data)&&a?"scale(0)":""}).style("opacity",function(t){return t===this._current?"0":"1"}).each(function(){n.transiting=!0}).transition().duration(t).attrTween("d",function(a){var t=n.updateAngle(a);if(!t)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var i=Object(m.interpolate)(this._current,t);return this._current=i(0),function(t){var e=i(t);return e.data=a.data,n.getArc(e,!0)}}).attr("transform",a?"scale(1)":"").style("fill",function(t){var e;return n.levelColor?(e=n.levelColor(t.data.values[0].value),i.data_colors[t.data.id]=e):e=n.color(t.data.id),e}).style("opacity","1").call(n.endall,function(){if(n.levelColor){var t=Object(B.select)(this),e=t.datum();n.updateLegendItemColor(e.data.id,t.style("fill"))}n.transiting=!1}),o&&n.bindArcEvent(s),n.redrawArcText(t)},bindArcEvent:function bindArcEvent(t){function selectArc(t,e,a){n.expandArc(a),n.api.focus(a),n.toggleFocusLegend(a,!0),n.showTooltip([e],t)}function unselectArc(t){var e=t&&t.id||void 0;n.unexpandArc(e),n.api.revert(),n.revertLegend(),n.hideTooltip()}var n=this,e="touch"===n.inputType,a="mouse"===n.inputType;if(t.on("click",function(t,e){var a,i=n.updateAngle(t);i&&(a=n.convertToArcData(i),n.toggleShape&&n.toggleShape(this,a,e),n.config.data_onclick.call(n.api,a,this))}),a&&t.on("mouseover",function(t){if(!n.transiting){var e=n.updateAngle(t),a=e?n.convertToArcData(e):null;selectArc(this,a,a&&a.id||void 0),n.setOverOut(!0,a)}}).on("mouseout",function(t){if(!n.transiting){var e=n.updateAngle(t),a=e?n.convertToArcData(e):null;unselectArc(),n.setOverOut(!1,a)}}).on("mousemove",function(t){var e=n.updateAngle(t),a=e?n.convertToArcData(e):null;n.showTooltip([a],this)}),e&&n.hasArcType()&&!n.radars){var i=function(){if(!n.transiting){var t=function(){var t=B.event.changedTouches[0];return Object(B.select)(k.elementFromPoint(t.clientX,t.clientY))}().datum(),e=t&&t.data&&t.data.id?n.updateAngle(t):null,a=e?n.convertToArcData(e):null,i=a&&a.id||void 0;n.callOverOutForTouch(a),Ca(i)?unselectArc():selectArc(this,a,i)}};n.svg.on("touchstart",i).on("touchmove",i)}},redrawArcText:function redrawArcText(t){var e,a=this,i=a.config,n=a.main,r=a.hasType("gauge");if(r&&1===a.data.targets.length&&i.gauge_title||(e=n.selectAll(".".concat(M.chartArc)).select("text").style("opacity","0").attr("class",function(t){return a.isGaugeType(t.data)?M.gaugeValue:null}).call(a.textForArcLabel.bind(a)).attr("transform",a.transformForArcLabel.bind(a)).style("font-size",function(t){return a.isGaugeType(t.data)&&1===a.data.targets.length?"".concat(Math.round(a.radius/5),"px"):null}).transition().duration(t).style("opacity",function(t){return a.isTargetToShow(t.data.id)&&a.isArcType(t.data)?"1":"0"})),n.select(".".concat(M.chartArcsTitle)).style("opacity",a.hasType("donut")||r?"1":"0"),r){var o=i.gauge_fullCircle,s=-1*Math.PI/2,c=(o?-4:-1)*s;o&&e&&e.attr("dy","".concat(Math.round(a.radius/14))),a.arcs.select(".".concat(M.chartArcsBackground)).attr("d",function(){var t={data:[{value:i.gauge_max}],startAngle:s,endAngle:c};return a.getArc(t,!0,!0)}),a.arcs.select(".".concat(M.chartArcsGaugeUnit)).attr("dy",".75em").text(i.gauge_label_show?i.gauge_units:""),i.gauge_label_show&&(a.arcs.select(".".concat(M.chartArcsGaugeMin)).attr("dx","".concat(-1*(a.innerRadius+(a.radius-a.innerRadius)/(o?1:2)),"px")).attr("dy","1.2em").text(a.textForGaugeMinMax(i.gauge_min,!1)),o||a.arcs.select(".".concat(M.chartArcsGaugeMax)).attr("dx","".concat(a.innerRadius+(a.radius-a.innerRadius)/2,"px")).attr("dy","1.2em").text(a.textForGaugeMinMax(i.gauge_max,!0)))}},initGauge:function initGauge(){function uI(t){e.append("text").attr("class",t).style("text-anchor","middle").style("pointer-events","none")}var t=this.config,e=this.arcs;this.hasType("gauge")&&(e.append("path").attr("class",M.chartArcsBackground),t.gauge_units&&uI(M.chartArcsGaugeUnit),t.gauge_label_show&&(uI(M.chartArcsGaugeMin),t.gauge_fullCircle||uI(M.chartArcsGaugeMax)))},getGaugeLabelHeight:function getGaugeLabelHeight(){return this.config.gauge_label_show?20:0}}),Ya(n.prototype,{initBar:function initBar(){this.main.select(".".concat(M.chart)).append("g").attr("class",M.chartBars)},updateTargetsForBar:function updateTargetsForBar(t){var e=this,a=e.config,i=e.classChartBar.bind(e),n=e.classBars.bind(e),r=e.classFocus.bind(e);e.main.select(".".concat(M.chartBars)).selectAll(".".concat(M.chartBar)).data(t).attr("class",function(t){return i(t)+r(t)}).enter().append("g").attr("class",i).style("opacity","0").style("pointer-events","none").append("g").attr("class",n).style("cursor",function(t){return a.data_selection_isselectable(t)?"pointer":null})},updateBar:function updateBar(t){var e=this,a=e.barData.bind(e),i=e.classBar.bind(e),n=e.initialOpacity.bind(e);e.mainBar=e.main.selectAll(".".concat(M.bars)).selectAll(".".concat(M.bar)).data(a),e.mainBar.exit().transition().duration(t).style("opacity","0").remove(),e.mainBar=e.mainBar.enter().append("path").attr("class",i).style("fill",e.color).merge(e.mainBar).style("opacity",n)},redrawBar:function redrawBar(t,e){return[(e?this.mainBar.transition(Wa()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity","1")]},getBarW:function getBarW(t,r){function VI(t){var e=t?o.bar_width[t]:o.bar_width,a=t?e.ratio:o.bar_width_ratio,i=t?e.max:o.bar_width_max,n=Ba(e)?e:r?s*a/r:0;return i&&i<n?i:n}var e,o=this.config,s=t.tickInterval(this.getMaxDataCount()),a=o.data_groups.length;return e=VI(),!a&&Ia(o.bar_width)&&(e={width:e,total:[]},this.filterTargetsToShow(this.data.targets).forEach(function(t){o.bar_width[t.id]&&(e[t.id]=VI(t.id),e.total.push(e[t.id]||e.width))})),e},getBars:function getBars(t,e){var a=ya(t)?"-".concat(t):"";return(e?this.main.selectAll(".".concat(M.bars).concat(this.getTargetSelectorSuffix(e))):this.main).selectAll(".".concat(M.bar).concat(a))},expandBars:function expandBars(t,e,a){a&&this.unexpandBars(),this.getBars(t,e).classed(M.EXPANDED,!0)},unexpandBars:function unexpandBars(t){this.getBars(t).classed(M.EXPANDED,!1)},generateDrawBar:function generateDrawBar(t,e){var a=this.config,g=this.generateGetBarPoints(t,e),h=a.axis_rotated,f=a.data_groups.length,i=a.bar_radius,n=a.bar_radius_ratio,p=Ba(i)&&0<i?function(){return i}:Ba(n)?function(t){return t*n}:null;return function(t,e){var a=g(t,e),i=+h,n=+!i,r=t.value<0,o=["",""],s=0;if(p&&!f){var c=h?n:i,l=a[2][c]-a[0][c];s=p(l);var u="a".concat(s,",").concat(s," ").concat(r?"1 0 0":"0 0 1"," ");o[+!h]="".concat(u).concat(s,",").concat(s),o[+h]="".concat(u).concat([-s,s][h?"sort":"reverse"]()),r&&o.reverse()}var d=h?"H".concat(a[1][i]-s," ").concat(o[0],"V").concat(a[2][n]-s," ").concat(o[1],"H").concat(a[3][i]):"V".concat(a[1][n]+(r?-s:s)," ").concat(o[0],"H").concat(a[2][i]-s," ").concat(o[1],"V").concat(a[3][n]);return"M".concat(a[0][i],",").concat(a[0][n]).concat(d,"z")}},generateGetBarPoints:function generateGetBarPoints(t,e){var s=this,a=e?s.subXAxis:s.xAxis,i=s.getIndicesMax(t)+1,c=s.getBarW(a,i),l=s.getShapeX(c,t,!!e),u=s.getShapeY(!!e),d=s.getShapeOffset(s.isBarType,t,!!e),g=e?s.getSubYScale:s.getYScale;return function(t,e){var a=g.call(s,t.id)(0),i=d(t,e)||a,n=Ba(c)?c:c[t.id]||c.width,r=l(t),o=u(t);return s.config.axis_rotated&&(0<t.value&&o<a||t.value<0&&a<o)&&(o=a),[[r,i],[r,o-=a-i],[r+n,o],[r+n,i]]}},isWithinBar:function isWithinBar(t){var e=Object(B.mouse)(t),a=_slicedToArray(Sa(t),2),i=a[0],n=a[1],r=Math.min(i.x,n.x),o=Math.min(i.y,n.y),s=this.config.bar_sensitivity,c=t.getBBox(),l=c.width,u=c.height;return r-s<e[0]&&e[0]<r+l+s&&o-s<e[1]&&e[1]<o+u+s}}),Ya(n.prototype,{initBubble:function initBubble(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function getBaseLength(){var t="$baseLength",e=this.getCache(t);return e||this.addCache(t,e=eb("min",[this.axes.x.select("path").node().getTotalLength(),this.axes.y.select("path").node().getTotalLength()])),e},getBubbleR:function getBubbleR(t){var e=this,a=e.config.bubble_maxR;za(a)?a=a(t):Ba(a)||(a=e.getBaseLength()/(2*e.getMaxDataCount())+12);var i=eb("max",e.getMinMaxData().max.map(function(t){return e.isBubbleZType(t)?e.getBubbleZData(t.value,"y"):Ma(t.value)?t.value.mid:t.value})),n=a*a*Math.PI,r=(e.isBubbleZType(t)?e.getBubbleZData(t.value,"z"):t.value)*(n/i);return Math.sqrt(r/Math.PI)},getBubbleZData:function getBubbleZData(t,e){return Ma(t)?t[e]:t["y"===e?0:1]},isBubbleZType:function isBubbleZType(t){return this.isBubbleType(t)&&(Ma(t.value)&&("z"in t.value||"y"in t.value)||La(t.value)&&2===t.value.length)}}),Ya(n.prototype,{initLine:function initLine(){this.main.select(".".concat(M.chart)).append("g").attr("class",M.chartLines)},updateTargetsForLine:function updateTargetsForLine(t){var a=this,e=a.config,i=a.classChartLine.bind(a),n=a.classLines.bind(a),r=a.classAreas.bind(a),o=a.classCircles.bind(a),s=a.classFocus.bind(a),c=a.main.select(".".concat(M.chartLines)).selectAll(".".concat(M.chartLine)).data(t).attr("class",function(t){return i(t)+s(t)}).enter().append("g").attr("class",i).style("opacity","0").style("pointer-events","none");c.append("g").attr("class",n),c.append("g").attr("class",r),e.point_show&&(e.data_selection_enabled&&c.append("g").attr("class",function(t){return a.generateClass(M.selectedCircles,t.id)}),c.append("g").attr("class",o).style("cursor",function(t){return e.data_selection_isselectable(t)?"pointer":null})),t.forEach(function(e){a.main.selectAll(".".concat(M.selectedCircles).concat(a.getTargetSelectorSuffix(e.id))).selectAll("".concat(M.selectedCircle)).each(function(t){t.value=e.values[t.index].value})})},updateLine:function updateLine(t){var e=this;e.mainLine=e.main.selectAll(".".concat(M.lines)).selectAll(".".concat(M.line)).data(e.lineData.bind(e)),e.mainLine.exit().transition().duration(t).style("opacity","0").remove(),e.mainLine=e.mainLine.enter().append("path").attr("class",function(t){return"".concat(e.classLine.bind(e)(t)," ").concat(e.extraLineClasses(t)||"")}).style("stroke",e.color).merge(e.mainLine).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null)},redrawLine:function redrawLine(t,e){return[(e?this.mainLine.transition(Wa()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity","1")]},getCurve:function getCurve(a){var i=this;return i.config.axis_rotated&&i.isStepType(a)?function(t){var e=i.getInterpolate(a)(t);return e.orgPoint=e.point,e.pointRotated=function(t,e){1===this._point&&(this._point=2);var a=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,a),this._context.lineTo(t,a),this._x=t,this._y=e},e.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},e}:i.getInterpolate(a)},generateDrawLine:function generateDrawLine(t,e){function jL(t){return(e?s.subxx:s.xx).call(s,t)}function kL(t,e){return s.isGrouped(t.id)?a(t,e)[0][1]:d.call(s,t.id)(s.getBaseValue(t))}var s=this,c=s.config,l=c.line_connectNull,u=c.axis_rotated,a=s.generateGetLinePoints(t,e),d=e?s.getSubYScale:s.getYScale,g=Object(f.line)();g=u?g.x(kL).y(jL):g.x(jL).y(kL),l||(g=g.defined(function(t){return null!==s.getBaseValue(t)}));var h=e?s.subX:s.x;return function(t){var e,a=d.call(s,t.id),i=l?s.filterRemoveNull(t.values):t.values,n=0,r=0;if(s.isLineType(t)){var o=c.data_regions[t.id];e=o?s.lineWithRegions(i,h,a,o):(s.isStepType(t)&&(i=s.convertValuesToStep(i)),g.curve(s.getCurve(t))(i))}else i[0]&&(n=h(i[0].x),r=a(i[0].value)),e=u?"M ".concat(r," ").concat(n):"M ".concat(n," ").concat(r);return e||"M 0 0"}},generateGetLinePoints:function generateGetLinePoints(t,e){var s=this,c=s.config,a=!!e,l=s.getShapeX(0,t,a),u=s.getShapeY(a),d=s.getShapeOffset(s.isLineType,t,a),g=a?s.getSubYScale:s.getYScale;return function(t,e){var a=g.call(s,t.id)(0),i=d(t,e)||a,n=l(t),r=u(t);c.axis_rotated&&(0<t.value&&r<a||t.value<0&&a<r)&&(r=a);var o=[n,r-(a-i)];return[o,o,o,o]}},lineWithRegions:function lineWithRegions(t,l,u,e){function bM(t,e){for(var a,i=0;a=e[i];i++)if(a.start<t&&t<=a.end)return a.style;return!1}var r,d,g,a,i=this,h=i.config.axis_rotated,n=i.isTimeSeries(),o=i.isCategorized()?.5:0,s=[];if(Da(e))for(var c,f=function(t,e){return Ca(t)?e:n?i.parseDate(t):t},p=0;c=e[p];p++){var x=f(c.start,t[0].x),v=f(c.end,t[t.length-1].x),m=c.style||{dasharray:"2 2"};s[p]={start:x,end:v,style:m}}for(var _,y=h?function(t){return u(t.value)}:function(t){return l(t.x)},b=h?function(t){return l(t.x)}:function(t){return u(t.value)},T=function(t){return"M".concat(t[0][0],",").concat(t[0][1],"L").concat(t[1][0],",").concat(t[1][1])},A=n?function(t,e,a,i){var n=t.x.getTime(),r=e.x-t.x,o=new Date(n+r*a),s=new Date(n+r*(a+i)),c=h?[[u(d(a)),l(o)],[u(d(a+g)),l(s)]]:[[l(o),u(d(a))],[l(s),u(d(a+g))]];return T(c)}:function(t,e,a,i){var n=h?[[u(d(a),!0),l(r(a))],[u(d(a+i),!0),l(r(a+i))]]:[[l(r(a),!0),u(d(a))],[l(r(a+i),!0),u(d(a+i))]];return T(n)},w="M",L=0;_=t[L];L++){var C=t[L-1];m=bM(_.x,s);if(Ca(s)||!m)w+="".concat(L?"L":"").concat(y(_),",").concat(b(_));else{try{m=m.dasharray.split(" ")}catch(t){m="2 2".split(" ")}r=i.getScale(C.x+o,_.x+o,n),d=i.getScale(C.value,_.value);var S=l(_.x)-l(C.x),k=u(_.value)-u(C.value),D=Math.sqrt(Math.pow(S,2)+Math.pow(k,2));a=(g=m[0]/D)*m[1];for(var O=g;O<=1;O+=a)w+=A(C,_,O,g),1<=O+a&&(w+=A(C,_,1,0))}}return w},updateAreaGradient:function updateAreaGradient(){var d=this;d.data.targets.forEach(function(a){var t="".concat(d.datetimeId,"-areaGradient").concat(d.getTargetSelectorSuffix(a.id));if(d.isAreaType(a)&&d.defs.select("#".concat(t)).empty()){var i=d.color(a),e=d.config.area_linearGradient,n=e.x,r=void 0===n?[0,0]:n,o=e.y,s=void 0===o?[0,1]:o,c=e.stops,l=void 0===c?[[0,i,1],[1,i,0]]:c,u=d.defs.append("linearGradient").attr("id","".concat(t)).attr("x1",r[0]).attr("x2",r[1]).attr("y1",s[0]).attr("y2",s[1]);l.forEach(function(t){var e=za(t[1])?t[1](a.id):t[1];u.append("stop").attr("offset",t[0]).attr("stop-color",e||i).attr("stop-opacity",t[2])})}})},updateAreaColor:function updateAreaColor(t){return this.config.area_linearGradient?"url(#".concat(this.datetimeId,"-areaGradient").concat(this.getTargetSelectorSuffix(t.id),")"):this.color(t)},updateArea:function updateArea(t){var e=this;e.config.area_linearGradient&&e.updateAreaGradient(),e.mainArea=e.main.selectAll(".".concat(M.areas)).selectAll(".".concat(M.area)).data(e.lineData.bind(e)),e.mainArea.exit().transition().duration(t).style("opacity","0").remove(),e.mainArea=e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.updateAreaColor.bind(e)).style("opacity",function(){return e.orgAreaOpacity=Object(B.select)(this).style("opacity"),"0"}).merge(e.mainArea),e.mainArea.style("opacity",e.orgAreaOpacity)},redrawArea:function redrawArea(t,e){var a=this;return[(e?a.mainArea.transition(Wa()):a.mainArea).attr("d",t).style("fill",a.updateAreaColor.bind(a)).style("opacity",function(t){return(a.isAreaRangeType(t)?a.orgAreaOpacity/1.75:a.orgAreaOpacity)+""})]},generateDrawArea:function generateDrawArea(t,e){function wN(t){return(e?o.subxx:o.xx).call(o,t)}function xN(t,e){return o.isGrouped(t.id)?a(t,e)[0][1]:i.call(o,t.id)(o.isAreaRangeType(t)?o.getAreaRangeData(t,"high"):0)}function yN(t,e){return o.isGrouped(t.id)?a(t,e)[1][1]:i.call(o,t.id)(o.isAreaRangeType(t)?o.getAreaRangeData(t,"low"):t.value)}var o=this,s=o.config,c=s.line_connectNull,l=s.axis_rotated,a=o.generateGetAreaPoints(t,e),i=e?o.getSubYScale:o.getYScale;return function(t){var e,a=c?o.filterRemoveNull(t.values):t.values,i=0,n=0;if(o.isAreaType(t)){var r=Object(f.area)();r=l?r.y(wN).x0(xN).x1(yN):r.x(wN).y0(s.area_above?0:xN).y1(yN),c||(r=r.defined(function(t){return null!==o.getBaseValue(t)})),o.isStepType(t)&&(a=o.convertValuesToStep(a)),e=r.curve(o.getCurve(t))(a)}else a[0]&&(i=o.x(a[0].x),n=o.getYScale(t.id)(a[0].value)),e=l?"M ".concat(n," ").concat(i):"M ".concat(i," ").concat(n);return e||"M 0 0"}},generateGetAreaPoints:function generateGetAreaPoints(t,e){var o=this,s=o.config,c=o.getShapeX(0,t,!!e),l=o.getShapeY(!!e),u=o.getShapeOffset(o.isAreaType,t,!!e),d=e?o.getSubYScale:o.getYScale;return function(t,e){var a=d.call(o,t.id)(0),i=u(t,e)||a,n=c(t),r=l(t);return s.axis_rotated&&(0<t.value&&r<a||t.value<0&&a<r)&&(r=a),[[n,i],[n,r-(a-i)],[n,r-(a-i)],[n,i]]}},updateCircle:function updateCircle(){var e=this;if(e.config.point_show){e.mainCircle=e.main.selectAll(".".concat(M.circles)).selectAll(".".concat(M.circle)).data(function(t){return!e.isBarType(t)&&(!e.isLineType(t)||e.shouldDrawPointsForLine(t))&&e.labelishData(t)}),e.mainCircle.exit().remove();var t=e.point("create",this,e.pointR.bind(e),e.color);e.mainCircle=e.mainCircle.enter().append(t).merge(e.mainCircle).style("stroke",e.color).style("opacity",e.initialOpacityForCircle.bind(e))}},redrawCircle:function redrawCircle(a,i,n,r){var o=this,s=o.main.selectAll(".".concat(M.selectedCircle));if(!o.config.point_show)return[];var c=[];o.mainCircle.each(function(t){var e=o.point("update",o,a,i,o.opacityForCircle.bind(o),o.color,n,r,s).bind(this)(t);c.push(e)});var t=o.isCirclePoint()?"c":"";return[c,s.attr("".concat(t,"x"),a).attr("".concat(t,"y"),i)]},circleX:function circleX(t){var e=ya(t.x);return this.config.zoom_enabled&&this.zoomScale?e?this.zoomScale(t.x):null:e?this.x(t.x):null},updateCircleY:function updateCircleY(){var i=this,n=i.generateGetLinePoints(i.getShapeIndices(i.isLineType),!1);i.circleY=function(t,e){var a=t.id;return i.isGrouped(a)?n(t,e)[0][1]:i.getYScale(a)(i.getBaseValue(t))}},getCircles:function getCircles(t,e){var a=ya(t)?"-".concat(t):"";return(e?this.main.selectAll(".".concat(M.circles).concat(this.getTargetSelectorSuffix(e))):this.main).selectAll(".".concat(M.circle).concat(a))},expandCircles:function expandCircles(t,e,a){var i=this,o=i.pointExpandedR.bind(i);a&&i.unexpandCircles();var n=i.getCircles(t,e).classed(M.EXPANDED,!0),s=o(n)/i.config.point_r,c=1-s;i.isCirclePoint()?n.attr("r",o):n.each(function(){var t=Object(B.select)(this);if("circle"===this.tagName)t.attr("r",o);else{var e=this.getBBox(),a=e.width,i=e.height,n=c*(+t.attr("x")+a/2),r=c*(+t.attr("y")+i/2);t.attr("transform","translate(".concat(n," ").concat(r,") scale(").concat(s,")"))}})},unexpandCircles:function unexpandCircles(t){var e=this,a=e.pointR.bind(e),i=e.getCircles(t).filter(function(){return Object(B.select)(this).classed(M.EXPANDED)}).classed(M.EXPANDED,!1);i.attr("r",a),e.isCirclePoint()||i.attr("transform","scale(".concat(a(i)/e.config.point_r,")"))},pointR:function(t){var e=this.config.point_r,a=e;return this.isStepType(t)?a=0:this.isBubbleType(t)?a=this.getBubbleR(t):za(e)&&(a=e(t)),a},pointExpandedR:function pointExpandedR(t){var e=this.config,a=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*a:this.pointR(t)},pointSelectR:function pointSelectR(t){var e=this.config.point_select_r;return za(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function isWithinCircle(t,e){var a=Object(B.mouse)(t),i=Object(B.select)(t),n=this.isCirclePoint()?"c":"",r=+i.attr("".concat(n,"x")),o=+i.attr("".concat(n,"y"));if(!r&&!o&&1===t.nodeType){var s=t.getBBox?t.getBBox():t.getBoundingClientRect();r=s.x,o=s.y}return Math.sqrt(Math.pow(r-a[0],2)+Math.pow(o-a[1],2))<(e||this.config.point_sensitivity)},isWithinStep:function isWithinStep(t,e){return Math.abs(e-Object(B.mouse)(t)[1])<30},shouldDrawPointsForLine:function shouldDrawPointsForLine(t){var e=this.config.line_point;return!0===e||La(e)&&-1!==e.indexOf(t.id)}}),Ya(n.prototype,{hasValidPointType:function hasValidPointType(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function hasValidPointDrawMethods(t){var e=t||this.config.point_type;return Ia(e)&&za(e.create)&&za(e.update)},insertPointInfoDefs:function insertPointInfoDefs(t,e){function tP(t,e){for(var a,i=t.attributes,n=0;a=i[n];n++)a=a.name,e.setAttribute(a,t.getAttribute(a))}var a=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,i=k.createElementNS(B.namespaces.svg,a.nodeName.toLowerCase());if(i.id=e,i.style.fill="inherit",i.style.stroke="inherit",tP(a,i),a.childNodes&&a.childNodes.length){var n=Object(B.select)(i);"innerHTML"in i?n.html(a.innerHTML):$a(a.childNodes).forEach(function(t){tP(t,n.append(t.tagName).node())})}this.defs.node().appendChild(i)},pointFromDefs:function pointFromDefs(t){return this.defs.select("#".concat(t))},updatePointClass:function updatePointClass(t){var e=this,a=!1;return(Ma(t)||e.mainCircle)&&(a=!0===t?e.mainCircle.attr("class",e.classCircle.bind(e)):e.classCircle(t)),a},generatePoint:function generatePoint(){var c=this,t=c.config,l=[],u=Ka(t.point_pattern)?t.point_pattern:[t.point_type];return function(r,o){for(var t=arguments.length,s=Array(2<t?t-2:0),e=2;e<t;e++)s[e-2]=arguments[e];return function(t){var e=t.id||t.data&&t.data.id||t,a=Object(B.select)(this);l.indexOf(e)<0&&l.push(e);var i=u[l.indexOf(e)%u.length];if(c.hasValidPointType(i))i=c[i];else if(!c.hasValidPointDrawMethods(i)){var n="".concat(c.datetimeId,"-point-").concat(e);if(c.pointFromDefs(n).size()<1&&c.insertPointInfoDefs(i,n),"create"===r)return c.custom.create.bind(o).apply(void 0,[a,n].concat(s));if("update"===r)return c.custom.update.bind(o).apply(void 0,[a].concat(s))}return i[r].bind(o).apply(void 0,[a].concat(s))}}},getTransitionName:function getTransitionName(){return Wa()},custom:{create:function create(t,e,a,i){return t.append("use").attr("xlink:href","#".concat(e)).attr("class",this.updatePointClass.bind(this)).style("fill",i).node()},update:function update(t,e,a,i,n,r,o,s){function lQ(t){return e(t)-l/2}var c=t.node().getBBox(),l=c.width,u=c.height,d=t;if(r){var g=this.getTransitionName();o&&d.attr("x",lQ),d=d.transition(g),s.transition(this.getTransitionName())}return d.attr("x",lQ).attr("y",function yPosFn2(t){return a(t)-u/2}).style("opacity",i).style("fill",n)}},circle:{create:function create(t,e,a){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",a).node()},update:function update(t,e,a,i,n,r,o,s){var c=this,l=t;if(c.hasType("bubble")&&l.attr("r",c.pointR.bind(c)),r){var u=c.getTransitionName();o&&l.attr("cx",e),l.attr("cx")&&(l=l.transition(u)),s.transition(c.getTransitionName())}return l.attr("cx",e).attr("cy",a).style("opacity",i).style("fill",n)}},rectangle:{create:function create(t,e,a){function HQ(t){return 2*e(t)}return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",HQ).attr("height",HQ).style("fill",a).node()},update:function update(t,e,a,i,n,r,o,s){function TQ(t){return e(t)-c}var c=this.config.point_r,l=t;if(r){var u=this.getTransitionName();o&&l.attr("x",TQ),l=l.transition(u),s.transition(this.getTransitionName())}return l.attr("x",TQ).attr("y",function rectYPosFn(t){return a(t)-c}).style("opacity",i).style("fill",n)}}});var _="$radarPoints";Ya(n.prototype,{initRadar:function initRadar(){var t=this,e=t.config;t.hasType("radar")&&(t.radars=t.main.select(".".concat(M.chart)).append("g").attr("class",M.chartRadars),t.radars.levels=t.radars.append("g").attr("class",M.levels),t.radars.axes=t.radars.append("g").attr("class",M.axis),t.radars.shapes=t.radars.append("g").attr("class",M.shapes),t.maxValue=e.radar_axis_max||t.getMinMaxData().max[0].value)},getRadarSize:function getRadarSize(){var t=this.config.axis_x_categories.length<4?-20:10,e=(Math.min(this.arcWidth,this.arcHeight)-t)/2;return[e,e]},updateTargetsForRadar:function updateTargetsForRadar(t){var e=this.config;Ja(e.axis_x_categories)&&(e.axis_x_categories=fb(0,eb("max",t.map(function(t){return t.values.length})))),this.generateRadarPoints()},getRadarPosition:function getRadarPosition(e,a,i,n){var r=this.config,t=_slicedToArray(this.getRadarSize(),2),o=t[0],s=t[1],c=r.axis_x_categories.length,l=r.radar_direction_clockwise,u=$a(e).map(function(t){return function getPosition(t,e,a,i,n,r){var o=t&&0<i?a-i:i,s=2*Math.PI;return n*(1-r*("x"===e?Math.sin:Math.cos)(o*s/a))}(l,t,c,a,Da(i)?i:"x"===e?o:s,Ba(n)?n:r.radar_size_ratio)});return 1===u.length?u[0]:u},generateRadarPoints:function generateRadarPoints(){var a=this,t=a.data.targets,e=_slicedToArray(a.getRadarSize(),2),i=e[0],n=e[1],r=a.getCache(_)||{},o=r._size;o&&(o.width===i||o.height===n)||(t.forEach(function(t){r[t.id]=t.values.map(function(t,e){return a.getRadarPosition(["x","y"],e,void 0,a.getRatio("radar",t))})}),r._size={width:i,height:n},a.addCache(_,r))},redrawRadar:function redrawRadar(t,e){var a=this,i=a.getTranslate("radar");i&&(a.radars.attr("transform",i),a.main.selectAll(".".concat(M.circles)).attr("transform",i),a.main.select(".".concat(M.chartTexts)).attr("transform",i),a.generateRadarPoints(),a.updateRadarLevel(),a.updateRadarAxes(),a.updateRadarShape(t,e))},generateGetRadarPoints:function generateGetRadarPoints(){var i=this.getCache(_);return function(t,e){var a=i[t.id][e];return[a,a,a,a]}},updateRadarLevel:function updateRadarLevel(){var a=this,t=a.config,e=_slicedToArray(a.getRadarSize(),2),i=e[0],n=e[1],r=t.radar_level_depth,o=t.axis_x_categories.length,s=t.radar_level_text_show,c=a.radars.levels,l=fb(0,r),u=t.radar_size_ratio*Math.min(i,n),d=l.map(function(t){return(t+1)/r*u}),g=t.radar_level_text_format,h=l.map(function(t){var e=d[t];return fb(0,o).map(function(t){return a.getRadarPosition(["x","y"],t,e,1).join(",")}).join(" ")}),f=c.selectAll(".".concat(M.level)).data(l);f.exit().remove();var p=f.enter().append("g").attr("class",function(t,e){return"".concat(M.level," ").concat(M.level,"-").concat(e)});p.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),s&&(c.select("text").empty()&&c.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return g(0)}),p.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(t){return g(a.maxValue/l.length*(t+1))})),p.merge(f).attr("transform",function(t){return"translate(".concat(i-d[t],", ").concat(n-d[t],")")}).selectAll("polygon").attr("points",function(t){return h[t]}),s&&c.selectAll("text").attr("x",function(t){return Ca(t)?i:h[t].split(",")[0]}).attr("y",function(t){return Ca(t)?n:0})},updateRadarAxes:function updateRadarAxes(){var i=this,t=i.config,e=_slicedToArray(i.getRadarSize(),2),n=e[0],r=e[1],a=t.axis_x_categories,o=i.radars.axes.selectAll("g").data(a);o.exit().remove();var s=o.enter().append("g").attr("class",function(t,e){return"".concat(M.axis,"-").concat(e)});if(t.radar_axis_line_show&&s.append("line"),t.radar_axis_text_show&&s.append("text"),o=s.merge(o),t.radar_axis_line_show&&o.select("line").attr("x1",n).attr("y1",r).attr("x2",function(t,e){return i.getRadarPosition("x",e)}).attr("y2",function(t,e){return i.getRadarPosition("y",e)}),t.radar_axis_text_show){var c=t.radar_axis_text_position,l=c.x,u=void 0===l?0:l,d=c.y,g=void 0===d?0:d;o.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(t){t.each(function(t){Ra(Object(B.select)(this),t+"",[-.6,1.2])})}).datum(function(t,e){return{index:e}}).attr("transform",function(t){Ca(this.width)&&(this.width=this.getBoundingClientRect().width/2);var e=i.getRadarPosition("x",t.index,void 0,1),a=Math.round(i.getRadarPosition("y",t.index,void 0,1));return n<e?e+=this.width+u:Math.round(e)<n&&(e-=this.width+u),r<a?(a/2===r&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),a+=g):a<r&&(a-=g),"translate(".concat(e," ").concat(a,")")})}i.bindEvent()},bindEvent:function bindEvent(){var a=this,i=this;if(i.config.interaction_enabled){var n="mouse"===i.inputType,r=function(){var t=B.event.target;/tspan/i.test(t.tagName)&&(t=t.parentNode);var e=Object(B.select)(t).datum();return e&&1===Object.keys(e).length?e.index:void 0},t=function(){var t=r(),e=Ca(t);(n||e)&&(a.hideTooltip(),a.unexpandCircles(),n?i.setOverOut(!1,t):e&&i.callOverOutForTouch())};i.radars.select(".".concat(M.axis)).on(n?"mouseover ":"touchstart",function(){if(!i.transiting){var t=r();i.selectRectForSingle(i.svg.node(),null,t),n?i.setOverOut(!0,t):i.callOverOutForTouch(t)}}).on("mouseout",n?t:null),n||i.svg.on("touchstart",t)}},updateRadarShape:function updateRadarShape(t,e){var a=this,i=a.data.targets,n=a.getCache(_),r=a.radars.shapes.selectAll("polygon").data(i),o=r.enter().append("g").attr("class",a.classChartRadar.bind(a));r.exit().transition().duration(e).remove(),o.append("polygon").merge(r).transition().duration(t).style("fill",function(t){return a.color(t)}).style("stroke",function(t){return a.color(t)}).attr("points",function(t){return n[t.id].join(" ")})},radarCircleX:function radarCircleX(t){return this.getCache(_)[t.id][t.index][0]},radarCircleY:function radarCircleY(t){return this.getCache(_)[t.id][t.index][1]}}),Ya(n.prototype,{initText:function initText(){this.main.select(".".concat(M.chart)).append("g").attr("class",M.chartTexts),this.mainText=Object(B.selectAll)([])},updateTargetsForText:function updateTargetsForText(t){var e=this,a=e.classChartText.bind(e),i=e.classTexts.bind(e),n=e.classFocus.bind(e);e.main.select(".".concat(M.chartTexts)).selectAll(".".concat(M.chartText)).data(t).attr("class",function(t){return a(t)+n(t)}).enter().append("g").attr("class",a).style("opacity","0").style("pointer-events","none").append("g").attr("class",i)},updateText:function updateText(t){var e=this,n=this,a=n.config,i=n.labelishData.bind(n),r=n.classText.bind(n);n.mainText=n.main.selectAll(".".concat(M.texts)).selectAll(".".concat(M.text)).data(function(t){return e.isRadarType(t)?t.values:i(t)}),n.mainText.exit().transition().duration(t).style("fill-opacity","0").remove(),n.mainText=n.mainText.enter().append("text").merge(n.mainText).attr("class",r).attr("text-anchor",function(t){return a.axis_rotated?t.value<0?"end":"start":"middle"}).style("fill",n.updateTextColor.bind(n)).style("fill-opacity","0").text(function(t,e,a){var i=n.isBubbleZType(t)?n.getBubbleZData(t.value,"z"):t.value;return n.dataLabelFormat(t.id)(i,t.id,e,a)})},updateTextColor:function updateTextColor(t){var e,a=this.config.data_labels_colors;return Aa(a)?e=a:Ma(a)&&(e=a[t.id]),e||this.color(t)},redrawText:function redrawText(e,a,t,i){var n=this,r=Wa(),o=t?0:n.opacityForText.bind(n);return[this.mainText.each(function(){var t=Object(B.select)(this);(i&&t.attr("x")?t.transition(r):t).attr("x",e).attr("y",a).style("fill",n.updateTextColor.bind(n)).style("fill-opacity",o)})]},getTextRect:function getTextRect(t,e){var a=t.node?t.node():t;/text/i.test(a.tagName)||(a=a.querySelector("text"));var i=a.textContent,n="$".concat(i.replace(/\W/g,"_")),r=this.getCache(n);return r||(this.svg.append("text").style("visibility","hidden").style("font",Object(B.select)(a).style("font")).classed(e,!0).text(i).call(function(t){r=Va(t.node())}).remove(),this.addCache(n,r)),r},generateXYForText:function generateXYForText(e,t){var i=this,a=Object.keys(e),n={},r=t?i.getXForText:i.getYForText;return i.hasType("radar")&&a.push("radar"),a.forEach(function(t){n[t]=i["generateGet".concat(Za(t),"Points")](e[t],!1)}),function(t,e){var a=(i.isAreaType(t)?"area":i.isBarType(t)&&"bar")||i.isRadarType(t)&&"radar"||"line";return r.call(i,n[a](t,e),t,this)}},getCenteredTextPos:function getCenteredTextPos(t,e,a){var i=this.config,n=i.axis_rotated;if(i.data_labels.centered&&this.isBarType(t)){var r=Va(a),o=0<=t.value;if(n){var s=(o?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+r.width/2;return o?-s-3:2+s}var c=(o?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+r.height/2;return o?c:-c-2}return 0},getTextPos:function getTextPos(t,e){var a=this.config.data_labels_position;return(t in a?a[t]:a)[e]||0},getXForText:function getXForText(t,e,a){var i,n,r=this,o=r.config.axis_rotated;if(i=o?(n=r.isBarType(e)?4:6,t[2][1]+n*(e.value<0?-1:1)):r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value)if(i>r.width){var s=Va(a).width;i=r.width-s}else i<0&&(i=4);return o&&(i+=r.getCenteredTextPos(e,t,a)),i+r.getTextPos(e.id,"x")},getYForText:function getYForText(t,e,a){var i,n=this,r=n.config,o=r.axis_rotated,s=r.point_r,c=Va(a),l=3;if(o)i=(t[0][0]+t[2][0]+.6*c.height)/2;else if(i=t[2][1],Ba(s)&&5<s&&(n.isLineType(e)||n.isScatterType(e))&&(l+=r.point_r/2.3),e.value<0||0===e.value&&!n.hasPositiveValue&&n.hasNegativeValue)i+=c.height+(n.isBarType(e)?-l:l);else{var u=2*-l;n.isBarType(e)?u=-l:n.isBubbleType(e)&&(u=l),i+=u}if(null===e.value&&!o){var d=c.height;i<d?i=d:i>this.height&&(i=this.height-4)}return o||(i+=n.getCenteredTextPos(e,t,a)),i+n.getTextPos(e.id,"y")}});var y={Area:["area","area-spline","area-spline-range","area-line-range","area-step"],AreaRange:["area-spline-range","area-line-range"],Arc:["pie","donut","gauge","radar"],Line:["line","spline","area","area-spline","area-spline-range","area-line-range","step","area-step"],Step:["step","area-step"],Spline:["spline","area-spline","area-spline-range"]};Ya(n.prototype,{setTargetType:function setTargetType(t,e){var a=this,i=a.config;a.mapToTargetIds(t).forEach(function(t){a.withoutFadeIn[t]=e===i.data_types[t],i.data_types[t]=e}),t||(i.data_type=e)},hasType:function hasType(a,t){var i=this.config.data_types,e=t||this.data.targets,n=!1;return e&&e.length?e.forEach(function(t){var e=i[t.id];(e&&0<=e.indexOf(a)||!e&&"line"===a)&&(n=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===a&&(n=!0)}):n=this.config.data_type===a,n},hasTypeOf:function hasTypeOf(t,e,a){var i=this,n=2<arguments.length&&void 0!==a?a:[];return!y[t].filter(function(t){return-1===n.indexOf(t)}).every(function(t){return!i.hasType(t,e)})},isTypeOf:function isTypeOf(t,e){var a=Aa(t)?t:t.id,i=this.config.data_types[a];return La(e)?0<=e.indexOf(i):i===e},hasArcType:function hasArcType(t,e){return this.hasTypeOf("Arc",t,e)},isLineType:function isLineType(t){var e=Aa(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,y.Line)},isStepType:function isStepType(t){return this.isTypeOf(t,y.Step)},isSplineType:function isSplineType(t){return this.isTypeOf(t,y.Spline)},isAreaType:function isAreaType(t){return this.isTypeOf(t,y.Area)},isAreaRangeType:function isAreaRangeType(t){return this.isTypeOf(t,y.AreaRange)},isBarType:function isBarType(t){return this.isTypeOf(t,"bar")},isBubbleType:function isBubbleType(t){return this.isTypeOf(t,"bubble")},isScatterType:function isScatterType(t){return this.isTypeOf(t,"scatter")},isPieType:function isPieType(t){return this.isTypeOf(t,"pie")},isGaugeType:function isGaugeType(t){return this.isTypeOf(t,"gauge")},isDonutType:function isDonutType(t){return this.isTypeOf(t,"donut")},isRadarType:function isRadarType(t){return this.isTypeOf(t,"radar")},isArcType:function isArcType(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function isCirclePoint(){var t=this.config,e=t.point_pattern;return"circle"===t.point_type&&(!e||La(e)&&0===e.length)},lineData:function lineData(t){return this.isLineType(t)?[t]:[]},arcData:function arcData(t){return this.isArcType(t.data)?[t]:[]},barData:function barData(t){return this.isBarType(t)?t.values:[]},labelishData:function labelishData(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isRadarType(t)?t.values:[]},barLineBubbleData:function barLineBubbleData(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function isInterpolationType(t){return 0<=["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)}});function xb(t){return ya(t.position)||"end"}function yb(t){return"start"===t.position?4:"middle"===t.position?0:-4}function zb(a,i,n){return function(t){var e=a?0:i;return"start"===t.position?e=a?-n:0:"middle"===t.position&&(e=(a?-n:i)/2),e}}Ya(n.prototype,{initGrid:function initGrid(){this.xgrid=Object(B.selectAll)([]),this.initGridLines(),this.initXYFocusGrid()},initGridLines:function initGridLines(){var t=this,e=t.config;(e.grid_x_lines.length||e.grid_y_lines.length)&&(t.gridLines=t.main.insert("g",".".concat(M.chart).concat(e.grid_lines_front?" + *":"")).attr("clip-path",t.clipPathForGrid).attr("class","".concat(M.grid," ").concat(M.gridLines)),t.gridLines.append("g").attr("class",M.xgridLines),t.gridLines.append("g").attr("class",M.ygridLines),t.xgridLines=Object(B.selectAll)([]))},updateXGrid:function updateXGrid(t){function iW(t){return((a.zoomScale||a.x)(t)+r)*(i?-1:1)}var a=this,e=a.config,i=e.axis_rotated,n=a.generateGridData(e.grid_x_type,a.x),r=a.isCategorized()?a.xAxis.tickOffset():0;a.xgridAttr=i?{x1:0,x2:a.width,y1:iW,y2:iW}:{x1:iW,x2:iW,y1:0,y2:a.height},a.xgrid=a.main.select(".".concat(M.xgrids)).selectAll(".".concat(M.xgrid)).data(n),a.xgrid.exit().remove(),a.xgrid=a.xgrid.enter().append("line").attr("class",M.xgrid).merge(a.xgrid),t||a.xgrid.each(function(){var e=Object(B.select)(this);Object.keys(a.xgridAttr).forEach(function(t){e.attr(t,a.xgridAttr[t]).style("opacity",function(){return e.attr(i?"y1":"x1")===(i?a.height:0)?"0":"1"})})})},updateYGrid:function updateYGrid(){function qW(t){return Math.ceil(e.y(t))}var e=this,t=e.config,a=t.axis_rotated,i=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks);e.ygrid=e.main.select(".".concat(M.ygrids)).selectAll(".".concat(M.ygrid)).data(i),e.ygrid.exit().remove(),e.ygrid=e.ygrid.enter().append("line").attr("class",M.ygrid).merge(e.ygrid),e.ygrid.attr("x1",a?qW:0).attr("x2",a?qW:e.width).attr("y1",a?0:qW).attr("y2",a?e.height:qW),e.smoothLines(e.ygrid,"grid")},updateGrid:function updateGrid(t){var e=this;e.gridLines||e.initGridLines(),e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),e.main.select("line.".concat(M.xgridFocus)).style("visibility","hidden"),e.updateXGridLines(t),e.updateYGridLines(t)},updateXGridLines:function updateXGridLines(t){var e=this,a=e.main,i=e.config,n=i.axis_rotated;i.grid_x_show&&e.updateXGrid(),e.xgridLines=a.select(".".concat(M.xgridLines)).selectAll(".".concat(M.xgridLine)).data(i.grid_x_lines),e.xgridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.xgridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",n?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),e.xgridLines=r.merge(e.xgridLines),e.xgridLines.attr("class",function(t){return"".concat(M.xgridLine," ").concat(t.class||"").trim()}).select("text").attr("text-anchor",xb).attr("dx",yb).transition().duration(t).text(function(t){return t.text}).transition().style("opacity","1")},updateYGridLines:function updateYGridLines(t){var e=this,a=e.main,i=e.config,n=i.axis_rotated;i.grid_y_show&&e.updateYGrid(),e.ygridLines=a.select(".".concat(M.ygridLines)).selectAll(".".concat(M.ygridLine)).data(i.grid_y_lines),e.ygridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.ygridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",n?"rotate(-90)":"").style("opacity","0"),e.ygridLines=r.merge(e.ygridLines);var o=e.yv.bind(e);e.ygridLines.attr("class",function(t){return"".concat(M.ygridLine," ").concat(t.class||"").trim()}).select("line").transition().duration(t).attr("x1",n?o:0).attr("x2",n?o:e.width).attr("y1",n?0:o).attr("y2",n?e.height:o).transition().style("opacity","1"),e.ygridLines.select("text").attr("text-anchor",xb).attr("dx",yb).transition().duration(t).attr("dy",-5).attr("x",zb(n,e.width,e.height)).attr("y",o).text(function(t){return t.text}).transition().style("opacity","1")},redrawGrid:function redrawGrid(t){var e=this,a=e.config.axis_rotated,i=e.xv.bind(e),n=e.xgridLines.select("line"),r=e.xgridLines.select("text");return n=(t?n.transition():n).attr("x1",a?0:i).attr("x2",a?e.width:i).attr("y1",a?i:0).attr("y2",a?i:e.height),r=(t?r.transition():r).attr("x",zb(!a,e.width,e.height)).attr("y",i).text(function(t){return t.text}),[(t?n.transition():n).style("opacity","1"),(t?r.transition():r).style("opacity","1")]},initXYFocusGrid:function initXYFocusGrid(){var t=this,e=t.config,a=e.grid_front,i=".".concat(M[a&&t.gridLines?"gridLines":"chart"]).concat(a?" + *":"");t.grid=t.main.insert("g",i).attr("clip-path",t.clipPathForGrid).attr("class",M.grid),e.grid_x_show&&t.grid.append("g").attr("class",M.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",M.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",M.xgridFocus).append("line").attr("class",M.xgridFocus)},showXGridFocus:function showXGridFocus(t){var e=this,a=e.config,i=a.axis_rotated,n=t.filter(function(t){return t&&ya(e.getBaseValue(t))}),r=e.main.selectAll("line.".concat(M.xgridFocus)),o=e.xx.bind(e);!a.tooltip_show||e.hasType("bubble")||e.hasType("scatter")||e.hasArcType()||(r.style("visibility","visible").data([n[0]]).attr(i?"y1":"x1",o).attr(i?"y2":"x2",o),e.smoothLines(r,"grid"))},hideXGridFocus:function hideXGridFocus(){this.main.select("line.".concat(M.xgridFocus)).style("visibility","hidden")},updateXgridFocus:function updateXgridFocus(){var t=this.config.axis_rotated;this.main.select("line.".concat(M.xgridFocus)).attr("x1",t?0:-10).attr("x2",t?this.width:-10).attr("y1",t?-10:0).attr("y2",t?-10:this.height)},generateGridData:function generateGridData(t,e){var a=this.main.select(".".concat(M.axisX)).selectAll(".tick").size(),i=[];if("year"===t)for(var n=this.getXDomain(),r=n[0].getFullYear(),o=n[1].getFullYear(),s=r;s<=o;s++)i.push(new Date("".concat(s,"-01-01 00:00:00")));else(i=e.ticks(10)).length>a&&(i=i.filter(function(t){return(t+"").indexOf(".")<0}));return i},getGridFilterToRemove:function getGridFilterToRemove(t){return t?function(e){var a=!1;return(La(t)?t.concat():[t]).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(a=!0)}),a}:function(){return!0}},removeGridLines:function removeGridLines(t,e){var a=this.config,i=this.getGridFilterToRemove(t),n=e?M.xgridLines:M.ygridLines,r=e?M.xgridLine:M.ygridLine;this.main.select(".".concat(n)).selectAll(".".concat(r)).filter(i).transition().duration(a.transition_duration).style("opacity","0").remove();var o="grid_".concat(e?"x":"y","_lines");a[o]=a[o].filter(function toShow(t){return!i(t)})}}),Ya(n.prototype,{initTooltip:function initTooltip(){var e=this,a=e.config,t=a.tooltip_contents.bindto;if(e.tooltip=Object(B.select)(t),e.tooltip.empty()&&(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",M.tooltipContainer).style("position","absolute").style("display","none")),a.tooltip_init_show){if(e.isTimeSeries()&&Aa(a.tooltip_init_x)){var i,n,r=e.data.targets[0];for(a.tooltip_init_x=e.parseDate(a.tooltip_init_x),i=0;(n=r.values[i])&&n.x-a.tooltip_init_x!=0;i++);a.tooltip_init_x=i}e.tooltip.html(e.getTooltipHTML(e.data.targets.map(function(t){return e.addName(t.values[a.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType(null,["radar"])),e.color)),t||e.tooltip.style("top",a.tooltip_init_position.top).style("left",a.tooltip_init_position.left).style("display","block")}},getTooltipHTML:function getTooltipHTML(){for(var t,e,a=this,i=a.config,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return za(i.tooltip_contents)?(t=i.tooltip_contents).call.apply(t,[a].concat(r)):(e=a).getTooltipContent.apply(e,r)},getTooltipContent:function getTooltipContent(t,e,a,i){function ZX(t){return n.isBubbleZType(t)?n.getBubbleZData(t.value,"z"):n.getBaseValue(t)}var n=this,r=n.config,o=r.tooltip_format_title||e,s=r.tooltip_format_name||function(t){return t},c=r.tooltip_format_value||(n.isStackNormalized()?function(t,e){return"".concat((100*e).toFixed(2),"%")}:a),l=r.tooltip_order,u=n.levelColor?function(t){return n.levelColor(t.value)}:function(t){return i(t)},d=r.tooltip_contents,g=d.template,h=n.mapToTargetIds();if(null===l&&r.data_groups.length){var f=n.orderTargets(n.data.targets).map(function(t){return t.id}).reverse();t.sort(function(t,e){var a=t?t.value:null,i=e?e.value:null;return 0<a&&0<i&&(a=t.id?f.indexOf(t.id):null,i=e.id?f.indexOf(e.id):null),a-i})}else/^(asc|desc)$/.test(l)?t.sort(function(t,e){var a=t?ZX(t):null,i=e?ZX(e):null;return"asc"===l?a-i:i-a}):za(l)&&t.sort(l);var p,x,v,m,_,y=n.getTooltipContentTemplate(g),b=t.length;for(_=0;_<b;_++)if((x=t[_])&&(ZX(x)||0===ZX(x))){if(Ca(p)){var T=Qa(o?o(x.x):x.x);p=hb(y[0],{CLASS_TOOLTIP:M.tooltip,TITLE:ya(T)?g?T:'<tr><th colspan="2">'.concat(T,"</th></tr>"):""})}if(v=[x.ratio,x.id,x.index,t],m=Qa(c.apply(void 0,[ZX(x)].concat(_toConsumableArray(v)))),n.isAreaRangeType(x)){var A=_slicedToArray(["high","low"].map(function(t){return Qa(c.apply(void 0,[n.getAreaRangeData(x,t)].concat(_toConsumableArray(v))))}),2),w=A[0],L=A[1];m="<b>Mid:</b> ".concat(m," <b>High:</b> ").concat(w," <b>Low:</b> ").concat(L)}if(void 0!==m)if("continue"===function(){if(null===x.name)return"continue";var t=Qa(s.apply(void 0,[x.name].concat(_toConsumableArray(v)))),e=u(x),a={CLASS_TOOLTIP_NAME:M.tooltipName+n.getTargetSelectorSuffix(x.id),COLOR:g||!n.patterns?e:'<svg><rect style="fill:'.concat(e,'" width="10" height="10"></rect></svg>'),NAME:t,VALUE:m};if(g&&Ma(d.text)){var i=h.indexOf(x.id);Object.keys(d.text).forEach(function(t){a[t]=d.text[t][i]})}p+=hb(y[1],a)}())continue}return"".concat(p,"</table>")},getTooltipContentTemplate:function getTooltipContentTemplate(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'.concat(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>','{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>')).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function tooltipPosition(t,e,a,i){var n=this,r=n.config,o=_slicedToArray(Object(B.mouse)(i),2),s=o[0],c=o[1],l=n.getSvgLeft(!0),u=l+n.currentWidth-n.getCurrentPaddingRight();if(c+=20,n.hasArcType()){"touch"===n.inputType||n.hasType("radar")||(c+=n.height/2,s+=(n.width-(n.isLegendRight?n.getLegendWidth():0))/2)}else{var d=n.x(t[0].x);r.axis_rotated?(c=d+20,s+=l+100,u-=l):(c-=5,s=l+n.getCurrentPaddingLeft(!0)+20+(n.zoomScale?s:d))}var g=s+e;return u<g&&(s-=g-u+20),c+a>n.currentHeight&&(c-=a+30),c<0&&(c=0),{top:c,left:s}},showTooltip:function showTooltip(t,e){var a=this,i=a.config,n=i.tooltip_contents.bindto,r=a.hasArcType(null,["radar"]),o=t.filter(function(t){return t&&ya(a.getBaseValue(t))}),s=i.tooltip_position||a.tooltipPosition;if(0!==o.length&&i.tooltip_show){var c=a.tooltip.datum(),l=JSON.stringify(t),u=c&&c.width||0,d=c&&c.height||0;if(!c||c.current!==l){var g=t.concat().sort()[0].index;Pa(i.tooltip_onshow,a),a.tooltip.html(a.getTooltipHTML(t,a.axis.getXAxisTickFormat(),a.getYFormat(r),a.color)).style("display",null).style("visibility",null).datum({index:g,current:l,width:u=a.tooltip.property("offsetWidth"),height:d=a.tooltip.property("offsetHeight")}),Pa(i.tooltip_onshown,a),a._handleLinkedCharts(!0,g)}if(!n){var h=s.call(this,o,u,d,e);a.tooltip.style("top","".concat(h.top,"px")).style("left","".concat(h.left,"px"))}}},hideTooltip:function hideTooltip(t){var e=this.config;e.tooltip_doNotHide&&!t||(Pa(e.tooltip_onhide,this),this.tooltip.style("display","none").style("visibility","hidden").datum(null),Pa(e.tooltip_onhidden,this))},_handleLinkedCharts:function _handleLinkedCharts(s,c){var l=this;if(l.config.tooltip_linked){var u=l.config.tooltip_linked_name;(l.api.internal.charts||[]).forEach(function(t){if(t!==l.api){var e=t.internal.config,a=e.tooltip_linked,i=e.tooltip_linked_name,n=k.body.contains(t.element);if(a&&u===i&&n){var r=t.internal.tooltip.data()[0],o=c!==(r&&r.index);try{s&&o?t.tooltip.show({index:c}):s||t.tooltip.hide()}catch(t){}}}})}}}),Ya(n.prototype,{initLegend:function initLegend(){var t=this,e=t.config;t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g"),e.legend_show?(t.legend.attr("transform",t.getTranslate("legend")),t.updateLegend()):(t.legend.style("visibility","hidden"),t.hiddenLegendIds=t.mapToIds(t.data.targets))},updateLegend:function updateLegend(t,e,a){var i=this,n=i.config,r=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};r.withTransition=Na(r,"withTransition",!0),r.withTransitionForTransform=Na(r,"withTransitionForTransform",!0),n.legend_contents_bindto&&n.legend_contents_template?i.updateLegendTemplate():i.updateLegendElement(t||i.mapToIds(i.data.targets),r,a),i.legend.selectAll(".".concat(M.legendItem)).classed(M.legendItemHidden,function(t){return!i.isTargetToShow(t)}),i.updateScales(!1,!i.zoomScale),i.updateSvgSize(),i.transformAll(r.withTransitionForTransform,a),i.legendHasRendered=!0},updateLegendTemplate:function updateLegendTemplate(){var a=this,t=a.config,e=Object(B.select)(t.legend_contents_bindto),i=t.legend_contents_template;if(!e.empty()){var n=a.mapToIds(a.data.targets),r=[],o="";n.forEach(function(t){var e=za(i)?i.call(a,t,a.color(t),a.api.data(t)[0].values):hb(i,{COLOR:a.color(t),TITLE:t});e&&(r.push(t),o+=e)});var s=e.html(o).selectAll(function(){return this.childNodes}).data(r);a.setLegendItem(s),a.legend=e}},updateSizeForLegend:function updateSizeForLegend(t){var e=this,a=e.config,i=t.width,n=t.height,r={top:e.isLegendTop?e.getCurrentPaddingTop()+a.legend_inset_y+5.5:e.currentHeight-n-e.getCurrentPaddingBottom()-a.legend_inset_y,left:e.isLegendLeft?e.getCurrentPaddingLeft()+a.legend_inset_x+.5:e.currentWidth-i-e.getCurrentPaddingRight()-a.legend_inset_x+.5};e.margin3={top:e.isLegendRight?0:e.isLegendInset?r.top:e.currentHeight-n,right:NaN,bottom:0,left:e.isLegendRight?e.currentWidth-i:e.isLegendInset?r.left:0}},transformLegend:function transformLegend(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},updateLegendStep:function updateLegendStep(t){this.legendStep=t},updateLegendItemWidth:function updateLegendItemWidth(t){this.legendItemWidth=t},updateLegendItemHeight:function updateLegendItemHeight(t){this.legendItemHeight=t},updateLegendItemColor:function updateLegendItemColor(t,e){this.legend.select(".".concat(M.legendItem,"-").concat(t," line")).style("stroke",e)},getLegendWidth:function getLegendWidth(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},getLegendHeight:function getLegendHeight(){var t=this;return t.config.legend_show?t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1):0},opacityForLegend:function opacityForLegend(t){return t.classed(M.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function opacityForUnfocusedLegend(t){return t.classed(M.legendItemHidden)?null:"0.3"},toggleFocusLegend:function toggleFocusLegend(t,e){var a=this,i=a.mapToTargetIds(t);a.legend.selectAll(".".concat(M.legendItem)).filter(function(t){return 0<=i.indexOf(t)}).classed(M.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?a.opacityForLegend:a.opacityForUnfocusedLegend).call(a,Object(B.select)(this))})},revertLegend:function revertLegend(){var t=this;t.legend.selectAll(".".concat(M.legendItem)).classed(M.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(Object(B.select)(this))})},showLegend:function showLegend(t){var e=this,a=e.config;a.legend_show||(a.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegend()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(Object(B.select)(this))})},hideLegend:function hideLegend(t){var e=this,a=e.config;a.legend_show&&Ja(t)&&(a.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},clearLegendItemTextBoxCache:function clearLegendItemTextBoxCache(){this.legendItemTextBox={}},setLegendItem:function setLegendItem(t){var a=this,e=a.config,i="touch"===a.inputType;t.attr("class",function(t){var e=Object(B.select)(this);return(!e.empty()&&e.attr("class")||"")+a.generateClass(M.legendItem,t)}).style("visibility",function(t){return a.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){Pa(e.legend_item_onclick,a,t)||(B.event.altKey?(a.api.hide(),a.api.show(t)):(a.api.toggle(t),!i&&a.isTargetToShow(t)?a.api.focus(t):a.api.revert())),i&&a.hideTooltip()}),i||t.on("mouseout",function(t){Pa(e.legend_item_onout,a,t)||(Object(B.select)(this).classed(M.legendItemFocused,!1),a.api.revert())}).on("mouseover",function(t){Pa(e.legend_item_onover,a,t)||(Object(B.select)(this).classed(M.legendItemFocused,!0),!a.transiting&&a.isTargetToShow(t)&&a.api.focus(t))})},updateLegendElement:function updateLegendElement(t,e){function c_(t,e,a){function F_(t,e){e||(i=(l-x-c)/2)<10&&(i=(l-c)/2,x=0,T++),b[t]=T,y[T]=d.isLegendInset?10:i,v[t]=x,x+=c}var i,n=a===w.length-1,r=function(t,e){return d.legendItemTextBox[e]||(d.legendItemTextBox[e]=d.getTextRect(t,M.legendItem)),d.legendItemTextBox[e]}(t,e),o=r.width+h+(n&&!A?0:10)+g.legend_padding,s=r.height+4,c=A?s:o,l=A?d.getLegendHeight():d.getLegendWidth();if(0===a&&(p=f=T=x=0),g.legend_show&&!d.isLegendToShow(e))return m[e]=0,_[e]=0,b[e]=0,void(v[e]=0);m[e]=o,_[e]=s,(!f||f<=o)&&(f=o),(!p||p<=s)&&(p=s);var u=A?p:f;g.legend_equally?(Object.keys(m).forEach(function(t){return m[t]=f}),Object.keys(_).forEach(function(t){return _[t]=p}),(i=(l-u*w.length)/2)<10?(T=x=0,w.forEach(function(t){return F_(t)})):F_(e,!0)):F_(e)}var a,i,n,d=this,g=d.config,h=g.legend_item_tile_width+5,f=0,p=0,x=0,v={},m={},_={},y=[0],b={},T=0,A=d.isLegendRight||d.isLegendInset,w=t.filter(function(t){return!Da(g.data_names[t])||null!==g.data_names[t]}),r=e.withTransition;d.isLegendInset&&(T=g.legend_inset_step?g.legend_inset_step:w.length,d.updateLegendStep(T)),i=d.isLegendRight?(a=function(t){return f*b[t]},function(t){return y[b[t]]+v[t]}):d.isLegendInset?(a=function(t){return f*b[t]+10},function(t){return y[b[t]]+v[t]}):(a=function(t){return y[b[t]]+v[t]},function(t){return p*b[t]});function d_(t,e){return a(t,e)+4+g.legend_item_tile_width}function e_(t,e){return a(t,e)}function f_(t,e){return a(t,e)-2}function g_(t,e){return a(t,e)-2+g.legend_item_tile_width}function h_(t,e){return i(t,e)+9}function i_(t,e){return i(t,e)-5}function j_(t,e){return i(t,e)+4}var o=-200,s=d.legend.selectAll(".".concat(M.legendItem)).data(w).enter().append("g");d.setLegendItem(s),s.append("text").text(function(t){return Da(g.data_names[t])?g.data_names[t]:t}).each(function(t,e){c_(this,t,e)}).style("pointer-events","none").attr("x",A?d_:o).attr("y",A?o:h_),s.append("rect").attr("class",M.legendItemEvent).style("fill-opacity","0").attr("x",A?e_:o).attr("y",A?o:i_);var c=d.config.legend_usePoint;if(c){var l=[];s.append(function(t){var e=Ka(g.point_pattern)?g.point_pattern:[g.point_type];-1===l.indexOf(t)&&l.push(t);var a=e[l.indexOf(t)%e.length];return"rectangle"===a&&(a="rect"),k.createElementNS(B.namespaces.svg,d.hasValidPointType(a)?a:"use")}).attr("class",M.legendItemPoint).style("fill",function(t){return d.color(t)}).style("pointer-events","none").attr("href",function(t,e,a){return"use"===a[e].nodeName.toLowerCase()?"#".concat(d.datetimeId,"-point-").concat(t):void 0})}else s.append("line").attr("class",M.legendItemTile).style("stroke",d.color).style("pointer-events","none").attr("x1",A?f_:o).attr("y1",A?o:j_).attr("x2",A?g_:o).attr("y2",A?o:j_).attr("stroke-width",g.legend_item_tile_height);n=d.legend.select(".".concat(M.legendBackground," rect")),d.isLegendInset&&0<f&&0===n.size()&&(n=d.legend.insert("g",".".concat(M.legendItem)).attr("class",M.legendBackground).append("rect"));var u=d.legend.selectAll("text").data(w).text(function(t){return Da(g.data_names[t])?g.data_names[t]:t}).each(function(t,e){c_(this,t,e)});(r?u.transition():u).attr("x",d_).attr("y",h_);var L=d.legend.selectAll("rect.".concat(M.legendItemEvent)).data(w);if((r?L.transition():L).attr("width",function(t){return m[t]}).attr("height",function(t){return _[t]}).attr("x",e_).attr("y",i_),c){var C=d.legend.selectAll(".".concat(M.legendItemPoint)).data(w);(r?C.transition():C).each(function(){var t,e,a,i=this.nodeName.toLowerCase(),n=d.config.point_r,r="x",o="y",s=2,c=2.5;if("circle"===i){var l=.2*n;r="cx",o="cy",t=n+l,s=2*n,c=-l}else if("rect"===i){var u=2.5*n;a=e=u,c=3}Object(B.select)(this).attr(r,function(t){return f_(t)+s}).attr(o,function(t){return j_(t)-c}).attr("r",t).attr("width",e).attr("height",a)})}else{var S=d.legend.selectAll("line.".concat(M.legendItemTile)).data(w);(r?S.transition():S).style("stroke",d.color).attr("x1",f_).attr("y1",j_).attr("x2",g_).attr("y2",j_)}n&&(r?n.transition():n).attr("height",d.getLegendHeight()-12).attr("width",f*(T+1)+10),d.updateLegendItemWidth(f),d.updateLegendItemHeight(p),d.updateLegendStep(T)}});function Ab(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"left",e=1<arguments.length?arguments[1]:void 0,a=Ba(e);return-1<t.indexOf("center")?a?e/2:"middle":-1<t.indexOf("right")?a?e:"end":a?0:"start"}Ya(n.prototype,{initTitle:function initTitle(){var t=this;if(t.config.title_text){t.title=t.svg.append("g");var e=t.title.append("text").style("text-anchor",Ab(t.config.title_position)).attr("class",M.title);Ra(e,t.config.title_text,[.3,1.5])}},redrawTitle:function redrawTitle(){var t=this;if(t.title){var e=t.yForTitle.call(t);/g/i.test(t.title.node().tagName)?t.title.attr("transform","translate(".concat(Ab(t.config.title_position,t.currentWidth),", ").concat(e,")")):t.title.attr("x",t.xForTitle.call(t)).attr("y",e)}},xForTitle:function xForTitle(){var t,e=this.config,a=e.title_position||"left";return/(right|center)/.test(a)?(t=this.currentWidth-this.getTextRect(this.title,M.title).width,0<=a.indexOf("right")?t-=e.title_padding.right||0:0<=a.indexOf("center")&&(t/=2)):t=e.title_padding.left||0,t},yForTitle:function yForTitle(){return(this.config.title_padding.top||0)+this.getTextRect(this.title,M.title).height},getTitlePadding:function getTitlePadding(){return this.yForTitle()+(this.config.title_padding.bottom||0)}}),Ya(n.prototype,{initClip:function initClip(){var t=this;t.clipId="".concat(t.datetimeId,"-clip"),t.clipIdForXAxis="".concat(t.clipId,"-xaxis"),t.clipIdForYAxis="".concat(t.clipId,"-yaxis"),t.clipIdForGrid="".concat(t.clipId,"-grid"),t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid)},getClipPath:function getClipPath(t){var e=this.config;if(!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t))return null;var a=!!l.navigator&&0<=l.navigator.appVersion.toLowerCase().indexOf("msie 9.");return"url(".concat(a?"":k.URL.split("#")[0],"#").concat(t,")")},appendClip:function appendClip(t,e){return t.append("clipPath").attr("id",e).append("rect")},getAxisClipX:function getAxisClipX(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},getAxisClipY:function getAxisClipY(t){return t?-20:-this.margin.top},getXAxisClipX:function getXAxisClipX(){return this.getAxisClipX(!this.config.axis_rotated)},getXAxisClipY:function getXAxisClipY(){return this.getAxisClipY(!this.config.axis_rotated)},getYAxisClipX:function getYAxisClipX(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},getYAxisClipY:function getYAxisClipY(){return this.getAxisClipY(this.config.axis_rotated)},getAxisClipWidth:function getAxisClipWidth(t){var e=Math.max(30,this.margin.left),a=Math.max(30,this.margin.right);return t?this.width+2+e+a:this.margin.left+20},getAxisClipHeight:function getAxisClipHeight(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},getXAxisClipWidth:function getXAxisClipWidth(){return this.getAxisClipWidth(!this.config.axis_rotated)},getXAxisClipHeight:function getXAxisClipHeight(){return this.getAxisClipHeight(!this.config.axis_rotated)},getYAxisClipWidth:function getYAxisClipWidth(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},getYAxisClipHeight:function getYAxisClipHeight(){return this.getAxisClipHeight(this.config.axis_rotated)}}),Ya(n.prototype,{initRegion:function initRegion(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",M.regions)},updateRegion:function updateRegion(t){var e=this,a=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select(".".concat(M.regions)).selectAll(".".concat(M.region)).data(a.regions),e.mainRegion.exit().transition().duration(t).style("opacity","0").remove(),e.mainRegion=e.mainRegion.enter().append("g").merge(e.mainRegion).attr("class",e.classRegion.bind(e)),e.mainRegion.append("rect").style("fill-opacity","0")},redrawRegion:function redrawRegion(t){var e=this,a=e.mainRegion.select("rect");return a=(t?a.transition():a).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),[(t?a.transition():a).style("fill-opacity",function(t){return ya(t.opacity)?t.opacity:"0.1"}).on("end",function(){Object(B.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function getRegionXY(t,e){var a=this,i=a.config.axis_rotated,n="x"===t,r="start",o=0;return"y"===e.axis||"y2"===e.axis?(n||(r="end"),(n?i:!i)&&r in e&&(o=(0,a[e.axis])(e[r]))):(n?!i:i)&&r in e&&(o=(a.zoomScale||a.x)(a.isTimeSeries()?a.parseDate(e[r]):e[r])),o},regionX:function regionX(t){return this.getRegionXY("x",t)},regionY:function regionY(t){return this.getRegionXY("y",t)},getRegionSize:function getRegionSize(t,e){var a=this,i=a.config.axis_rotated,n="width"===t,r=a[n?"regionX":"regionY"](e),o="end",s=a[t];return"y"===e.axis||"y2"===e.axis?(n||(o="start"),(n?i:!i)&&o in e&&(s=(0,a[e.axis])(e[o]))):(n?!i:i)&&o in e&&(s=(a.zoomScale||a.x)(a.isTimeSeries()?a.parseDate(e[o]):e[o])),s<r?0:s-r},regionWidth:function regionWidth(t){return this.getRegionSize("width",t)},regionHeight:function regionHeight(t){return this.getRegionSize("height",t)},isRegionOnX:function isRegionOnX(t){return!t.axis||"x"===t.axis}}),Ya(n.prototype,{drag:function drag(t){var h=this,e=h.config,a=h.main;if(!h.hasArcType()&&e.data_selection_enabled&&(!e.zoom_enabled||h.zoom.altDomain)&&e.data_selection_multiple){var i=_slicedToArray(h.dragStart,2),n=i[0],r=i[1],o=_slicedToArray(t,2),s=o[0],c=o[1],f=Math.min(n,s),p=Math.max(n,s),x=e.data_selection_grouped?h.margin.top:Math.min(r,c),v=e.data_selection_grouped?h.height:Math.max(r,c);a.select(".".concat(M.dragarea)).attr("x",f).attr("y",x).attr("width",p-f).attr("height",v-x),a.selectAll(".".concat(M.shapes)).selectAll(".".concat(M.shape)).filter(function(t){return e.data_selection_isselectable(t)}).each(function(t,e){var a,i=Object(B.select)(this),n=i.classed(M.SELECTED),r=i.classed(M.INCLUDED),o=!1;if(i.classed(M.circle)){var s=1*i.attr("cx"),c=1*i.attr("cy");a=h.togglePoint,o=f<s&&s<p&&x<c&&c<v}else{if(!i.classed(M.bar))return;var l=function(t){var e=t.getBoundingClientRect(),a=e.width,i=e.height,n=Sa(t);return{x:n[0].x,y:Math.min(n[0].y,n[1].y),width:a,height:i}}(this),u=l.x,d=(c=l.y,l.width),g=l.height;a=h.togglePath,o=!(p<u||u+d<f||v<c||c+g<x)}o^r&&(i.classed(M.INCLUDED,!r),i.classed(M.SELECTED,!n),a.call(h,!n,i,t,e))})}},dragstart:function dragstart(t){var e=this,a=e.config;e.hasArcType()||!a.data_selection_enabled||(e.dragStart=t,e.main.select(".".concat(M.chart)).append("rect").attr("class",M.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function dragend(){var t=this,e=t.config;t.hasArcType()||!e.data_selection_enabled||(t.main.select(".".concat(M.dragarea)).transition().duration(100).style("opacity","0").remove(),t.main.selectAll(".".concat(M.shape)).classed(M.INCLUDED,!1),t.setDragStatus(!1))},setDragStatus:function setDragStatus(t){this.dragging=t}});var b=a(12);Ya(n.prototype,{selectPoint:function selectPoint(t,e,a){var i=this,n=i.config,r=n.axis_rotated,o=(r?i.circleY:i.circleX).bind(i),s=(r?i.circleX:i.circleY).bind(i),c=i.pointSelectR.bind(i);Pa(n.data_onselected,i.api,e,t.node()),i.main.select(".".concat(M.selectedCircles).concat(i.getTargetSelectorSuffix(e.id))).selectAll(".".concat(M.selectedCircle,"-").concat(a)).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(M.selectedCircle,a)}).attr("cx",o).attr("cy",s).attr("stroke",i.color).attr("r",function(t){return 1.4*i.pointSelectR(t)}).transition().duration(100).attr("r",c)},unselectPoint:function unselectPoint(t,e,a){Pa(this.config.data_onunselected,this.api,e,t.node()),this.main.select(".".concat(M.selectedCircles).concat(this.getTargetSelectorSuffix(e.id))).selectAll(".".concat(M.selectedCircle,"-").concat(a)).transition().duration(100).attr("r",0).remove()},togglePoint:function togglePoint(t,e,a,i){this["".concat(t?"":"un","selectPoint")](e,a,i)},selectPath:function selectPath(t,e){var a=this,i=a.config;Pa(i.data_onselected,a,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return Object(b.rgb)(a.color(e)).brighter(.75)})},unselectPath:function unselectPath(t,e){var a=this,i=a.config;Pa(i.data_onunselected,a,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return a.color(e)})},togglePath:function togglePath(t,e,a,i){this["".concat(t?"":"un","selectPath")](e,a,i)},getToggle:function getToggle(t,e){return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){}:this.togglePoint},toggleShape:function toggleShape(t,e,a){var i,n=this,r=n.config,o=Object(B.select)(t),s=o.classed(M.SELECTED),c=n.getToggle(t,e).bind(n);if(r.data_selection_enabled&&r.data_selection_isselectable(e)){if(!r.data_selection_multiple){var l=".".concat(M.shapes);r.data_selection_grouped&&(l+=n.getTargetSelectorSuffix(e.id)),n.main.selectAll(l).selectAll(".".concat(M.shape)).each(function(t,e){var a=Object(B.select)(this);a.classed(M.SELECTED)&&c(!1,(i=a).classed(M.SELECTED,!1),t,e)})}i&&i.node()===o.node()||(o.classed(M.SELECTED,!s),c(!s,o,e,a))}}}),Ya(n.prototype,{initBrush:function initBrush(){var i=this,n=i.config,r=n.axis_rotated;i.brush=r?Object(c.brushY)():Object(c.brushX)();function B3(){i.redrawForBrush()}var a,t;i.brush.on("start",function(){"touch"===i.inputType&&i.hideTooltip(),B3()}).on("brush",B3).on("end",function(){a=i.x.orgDomain()}),i.brush.updateResize=function(){var e=this;t&&clearTimeout(t),t=setTimeout(function(){var t=e.getSelection();a&&Object(c.brushSelection)(t.node())&&e.move(t,a.map(i.subX.orgScale()))},0)},i.brush.update=function(){return 0===this.extent()()[1].filter(function(t){return isNaN(t)}).length&&i.context&&i.context.select(".".concat(M.brush)).call(this),this},i.brush.scale=function(t){var a=n.subchart_size_height||function(){var t=i.svg.select(".".concat(M.brush," .overlay")),e={width:0,height:0};return t.size()&&(e.width=+t.attr("width"),e.height=+t.attr("height")),e[r?"width":"height"]}(),e=i.getExtent();!e&&t.range?e=[[0,0],[t.range()[1],a]]:La(e)&&(e=e.map(function(t,e){return[t,0<e?a:e]})),r&&e[1].reverse(),this.extent(e),this.update()},i.brush.getSelection=function(){return i.context?i.context.select(".".concat(M.brush)):Object(B.select)([])}},initSubchart:function initSubchart(){var t=this,e=t.config,a=e.subchart_show?"visible":"hidden",i="".concat(t.clipId,"-subchart"),n=t.getClipPath(i);t.clipIdForSubchart=i,t.appendClip(t.defs,i),t.initBrush(),t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));var r=t.context;r.style("visibility",a),r.append("g").attr("clip-path",n).attr("class",M.chart),t.hasType("bar")&&r.select(".".concat(M.chart)).append("g").attr("class",M.chartBars),r.select(".".concat(M.chart)).append("g").attr("class",M.chartLines),r.append("g").attr("clip-path",n).attr("class",M.brush).call(t.brush),t.axes.subx=r.append("g").attr("class",M.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?a:"hidden")},updateTargetsForSubchart:function updateTargetsForSubchart(t){var e=this,a=e.context,i=e.config,n=e.classChartBar.bind(e),r=e.classBars.bind(e),o=e.classChartLine.bind(e),s=e.classLines.bind(e),c=e.classAreas.bind(e);if(i.subchart_show){var l=a.select(".".concat(M.chartBars)).selectAll(".".concat(M.chartBar)).data(t).attr("class",n);l.enter().append("g").style("opacity","0").attr("class",n).merge(l).append("g").attr("class",r);var u=a.select(".".concat(M.chartLines)).selectAll(".".concat(M.chartLine)).data(t).attr("class",o),d=u.enter().append("g").style("opacity","0").attr("class",o).merge(u);d.append("g").attr("class",s),e.hasType("area")&&d.append("g").attr("class",c),a.selectAll(".".concat(M.brush," rect")).attr(i.axis_rotated?"width":"height",i.axis_rotated?e.width2:e.height2)}},updateBarForSubchart:function updateBarForSubchart(t){var e=this;e.contextBar=e.context.selectAll(".".concat(M.bars)).selectAll(".".concat(M.bar)).data(e.barData.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity","0").remove(),e.contextBar=e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color).merge(e.contextBar).style("opacity",e.initialOpacity.bind(e))},redrawBarForSubchart:function redrawBarForSubchart(t,e,a){(e?this.contextBar.transition(Wa()).duration(a):this.contextBar).attr("d",t).style("opacity","1")},updateLineForSubchart:function updateLineForSubchart(t){var e=this;e.contextLine=e.context.selectAll(".".concat(M.lines)).selectAll(".".concat(M.line)).data(e.lineData.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity","0").remove(),e.contextLine=e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color).merge(e.contextLine).style("opacity",e.initialOpacity.bind(e))},redrawLineForSubchart:function redrawLineForSubchart(t,e,a){(e?this.contextLine.transition(Wa()).duration(a):this.contextLine).attr("d",t).style("opacity","1")},updateAreaForSubchart:function updateAreaForSubchart(t){var e=this;e.contextArea=e.context.selectAll(".".concat(M.areas)).selectAll(".".concat(M.area)).data(e.lineData.bind(e)),e.contextArea.exit().transition().duration(t).style("opacity","0").remove(),e.contextArea=e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=Object(B.select)(this).style("opacity"),"0"}).merge(e.contextArea).style("opacity","0")},redrawAreaForSubchart:function redrawAreaForSubchart(t,e,a){(e?this.contextArea.transition(Wa()).duration(a):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},redrawSubchart:function redrawSubchart(t,i,n){var r=this,e=r.config;r.context.style("visibility",e.subchart_show?"visible":"hidden"),e.subchart_show&&(B.event&&"zoom"===B.event.type&&r.brush.update(),t&&(Xa(r)||r.brush.update(),Object.keys(n.type).forEach(function(t){var e=Za(t),a=r["generateDraw".concat(e)](n.indices[t],!0);r["update".concat(e,"ForSubchart")](i),r["redraw".concat(e,"ForSubchart")](a,i,i)})))},redrawForBrush:function redrawForBrush(){var t=this;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,t.x.orgDomain())},transformContext:function transformContext(t,e){var a;e&&e.axisSubX?a=e.axisSubX:(a=this.context.select(".".concat(M.axisX)),t&&(a=a.transition())),this.context.attr("transform",this.getTranslate("context")),a.attr("transform",this.getTranslate("subx"))},getExtent:function getExtent(){var e=this,t=e.config.axis_x_extent;return t&&(za(t)?t=t(e.getXDomain(e.data.targets),e.subX):e.isTimeSeries()&&t.every(isNaN)&&(t=t.map(function(t){return e.subX(e.parseDate(t))}))),t}});var T=a(13);Ya(n.prototype,{initZoom:function initZoom(){this.zoomScale=null,this.generateZoom(),this.initZoomBehaviour()},bindZoomEvent:function bindZoomEvent(t){var e=!(0<arguments.length&&void 0!==t)||t,a=this,i=a.config.zoom_enabled;a.redrawEventRect();var n=a.main.select(".".concat(M.eventRects));i&&e?a.bindZoomOnEventRect(n,i.type):!1===e&&(a.api.unzoom(),n.on(".zoom",null).on(".drag",null))},generateZoom:function generateZoom(){var n=this,r=n.config,t=Object(T.zoom)().duration(0).on("start",n.onZoomStart.bind(n)).on("zoom",n.onZoom.bind(n)).on("end",n.onZoomEnd.bind(n));t.orgScaleExtent=function(){var t=r.zoom_extent||[1,10];return[t[0],Math.max(n.getMaxDataCount()/t[1],t[1])]},t.updateScaleExtent=function(){var t=Ha(n.x.orgDomain())/Ha(n.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this},t.updateTransformScale=function(t){n.orgXScale&&n.orgXScale.range(n.x.range());var e=t[r.axis_rotated?"rescaleY":"rescaleX"](n.orgXScale||n.x),a=n.trimXDomain(e.domain()),i=r.zoom_rescale;e.domain(a,n.orgXDomain),n.zoomScale=n.getCustomizedScale(e),n.xAxis.scale(n.zoomScale),i&&(n.orgXScale||(n.orgXScale=n.x.copy()),n.x.domain(a))},n.zoom=t},onZoomStart:function onZoomStart(){var t=B.event.sourceEvent;t&&(this.zoom.startEvent=t,Pa(this.config.zoom_onzoomstart,this.api,t))},onZoom:function onZoom(){var a=this,t=a.config,e=B.event,i=e.sourceEvent;if(t.zoom_enabled&&e.sourceEvent&&0!==a.filterTargetsToShow(a.data.targets).length&&(a.zoomScale||!(-1<i.type.indexOf("touch"))||1!==i.touches.length)){var n="mousemove"===i.type,r=i.wheelDelta<0,o=e.transform;!n&&r&&a.x.domain().every(function(t,e){return t!==a.orgXDomain[e]})&&a.x.domain(a.orgXDomain),a.zoom.updateTransformScale(o),a.isCategorized()&&a.x.orgDomain()[0]===a.orgXDomain[0]&&a.x.domain([a.orgXDomain[0]-1e-10,a.x.orgDomain()[1]]),a.redraw({withTransition:!1,withY:t.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),a.cancelClick=n,Pa(t.zoom_onzoom,a.api,a.zoomScale.domain())}},onZoomEnd:function onZoomEnd(){var t=this,e=t.zoom.startEvent,a=B.event&&B.event.sourceEvent;e&&-1<e.type.indexOf("touch")&&(e=e.changedTouches[0],a=a.changedTouches[0]),!e||a&&e.clientX===a.clientX&&e.clientY===a.clientY||(t.redrawEventRect(),t.updateZoom(),Pa(t.config.zoom_onzoomend,t.api,t[t.zoomScale?"zoomScale":"subX"].domain()))},getZoomDomain:function getZoomDomain(){var t=this.config,e=_slicedToArray(this.orgXDomain,2),a=e[0],i=e[1];return Da(t.zoom_x_min)&&(a=eb("min",[a,t.zoom_x_min])),Da(t.zoom_x_max)&&(i=eb("max",[i,t.zoom_x_max])),[a,i]},updateZoom:function updateZoom(t){var e=this;if(e.zoomScale){var a=e.zoomScale.domain(),i=e.subX.domain(),n=(a[0]<=i[0]||a[0]-.015<=i[0])&&(i[1]<=a[1]||i[1]<=a[1]-.015);(t||n)&&(e.xAxis.scale(e.subX),e.x.domain(e.subX.orgDomain()),e.zoomScale=null)}},bindZoomOnEventRect:function bindZoomOnEventRect(t,e){var a="drag"===e?this.zoomBehaviour:this.zoom;t.call(a).on("dblclick.zoom",null)},initZoomBehaviour:function initZoomBehaviour(){var s=this,t=s.config.axis_rotated,c=0,l=0,u=null,d={axis:t?"y":"x",attr:t?"height":"width",index:t?1:0};s.zoomBehaviour=Object(h.drag)().clickDistance(4).on("start",function(){s.setDragStatus(!0),u=u||s.main.append("rect").attr("clip-path",s.clipPath).attr("class",M.zoomBrush).attr("width",t?s.width:0).attr("height",t?0:s.height),c=Object(B.mouse)(this)[d.index],l=c,u.attr(d.axis,c).attr(d.attr,0),s.onZoomStart()}).on("drag",function(){l=Object(B.mouse)(this)[d.index],u.attr(d.axis,Math.min(c,l)).attr(d.attr,Math.abs(l-c))}).on("end",function(){var t,e=s.zoomScale||s.x;if(s.setDragStatus(!1),u.attr(d.axis,0).attr(d.attr,0),l<c&&(c=(t=[l,c])[0],l=t[1]),c<0&&(l+=Math.abs(c),c=0),c!==l)s.api.zoom([c,l].map(function(t){return e.invert(t)})),s.onZoomEnd();else if(s.isMultipleX())s.clickHandlerForMultipleXS.bind(this)(s);else{var a=B.event.sourceEvent||B.event,i=_slicedToArray("clientX"in a?[a.clientX,a.clientY]:[a.x,a.y],2),n=i[0],r=i[1],o=k.elementFromPoint(n,r);s.clickHandlerForSingleX.bind(o)(Object(B.select)(o).datum(),s)}})},setZoomResetButton:function setZoomResetButton(){var t=this,e=t.config,a=e.zoom_resetButton;a&&"drag"===e.zoom_enabled.type&&(t.zoom.resetBtn?t.zoom.resetBtn.style("display",null):t.zoom.resetBtn=t.selectChart.append("div").classed(M.button,!0).append("span").on("click",t.api.unzoom.bind(t)).classed(M.buttonZoomReset,!0).text(a.text||"Reset Zoom"))}});var A=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];Ya(n.prototype,{getColorFromCss:function getColorFromCss(){var t=k.body,e=t.__colorPattern__;if(!e){var a=k.createElement("span");a.className=M.colorPattern,a.style.display="none",t.appendChild(a);var i=l.getComputedStyle(a).backgroundImage;a.parentNode.removeChild(a),-1<i.indexOf(";")&&(e=i.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return t.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),t.__colorPattern__=e)}return e},generateColor:function generateColor(){var n=this,t=n.config,r=t.data_colors,o=t.data_color,s=[],c=Ka(t.color_pattern)?t.color_pattern:Object(d.scaleOrdinal)(n.getColorFromCss()||A).range(),l=c;if(za(t.color_tiles)){var u=t.color_tiles(),e=c.map(function(t,e){var a=t.replace(/[#\(\)\s,]/g,""),i="".concat(n.datetimeId,"-pattern-").concat(a,"-").concat(e);return function(t,e,a){var i=Object(B.select)(t.cloneNode(!0));return i.attr("id",a).insert("rect",":first-child").attr("width",i.attr("width")).attr("height",i.attr("height")).style("fill",e),{id:a,node:i.node()}}(u[e%u.length],t,i)});c=e.map(function(t){return"url(#".concat(t.id,")")}),n.patterns=e}return function(t){var e,a=t.id||t.data&&t.data.id||t,i=n.isTypeOf(a,["line","spline","step"])||!n.config.data_types[a];return za(r[a])?e=r[a](t):r[a]?e=r[a]:(s.indexOf(a)<0&&s.push(a),e=i?l[s.indexOf(a)%l.length]:c[s.indexOf(a)%c.length],r[a]=e),za(o)?o(e,t):e}},generateLevelColor:function generateLevelColor(){var t=this.config,r=t.color_pattern,e=t.color_threshold,o="value"===e.unit,s=e.max||100,c=e.values&&e.values.length?e.values:[];return Ka(e)?function(t){for(var e=o?t:100*t/s,a=r[r.length-1],i=0,n=c.length;i<n;i++)if(e<=c[i]){a=r[i];break}return a}:null},setOverColor:function setOverColor(t,e){var a=this,i=a.config.color_onover,n=t?i:a.color;Ma(n)?n=function(t){var e=t.id;return e in i?i[e]:a.color(e)}:Aa(n)&&(n=function(){return i}),Ma(e)?a.main.selectAll(".".concat(M.arc,"-").concat(e.id)).style("fill",n(e)):a.main.selectAll(".".concat(M.shape,"-").concat(e)).style("fill",n)}});function Fb(t,e,a){var i=t.config,n="axis_".concat(e,"_tick_format");return(i[n]?i[n]:t.defaultValueFormat)(a)}Ya(n.prototype,{getYFormat:function getYFormat(t){var i=this,n=i.yFormat,r=i.y2Format;return t&&!i.hasType("gauge")&&(n=i.defaultArcValueFormat,r=i.defaultArcValueFormat),function(t,e,a){return("y2"===i.axis.getId(a)?r:n).call(i,t,e)}},yFormat:function yFormat(t){return Fb(this,"y",t)},y2Format:function y2Format(t){return Fb(this,"y2",t)},defaultValueFormat:function defaultValueFormat(t){return ya(t)?+t:""},defaultArcValueFormat:function defaultArcValueFormat(t,e){return"".concat((100*e).toFixed(1),"%")},dataLabelFormat:function dataLabelFormat(t){function j7(t){return ya(t)?+t:""}var e=this.config.data_labels,a=j7;return za(e.format)?a=e.format:Ia(e.format)&&(a=e.format[t]?!0===e.format[t]?j7:e.format[t]:function(){return""}),a}}),Ya(n.prototype,{addCache:function addCache(t,e,a){var i=!!(2<arguments.length&&void 0!==a)&&a;this.cache[t]=i?this.cloneTarget(e):e},removeCache:function removeCache(t){var e=this;$a(t).forEach(function(t){return delete e.cache[t]})},getCache:function getCache(t,e){if(!(1<arguments.length&&void 0!==e&&e))return this.cache[t]||null;for(var a,i=[],n=0;a=t[n];n++)a in this.cache&&i.push(this.cloneTarget(this.cache[a]));return i},resetCache:function resetCache(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)}}),Ya(n.prototype,{generateClass:function generateClass(t,e){return" ".concat(t," ").concat(t+this.getTargetSelectorSuffix(e))},classText:function classText(t){return this.generateClass(M.text,t.index)},classTexts:function classTexts(t){return this.generateClass(M.texts,t.id)},classShape:function classShape(t){return this.generateClass(M.shape,t.index)},classShapes:function classShapes(t){return this.generateClass(M.shapes,t.id)},generateExtraLineClass:function generateExtraLineClass(){var a=this.config.line_classes||[],i=[];return function(t){var e=t.id||t.data&&t.data.id||t;return i.indexOf(e)<0&&i.push(e),a[i.indexOf(e)%a.length]}},classLine:function classLine(t){return this.classShape(t)+this.generateClass(M.line,t.id)},classLines:function classLines(t){return this.classShapes(t)+this.generateClass(M.lines,t.id)},classCircle:function classCircle(t){return this.classShape(t)+this.generateClass(M.circle,t.index)},classCircles:function classCircles(t){return this.classShapes(t)+this.generateClass(M.circles,t.id)},classBar:function classBar(t){return this.classShape(t)+this.generateClass(M.bar,t.index)},classBars:function classBars(t){return this.classShapes(t)+this.generateClass(M.bars,t.id)},classArc:function classArc(t){return this.classShape(t.data)+this.generateClass(M.arc,t.data.id)},classArcs:function classArcs(t){return this.classShapes(t.data)+this.generateClass(M.arcs,t.data.id)},classArea:function classArea(t){return this.classShape(t)+this.generateClass(M.area,t.id)},classAreas:function classAreas(t){return this.classShapes(t)+this.generateClass(M.areas,t.id)},classRegion:function classRegion(t,e){return"".concat(this.generateClass(M.region,e)," ").concat("class"in t?t.class:"")},classEvent:function classEvent(t){return this.generateClass(M.eventRect,t.index)},classTarget:function classTarget(t){var e=this.config.data_classes[t],a="";return e&&(a=" ".concat(M.target,"-").concat(e)),this.generateClass(M.target,t)+a},classFocus:function classFocus(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function classFocused(t){return" ".concat(0<=this.focusedTargetIds.indexOf(t.id)?M.focused:"")},classDefocused:function classDefocused(t){return" ".concat(0<=this.defocusedTargetIds.indexOf(t.id)?M.defocused:"")},classChartText:function classChartText(t){return M.chartText+this.classTarget(t.id)},classChartLine:function classChartLine(t){return M.chartLine+this.classTarget(t.id)},classChartBar:function classChartBar(t){return M.chartBar+this.classTarget(t.id)},classChartArc:function classChartArc(t){return M.chartArc+this.classTarget(t.data.id)},classChartRadar:function classChartRadar(t){return M.chartRadar+this.classTarget(t.id)},getTargetSelectorSuffix:function getTargetSelectorSuffix(t){return t||0===t?"-".concat(t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function selectorTarget(t,e){return"".concat(e||"",".").concat(M.target+this.getTargetSelectorSuffix(t))},selectorTargets:function selectorTargets(t,e){var a=this,i=t||[];return i.length?i.map(function(t){return a.selectorTarget(t,e)}):null},selectorLegend:function selectorLegend(t){return".".concat(M.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function selectorLegends(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null}}),Ya(pb.prototype,{focus:function focus(t){var e=this.internal,a=e.mapToTargetIds(t),i=e.svg.selectAll(e.selectorTargets(a.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),i.classed(M.focused,!0).classed(M.defocused,!1),e.hasArcType()&&e.expandArc(a),e.toggleFocusLegend(a,!0),e.focusedTargetIds=a,e.defocusedTargetIds=e.defocusedTargetIds.filter(function(t){return a.indexOf(t)<0})},defocus:function defocus(t){var e=this.internal,a=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(a.filter(e.isTargetToShow,e))).classed(M.focused,!1).classed(M.defocused,!0),e.hasArcType()&&e.unexpandArc(a),e.toggleFocusLegend(a,!1),e.focusedTargetIds=e.focusedTargetIds.filter(function(t){return a.indexOf(t)<0}),e.defocusedTargetIds=a},revert:function revert(t){var e=this.internal,a=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(a)).classed(M.focused,!1).classed(M.defocused,!1),e.hasArcType()&&e.unexpandArc(a),e.config.legend_show&&(e.showLegend(a.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(a)).filter(function(){return Object(B.select)(this).classed(M.legendItemFocused)}).classed(M.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]}}),Ya(pb.prototype,{_showHide:function _showHide(t,e,a){var i=this.internal,n=i.mapToTargetIds(e);i["".concat(t?"remove":"add","HiddenTargetIds")](n);var r=i.svg.selectAll(i.selectorTargets(n)),o=t?"1":"0";r.transition().style("opacity",o,"important").call(i.endall,function(){r.style("opacity",null).style("opacity",o)}),a.withLegend&&i["".concat(t?"show":"hide","Legend")](n),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},show:function show(t,e){var a=1<arguments.length&&void 0!==e?e:{};this._showHide(!0,t,a)},hide:function hide(t,e){var a=1<arguments.length&&void 0!==e?e:{};this._showHide(!1,t,a)},toggle:function toggle(t,e){var a=this,i=1<arguments.length&&void 0!==e?e:{},n=this.internal,r={show:[],hide:[]};n.mapToTargetIds(t).forEach(function(t){return r[n.isTargetToShow(t)?"hide":"show"].push(t)}),r.show.length&&this.show(r.show,i),r.hide.length&&setTimeout(function(){return a.hide(r.hide,i)},0)}});function Hb(t){var e,a=this.internal,i=t;if(a.config.zoom_enabled&&i&&function(t,e){var a=_slicedToArray(e,2),i=a[0],n=a[1];return t.every(function(t,e){return 0===e?i<=t:t<=n})}(i,a.getZoomDomain())){if(a.isTimeSeries()&&(i=i.map(function(t){return a.parseDate(t)})),a.config.subchart_show){var n=a.zoomScale||a.x;a.brush.getSelection().call(a.brush.move,[n(i[0]),n(i[1])]),e=i}else a.x.domain(i),a.zoomScale=a.x,a.xAxis.scale(a.zoomScale),e=a.zoomScale.orgDomain();a.redraw({withTransition:!0,withY:a.config.zoom_rescale,withDimension:!1}),a.setZoomResetButton(),Pa(a.config.zoom_onzoom,a.api,e)}else e=a.zoomScale?a.zoomScale.domain():a.x.orgDomain();return e}Ya(Hb,{enable:function enable(t){var e=0<arguments.length&&void 0!==t?t:"wheel",a=this.internal,i=a.config,n=e;e&&(n=Aa(e)&&/^(drag|wheel)$/.test(e)?{type:e}:e),i.zoom_enabled=n,a.zoom?!1===e&&a.bindZoomEvent(!1):(a.initZoom(),a.bindZoomEvent()),a.updateAndRedraw()},max:function max(t){var e=this.internal,a=e.config;return 0!==t&&!t||(a.zoom_x_max=eb("max",[e.orgXDomain[1],t])),a.zoom_x_max},min:function min(t){var e=this.internal,a=e.config;return 0!==t&&!t||(a.zoom_x_min=eb("min",[e.orgXDomain[0],t])),a.zoom_x_min},range:function range(t){var e=this.zoom;if(Ma(t)){var a=t.min,i=t.max;Da(a)&&e.min(a),Da(i)&&e.max(i)}return{min:e.min(),max:e.max()}}}),Ya(pb.prototype,{zoom:Hb,unzoom:function unzoom(){var t=this.internal,e=t.config;if(t.zoomScale){e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(T.zoomIdentity),t.updateZoom(!0),t.zoom.resetBtn&&t.zoom.resetBtn.style("display","none");var a=t.main.select(".".concat(M.eventRects));Object(T.zoomTransform)(a.node())!==T.zoomIdentity&&t.zoom.transform(a,T.zoomIdentity),t.redraw({withTransition:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withY:e.zoom_rescale})}}}),Ya(pb.prototype,{load:function load(e){var t=this.internal,a=t.config;e.xs&&t.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){a.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(a.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){a.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){a.data_colors[t]=e.colors[t]}),"unload"in e&&!1!==e.unload?t.unload(t.mapToTargetIds(!0===e.unload?null:e.unload),function(){return t.loadFromArgs(e)}):t.loadFromArgs(e)},unload:function unload(t){var e=this.internal,a=t||{};La(a)?a={ids:a}:Aa(a)&&(a={ids:[a]});var i=e.mapToTargetIds(a.ids);e.unload(i,function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.removeCache(i),a.done&&a.done()})}});var Y=a(14);Ya(pb.prototype,{flow:function flow(t){var e,a,i,n,r=this.internal,o=0,s=0;if((t.json||t.rows||t.columns)&&(e=r.convertData(t)),e&&r.isTabVisible()){var c=[],l=r.getMaxDataCount(),u=r.convertDataToTargets(e,!0);r.data.targets.forEach(function(t){for(var e=!1,a=0;a<u.length;a++)if(t.id===u[a].id){e=!0,t.values[t.values.length-1]&&(s=t.values[t.values.length-1].index+1),o=u[a].values.length;for(var i=0;i<o;i++)u[a].values[i].index=s+i,r.isTimeSeries()||(u[a].values[i].x=s+i);t.values=t.values.concat(u[a].values),u.splice(a,1);break}e||c.push(t.id)}),r.data.targets.forEach(function(t){for(var e=0;e<c.length;e++)if(t.id===c[e]){s=t.values[t.values.length-1].index+1;for(var a=0;a<o;a++)t.values.push({id:t.id,index:s+a,x:r.isTimeSeries()?r.getOtherTargetX(s+a):s+a,value:null})}}),r.data.targets.length&&u.forEach(function(t){for(var e=[],a=r.data.targets[0].values[0].index;a<s;a++)e.push({id:t.id,index:a,x:r.isTimeSeries()?r.getOtherTargetX(a):a,value:null});t.values.forEach(function(t){t.index+=s,r.isTimeSeries()||(t.x+=s)}),t.values=e.concat(t.values)}),r.data.targets=r.data.targets.concat(u);var d=r.data.targets[0],g=d.values[0];Da(t.to)?(o=0,n=r.isTimeSeries()?r.parseDate(t.to):t.to,d.values.forEach(function(t){t.x<n&&o++})):Da(t.length)&&(o=t.length),l?1===l&&r.isTimeSeries()&&(i=(d.values[d.values.length-1].x-g.x)/2,a=[new Date(g.x-i),new Date(+g.x+i)]):(i=r.isTimeSeries()?1<d.values.length?d.values[d.values.length-1].x-g.x:g.x-r.getXDomain(r.data.targets)[0]:1,a=[g.x-i,g.x]),a&&r.updateXDomain(null,!0,!0,!1,a),r.updateTargets(r.data.targets),r.redraw({flow:{index:g.index,length:o,duration:ya(t.duration)?t.duration:r.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:1<l,withTrimXDomain:!1,withUpdateXAxis:!0})}}}),Ya(n.prototype,{generateFlow:function generateFlow(I){var z=this,E=z.config;return function(){var t,e,a=I.targets,i=I.flow,n=I.shape.type,r=n.bar,o=n.line,s=n.area,c=I.shape.pos,l=c.cx,u=c.cy,d=c.xForText,g=c.yForText,h=I.xv,f=I.duration,p=i.index,x=i.length,v=z.getValueOnIndex(z.data.targets[0].values,p),m=z.getValueOnIndex(z.data.targets[0].values,p+x),_=z.x.domain(),y=i.duration||f,b=i.done||function(){},T=z.generateWait(),A=z.xgrid||Object(B.selectAll)([]),w=z.xgridLines||Object(B.selectAll)([]),L=z.mainRegion||Object(B.selectAll)([]),C=z.mainText||Object(B.selectAll)([]),S=z.mainBar||Object(B.selectAll)([]),k=z.mainLine||Object(B.selectAll)([]),D=z.mainArea||Object(B.selectAll)([]),O=z.mainCircle||Object(B.selectAll)([]);z.flowing=!0,z.data.targets.forEach(function(t){t.values.splice(0,x)});var X=z.updateXDomain(a,!0,!0);z.updateXGrid&&z.updateXGrid(!0),t=i.orgDataCount?1===i.orgDataCount||(v&&v.x)===(m&&m.x)?z.x(_[0])-z.x(X[0]):z.isTimeSeries()?z.x(_[0])-z.x(X[0]):z.x(v.x)-z.x(m.x):1===z.data.targets[0].values.length?z.isTimeSeries()?(v=z.getValueOnIndex(z.data.targets[0].values,0),m=z.getValueOnIndex(z.data.targets[0].values,z.data.targets[0].values.length-1),z.x(v.x)-z.x(m.x)):Ha(X)/2:z.x(_[0])-z.x(X[0]),e=Ha(_)/Ha(X);var F="translate(".concat(t,",0) scale(").concat(e,",1)");z.hideXGridFocus();var R=Object(P.transition)().ease(Y.easeLinear).duration(y);T.add([z.axes.x.transition(R).call(function(t){return z.xAxis.setTransition(R).create(t)}),S.transition(R).attr("transform",F),k.transition(R).attr("transform",F),D.transition(R).attr("transform",F),O.transition(R).attr("transform",F),C.transition(R).attr("transform",F),L.filter(z.isRegionOnX).transition(R).attr("transform",F),A.transition(R).attr("transform",F),w.transition(R).attr("transform",F)]),R.call(T,function(){var t=E.axis_rotated;if(x){for(var e={shapes:[],texts:[],eventRects:[]},a=0;a<x;a++)e.shapes.push(".".concat(M.shape,"-").concat(a)),e.texts.push(".".concat(M.text,"-").concat(a)),e.eventRects.push(".".concat(M.eventRect,"-").concat(a));["shapes","texts","eventRects"].forEach(function(t){z.svg.selectAll(".".concat(M[t])).selectAll(e[t]).remove()}),z.svg.select(".".concat(M.xgrid)).remove()}if(A.size()&&A.attr("transform",null).attr(z.xgridAttr),w.attr("transform",null),w.select("line").attr("x1",t?0:h).attr("x2",t?z.width:h),w.select("text").attr("x",t?z.width:0).attr("y",h),S.attr("transform",null).attr("d",r),k.attr("transform",null).attr("d",o),D.attr("transform",null).attr("d",s),O.attr("transform",null),z.isCirclePoint())O.attr("cx",l).attr("cy",u);else{O.attr("x",function(t){return l(t)-E.point_r}).attr("y",function(t){return u(t)-E.point_r}).attr("cx",l).attr("cy",u)}C.attr("transform",null).attr("x",d).attr("y",g).style("fill-opacity",z.opacityForText.bind(z)),L.attr("transform",null),L.select("rect").filter(z.isRegionOnX).attr("x",z.regionX.bind(z)).attr("width",z.regionWidth.bind(z)),E.interaction_enabled&&z.redrawEventRect(),b(),z.flowing=!1})}}}),Ya(pb.prototype,{selected:function selected(t){var e=this.internal,a=[];return e.main.selectAll(".".concat(M.shapes+e.getTargetSelectorSuffix(t))).selectAll(".".concat(M.shape)).filter(function(){return Object(B.select)(this).classed(M.SELECTED)}).each(function(t){return a.push(t)}),a},select:function select(c,l,u){var d=this.internal,g=d.config;g.data_selection_enabled&&d.main.selectAll(".".concat(M.shapes)).selectAll(".".concat(M.shape)).each(function(t,e){var a=Object(B.select)(this),i=t.data?t.data.id:t.id,n=d.getToggle(this,t).bind(d),r=g.data_selection_grouped||!c||0<=c.indexOf(i),o=!l||0<=l.indexOf(e),s=a.classed(M.SELECTED);a.classed(M.line)||a.classed(M.area)||(r&&o?g.data_selection_isselectable(t)&&!s&&n(!0,a.classed(M.SELECTED,!0),t,e):Da(u)&&u&&s&&n(!1,a.classed(M.SELECTED,!1),t,e))})},unselect:function unselect(c,l){var u=this.internal,d=u.config;d.data_selection_enabled&&u.main.selectAll(".".concat(M.shapes)).selectAll(".".concat(M.shape)).each(function(t,e){var a=Object(B.select)(this),i=t.data?t.data.id:t.id,n=u.getToggle(this,t).bind(u),r=d.data_selection_grouped||!c||0<=c.indexOf(i),o=!l||0<=l.indexOf(e),s=a.classed(M.SELECTED);a.classed(M.line)||a.classed(M.area)||r&&o&&d.data_selection_isselectable(t)&&s&&n(!1,a.classed(M.SELECTED,!1),t,e)})}}),Ya(pb.prototype,{transform:function transform(t,e){var a=this.internal,i=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;(function transformTo(t,e,a){var i=a||{withTransitionForAxis:!this.hasArcType()};i.withTransitionForTransform=!1,this.transiting=!1,this.setTargetType(t,e),this.updateTargets(this.data.targets),this.updateAndRedraw(i)}).bind(a)(e,t,i)}}),Ya(pb.prototype,{groups:function groups(t){var e=this.internal,a=e.config;return Ca(t)||(a.data_groups=t,e.redraw()),a.data_groups}});function Jb(t){var e=this.internal,a=e.config;return t&&(a.grid_x_lines=t,e.redrawWithoutRescale()),a.grid_x_lines}Ya(Jb,{add:function add(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function remove(t){this.internal.removeGridLines(t,!0)}});function Kb(t){var e=this.internal,a=e.config;return t&&(a.grid_y_lines=t,e.redrawWithoutRescale()),a.grid_y_lines}Ya(Kb,{add:function add(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function remove(t){this.internal.removeGridLines(t,!1)}}),Ya(pb.prototype,{xgrids:Jb,ygrids:Kb});function Lb(t){var e=this.internal,a=e.config;return t?(a.regions=t,e.redrawWithoutRescale(),t):a.regions}Ya(Lb,{add:function add(t){var e=this.internal,a=e.config;return t&&(a.regions=a.regions.concat(t),e.redrawWithoutRescale()),a.regions},remove:function remove(t){var e=this.internal,a=e.config,i=t||{},n=Na(i,"duration",a.transition_duration),r=Na(i,"classes",[M.region]),o=e.main.select(".".concat(M.regions)).selectAll(r.map(function(t){return".".concat(t)}));return(n?o.transition().duration(n):o).style("opacity","0").remove(),o=a.regions,Object.keys(i).length?(o=o.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0<=r.indexOf(t)&&(e=!0)}),!e)}),a.regions=o):a.regions=[],o}}),Ya(pb.prototype,{regions:Lb});function Mb(t){var e=this.internal.data.targets;if(Ca(t))return e;var a=La(t)?t:[t];return e.filter(function(e){return a.some(function(t){return t===e.id})})}Ya(Mb,{shown:function shown(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=null;if(t){var e=this.data(t);e&&La(e)&&(i=[],e.forEach(function(t){var e=t.values.map(function(t){return t.value});a?i=i.concat(e):i.push(e)}))}return i},names:function names(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},colors:function colors(t){return this.internal.updateDataAttributes("colors",t)},axes:function axes(t){return this.internal.updateDataAttributes("axes",t)},min:function min(){return this.internal.getMinMaxData().min},max:function max(){return this.internal.getMinMaxData().max}}),Ya(pb.prototype,{data:Mb}),Ya(pb.prototype,{category:function category(t,e){var a=this.internal,i=a.config;return 1<arguments.length&&(i.axis_x_categories[t]=e,a.redraw()),i.axis_x_categories[t]},categories:function categories(t){var e=this.internal,a=e.config;return arguments.length&&(a.axis_x_categories=t,e.redraw()),a.axis_x_categories}}),Ya(pb.prototype,{color:function color(t){return this.internal.color(t)}}),Ya(pb.prototype,{x:function x(t){var e=this.internal,a=e.isCustomX()&&e.isCategorized();return La(t)&&(a?e.api.categories(t):(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),a?e.api.categories():e.data.xs},xs:function xs(t){var e=this.internal;return Ma(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}});function Nb(t,e,a){var i=t.config,n="axis_x_".concat(e),r="axis_y_".concat(e),o="axis_y2_".concat(e);Da(a)&&(Ia(a)?(ya(a.x)&&(i[n]=a.x),ya(a.y)&&(i[r]=a.y),ya(a.y2)&&(i[o]=a.y2)):(i[r]=a,i[o]=a),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function Ob(t,e){var a=t.config;return{x:a["axis_x_".concat(e)],y:a["axis_y_".concat(e)],y2:a["axis_y2_".concat(e)]}}var w=Ya(function(){},{labels:function labels(e){var a=this.internal;arguments.length&&(Object.keys(e).forEach(function(t){a.axis.setLabelText(t,e[t])}),a.axis.updateLabels())},min:function min(t){var e=this.internal;return arguments.length?Nb(e,"min",t):Ob(e,"min")},max:function max(t){var e=this.internal;return arguments.length?Nb(e,"max",t):Ob(e,"max")},range:function range(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};Da(t.max)&&e.max(t.max),Da(t.min)&&e.min(t.min)}});Ya(pb.prototype,{axis:w});var L=Ya(function(){},{show:function show(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function hide(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}});Ya(pb.prototype,{legend:L}),Ya(pb.prototype,{resize:function resize(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush(!1,!0)},flush:function flush(t,e){var a=this.internal;a.rendered?(e?a.brush&&a.brush.updateResize():a.axis&&a.axis.setOrient(),a.zoomScale=null,t?a.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):a.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})):a.initToRender(!0)},destroy:function destroy(){var e=this,a=this.internal;return Ka(a)&&(a.callPluginHook("$willDestroy"),a.charts.splice(a.charts.indexOf(this),1),a.svg.select("*").interrupt(),Da(a.resizeTimeout)&&l.clearTimeout(a.resizeTimeout),l.removeEventListener("resize",a.resizeFunction),a.selectChart.classed("bb",!1).html(""),Object.keys(this).forEach(function(t){"internal"===t&&Object.keys(a).forEach(function(t){a[t]=null}),e[t]=null,delete e[t]})),null},config:function config(t,e,a){var i,n=this.internal,r=t&&t.replace(/\./g,"_");return r in n.config&&(Da(e)?(i=n.config[r]=e,a&&this.flush()):i=n.config[r]),i}});var C=Ya(function(){},{show:function show(t){var e,a,i=0<arguments.length&&void 0!==t?t:{},n=this.internal;if(i.mouse&&(a=i.mouse),i.data){var r=n.getYScale(i.data.id)(i.data.value);n.isMultipleX()?a=[n.x(i.data.x),r]:(n.config.tooltip_grouped||(a=[0,r]),e=ya(i.data.index)?i.data.index:n.getIndexByX(i.data.x))}else Da(i.x)?e=n.getIndexByX(i.x):Da(i.index)&&(e=i.index);("mouse"===n.inputType?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){n.dispatchEvent(t,e,a)})},hide:function hide(){var t=this.internal;t.hideTooltip(!0),t.hideXGridFocus(),t.unexpandCircles(),t.unexpandBars()}});Ya(pb.prototype,{tooltip:C});function Tb(t,e){var a=new XMLSerializer,i=t.cloneNode(!0),n=function(t){var a=[];return t.forEach(function(e){try{e.cssRules&&e.cssRules.length&&(a=a.concat($a(e.cssRules)))}catch(t){console.error("Error while reading rules from ".concat(e.href,": ").concat(t.toString()))}}),a}($a(k.styleSheets)).filter(function(t){return t.cssText}).map(function(t){return t.cssText});i.setAttribute("xmlns",B.namespaces.xhtml);var r=a.serializeToString(i),o=k.createElement("style");o.appendChild(k.createTextNode(n.join("\n")));var s=a.serializeToString(o),c='<svg xmlns="'.concat(B.namespaces.svg,'" width="').concat(e.width,'" height="').concat(e.height,'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t').concat(s,"\n\t\t\t\t").concat(r.replace(/(url\()[^#]+/g,"$1"),"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,".concat(function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x".concat(e))}))}(c))}Ya(pb.prototype,{export:function _export(a,i){var t=this.internal,n={width:t.currentWidth,height:t.currentHeight},e=Tb(this.element,n);if(za(i)){var r=new Image;r.crosssOrigin="Anonymous",r.onload=function(){var t=k.createElement("canvas"),e=t.getContext("2d");t.width=n.width,t.height=n.height,e.drawImage(r,0,0),i(t.toDataURL(a))},r.src=e}return e}}),a.d(e,"bb",function(){return D});var S={},D={version:"1.11.0",generate:function generate(t){var e=p({},S,t),a=new pb(e);return a.internal.charts=this.instance,this.instance.push(a),a},defaults:function defaults(t){return Ma(t)&&(S=t),S},instance:[],plugin:{},chart:{fn:pb.prototype,internal:{fn:n.prototype,axis:{fn:u.prototype}}}};e.default=D}],__webpack_require__.c=x,__webpack_require__.d=function(t,e,a){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(a,i,function(t){return e[t]}.bind(null,i));return a},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0);function __webpack_require__(t){if(x[t])return x[t].exports;var e=x[t]={i:t,l:!1,exports:{}};return p[t].call(e.exports,e,e.exports,__webpack_require__),e.l=!0,e.exports}var p,x});
//# sourceMappingURL=billboard.min.js.map